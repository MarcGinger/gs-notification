{
  "service": {
    "name": "core-attributes",
    "boundedContext": "core",
    "application": "attributes",
    "moduleName": "core",
    "version": "1",
    "hasRedis": true,
    "hasSql": true,
    "hasEventStream": true
  },
  "tables": [
    {
      "name": "attribute_rule",
      "description": "",
      "columns": [
        {
          "name": "id",
          "type": "Record<string, unknown>",
          "childRelationshipType": "AttributeRuleSet",
          "parentRelationshipType": "",
          "datatype": "JSON",
          "primaryKey": true,
          "required": true,
          "description": "Primary key as JSON object containing composite identifier. Typically includes tenant context and unique rule identifier for multi-tenant attribute rule management.",
          "defaultvalue": "",
          "example": "{\"tenant\": \"default\", \"rule_id\": \"email_validation\"}",
          "autoIncrement": false,
          "array": false,
          "isPII": "",
          "secret": false,
          "route": "",
          "create": true,
          "update": true,
          "get": true,
          "list": true,
          "relationship": "object",
          "parentRelationship": "",
          "childRelationship": "attribute_rule_attribute_rule_set",
          "meta": {
            "kind": "json",
            "jsonShape": "object"
          }
        },
        {
          "name": "name",
          "type": "string",
          "childRelationshipType": "",
          "parentRelationshipType": "",
          "datatype": "VARCHAR",
          "primaryKey": false,
          "required": true,
          "description": "Human-readable name for the attribute rule that will be displayed in forms and admin interfaces. Should be descriptive and user-friendly.",
          "defaultvalue": "",
          "example": "Email Format Validation",
          "autoIncrement": false,
          "maxLength": "60",
          "array": false,
          "isPII": "",
          "secret": false,
          "route": "",
          "create": true,
          "update": true,
          "get": true,
          "list": true,
          "parentRelationship": "",
          "childRelationship": "",
          "meta": {
            "kind": "string",
            "maxLength": 60
          }
        },
        {
          "name": "description",
          "type": "string",
          "childRelationshipType": "",
          "parentRelationshipType": "",
          "datatype": "TEXT",
          "primaryKey": false,
          "required": false,
          "description": "Detailed explanation of what this attribute rule validates, including business context, usage examples, and any special considerations for implementation.",
          "defaultvalue": "",
          "example": "Validates email addresses using RFC 5322 standard format",
          "autoIncrement": false,
          "array": false,
          "isPII": "",
          "secret": false,
          "route": "",
          "create": true,
          "update": true,
          "get": true,
          "list": true,
          "parentRelationship": "",
          "childRelationship": "",
          "meta": {
            "kind": "string",
            "maxLength": 65535
          }
        },
        {
          "name": "type",
          "type": "AttributeRuleTypeEnum",
          "childRelationshipType": "",
          "parentRelationshipType": "",
          "datatype": "ENUM",
          "primaryKey": false,
          "required": true,
          "description": "Data type classification for the attribute field. Determines validation logic, storage format, and UI input controls to be used for this attribute.",
          "defaultvalue": "",
          "example": "string",
          "autoIncrement": false,
          "enum": [
            {
              "key": "string"
            },
            {
              "key": "boolean"
            },
            {
              "key": "integer"
            },
            {
              "key": "currency"
            },
            {
              "key": "date"
            },
            {
              "key": "datetime"
            },
            {
              "key": "other"
            }
          ],
          "array": false,
          "isPII": "",
          "secret": false,
          "route": "",
          "create": true,
          "update": true,
          "get": true,
          "list": true,
          "parentRelationship": "",
          "childRelationship": "",
          "meta": {
            "kind": "enum",
            "enumValues": [
              "string",
              "boolean",
              "integer",
              "currency",
              "date",
              "datetime",
              "other"
            ],
            "enumName": "type"
          }
        },
        {
          "name": "reference",
          "type": "boolean",
          "childRelationshipType": "",
          "parentRelationshipType": "",
          "datatype": "BOOLEAN",
          "primaryKey": false,
          "required": false,
          "description": "Indicates whether this attribute can be used as a searchable reference or lookup key. When true, the attribute will be indexed for efficient querying.",
          "defaultvalue": "false",
          "example": "false",
          "autoIncrement": false,
          "array": false,
          "isPII": "",
          "secret": false,
          "route": "",
          "create": true,
          "update": true,
          "get": true,
          "list": true,
          "parentRelationship": "",
          "childRelationship": "",
          "meta": {
            "kind": "boolean"
          }
        },
        {
          "name": "reserved",
          "type": "boolean",
          "childRelationshipType": "",
          "parentRelationshipType": "",
          "datatype": "BOOLEAN",
          "primaryKey": false,
          "required": false,
          "description": "Protects critical system attributes from modification or deletion. When true, attempts to update or remove this rule will be rejected to maintain system integrity.",
          "defaultvalue": "false",
          "example": "false",
          "autoIncrement": false,
          "array": false,
          "isPII": "",
          "secret": false,
          "route": "",
          "create": true,
          "update": true,
          "get": true,
          "list": true,
          "parentRelationship": "",
          "childRelationship": "",
          "meta": {
            "kind": "boolean"
          }
        },
        {
          "name": "unique",
          "type": "boolean",
          "childRelationshipType": "",
          "parentRelationshipType": "",
          "datatype": "boolean",
          "primaryKey": false,
          "required": false,
          "description": "Enforces uniqueness constraint across all entities using this attribute. When true, duplicate values will be rejected with validation error.",
          "defaultvalue": "false",
          "example": "true",
          "autoIncrement": false,
          "array": false,
          "isPII": "",
          "secret": false,
          "route": "",
          "create": true,
          "update": true,
          "get": true,
          "list": true,
          "parentRelationship": "",
          "childRelationship": "",
          "meta": {
            "kind": "boolean"
          }
        },
        {
          "name": "unique_error",
          "type": "string",
          "childRelationshipType": "",
          "parentRelationshipType": "",
          "datatype": "VARCHAR",
          "primaryKey": false,
          "required": false,
          "description": "Custom error message displayed when uniqueness validation fails. Should be user-friendly and provide clear guidance on resolution.",
          "defaultvalue": "",
          "example": "This email address is already registered in the system",
          "autoIncrement": false,
          "maxLength": "255",
          "array": false,
          "isPII": "",
          "secret": false,
          "route": "",
          "create": true,
          "update": true,
          "get": true,
          "list": true,
          "parentRelationship": "",
          "childRelationship": "",
          "meta": {
            "kind": "string",
            "maxLength": 255
          }
        },
        {
          "name": "required",
          "type": "boolean",
          "childRelationshipType": "",
          "parentRelationshipType": "",
          "datatype": "boolean",
          "primaryKey": false,
          "required": false,
          "description": "Specifies whether this attribute must have a value. When true, empty or null values will trigger validation errors during entity creation or updates.",
          "defaultvalue": "false",
          "example": "true",
          "autoIncrement": false,
          "array": false,
          "isPII": "",
          "secret": false,
          "route": "",
          "create": true,
          "update": true,
          "get": true,
          "list": true,
          "parentRelationship": "",
          "childRelationship": "",
          "meta": {
            "kind": "boolean"
          }
        },
        {
          "name": "required_error",
          "type": "string",
          "childRelationshipType": "",
          "parentRelationshipType": "",
          "datatype": "VARCHAR",
          "primaryKey": false,
          "required": false,
          "description": "Custom error message shown when a required field is missing or empty. Should clearly indicate which field needs to be completed.",
          "defaultvalue": "",
          "example": "Email address is required to create an account",
          "autoIncrement": false,
          "maxLength": "255",
          "array": false,
          "isPII": "",
          "secret": false,
          "route": "",
          "create": true,
          "update": true,
          "get": true,
          "list": true,
          "parentRelationship": "",
          "childRelationship": "",
          "meta": {
            "kind": "string",
            "maxLength": 255
          }
        },
        {
          "name": "regex",
          "type": "string",
          "childRelationshipType": "",
          "parentRelationshipType": "",
          "datatype": "VARCHAR",
          "primaryKey": false,
          "required": false,
          "description": "Regular expression pattern for format validation. When specified, attribute values must match this pattern or validation will fail.",
          "defaultvalue": "",
          "example": "^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}$",
          "autoIncrement": false,
          "maxLength": "120",
          "array": false,
          "isPII": "",
          "secret": false,
          "route": "",
          "create": true,
          "update": true,
          "get": true,
          "list": true,
          "parentRelationship": "",
          "childRelationship": "",
          "meta": {
            "kind": "string",
            "maxLength": 120
          }
        },
        {
          "name": "regex_error",
          "type": "string",
          "childRelationshipType": "",
          "parentRelationshipType": "",
          "datatype": "VARCHAR",
          "primaryKey": false,
          "required": false,
          "description": "Custom error message displayed when regex pattern validation fails. Should explain the expected format and provide examples.",
          "defaultvalue": "",
          "example": "Please enter a valid email address (e.g., user@domain.com)",
          "autoIncrement": false,
          "maxLength": "255",
          "array": false,
          "isPII": "",
          "secret": false,
          "route": "",
          "create": true,
          "update": true,
          "get": true,
          "list": true,
          "parentRelationship": "",
          "childRelationship": "",
          "meta": {
            "kind": "string",
            "maxLength": 255
          }
        }
      ],
      "relationships": [
        {
          "name": "attribute_rule_attribute_rule_set",
          "parentTable": "attribute_rule",
          "parentColumn": {
            "name": "id",
            "type": "Record<string, unknown>",
            "childRelationshipType": "AttributeRuleSet",
            "parentRelationshipType": "",
            "datatype": "JSON",
            "primaryKey": true,
            "required": true,
            "description": "Primary key as JSON object containing composite identifier. Typically includes tenant context and unique rule identifier for multi-tenant attribute rule management.",
            "defaultvalue": "",
            "example": "{\"tenant\": \"default\", \"rule_id\": \"email_validation\"}",
            "autoIncrement": false,
            "array": false,
            "isPII": "",
            "secret": false,
            "route": "",
            "create": true,
            "update": true,
            "get": true,
            "list": true,
            "relationship": "object",
            "parentRelationship": "",
            "childRelationship": "attribute_rule_attribute_rule_set",
            "meta": {
              "kind": "json",
              "jsonShape": "object"
            }
          },
          "childTable": "attribute_rule_set",
          "childColumn": {
            "name": "attributes",
            "type": "Record<string, unknown>",
            "childRelationshipType": "",
            "parentRelationshipType": "AttributeRule",
            "datatype": "JSON",
            "primaryKey": false,
            "required": false,
            "description": "JSON object containing the collection of attribute rules that belong to this rule set. Each rule defines validation constraints, types, and behavior for specific attributes.",
            "defaultvalue": "",
            "example": "{\"tenant\": \"default\", \"rule_id\": \"email_validation\"}",
            "autoIncrement": false,
            "array": false,
            "isPII": "",
            "secret": false,
            "route": "",
            "create": true,
            "update": true,
            "get": true,
            "list": true,
            "relationship": "object",
            "parentRelationship": "attribute_rule_attribute_rule_set",
            "childRelationship": "",
            "meta": {
              "kind": "json",
              "jsonShape": "object"
            }
          },
          "type": "object",
          "complex": true
        }
      ],
      "lines": [],
      "keys": [
        {
          "name": "id",
          "type": "Record<string, unknown>",
          "childRelationshipType": "AttributeRuleSet",
          "parentRelationshipType": "",
          "datatype": "JSON",
          "primaryKey": true,
          "required": true,
          "description": "Primary key as JSON object containing composite identifier. Typically includes tenant context and unique rule identifier for multi-tenant attribute rule management.",
          "defaultvalue": "",
          "example": "{\"tenant\": \"default\", \"rule_id\": \"email_validation\"}",
          "autoIncrement": false,
          "array": false,
          "isPII": "",
          "secret": false,
          "route": "",
          "create": true,
          "update": true,
          "get": true,
          "list": true,
          "relationship": "object",
          "parentRelationship": "",
          "childRelationship": "attribute_rule_attribute_rule_set",
          "meta": {
            "kind": "json",
            "jsonShape": "object"
          }
        }
      ],
      "indexes": [
        {
          "name": "name",
          "type": "string",
          "childRelationshipType": "",
          "parentRelationshipType": "",
          "datatype": "VARCHAR",
          "primaryKey": false,
          "required": true,
          "description": "Human-readable name for the attribute rule that will be displayed in forms and admin interfaces. Should be descriptive and user-friendly.",
          "defaultvalue": "",
          "example": "Email Format Validation",
          "autoIncrement": false,
          "maxLength": "60",
          "array": false,
          "isPII": "",
          "secret": false,
          "route": "",
          "create": true,
          "update": true,
          "get": true,
          "list": true,
          "parentRelationship": "",
          "childRelationship": "",
          "meta": {
            "kind": "string",
            "maxLength": 60
          }
        }
      ],
      "docs": {
        "name": "Attribute_rule",
        "summary": "Configuration and metadata definitions for attributes, including their rules and validation behavior",
        "version": "1.0.0"
      },
      "apis": {},
      "store": {
        "read": "redis",
        "write": "kurrentdb",
        "query": "redis",
        "projector": "redis"
      },
      "options": {
        "command": true,
        "create": true,
        "update": true,
        "read": "redis",
        "write": "kurrentdb",
        "query": "redis",
        "projector": "redis",
        "queue": false,
        "softDelete": true,
        "timestamps": true,
        "versioning": true,
        "logging": true,
        "auditing": true,
        "caching": true,
        "eventStreaming": false
      },
      "cancel": {
        "create": false,
        "update": false,
        "delete": false,
        "batch": false,
        "get": false
      },
      "redis": {
        "prefix": "",
        "version": "1.0",
        "category": "core:attributes.attribute.rule.v1",
        "ttl": 3600,
        "hash": true,
        "aggregate": "attribute_rule"
      },
      "eventstream": {
        "boundedContext": "core",
        "aggregate": "attribute_rule",
        "version": "v1",
        "stream": "core.attributes.attributeRule",
        "createdEvent": "CoreAttributesAttributeRuleCreated.v1",
        "updatedEvent": "CoreAttributesAttributeRuleUpdated.v1",
        "deletedEvent": "CoreAttributesAttributeRuleDeleted.v1"
      },
      "permissions": {
        "bulk": [
          "update",
          "delete",
          "import"
        ],
        "adminOverride": true,
        "auditView": true,
        "custom": []
      },
      "domainName": "attribute-rule-set",
      "parentPath": [
        "attribute_rule_set"
      ]
    },
    {
      "name": "attribute_rule_set",
      "description": "",
      "columns": [
        {
          "name": "code",
          "type": "string",
          "childRelationshipType": "",
          "parentRelationshipType": "",
          "datatype": "VARCHAR",
          "primaryKey": true,
          "required": true,
          "description": "Primary key and unique identifier for the attribute rule set. Defines the category or classification that groups related attribute rules together.",
          "defaultvalue": "",
          "example": "COUNTRY",
          "autoIncrement": false,
          "maxLength": "64",
          "array": false,
          "isPII": "",
          "secret": false,
          "route": "",
          "create": true,
          "update": true,
          "get": true,
          "list": true,
          "parentRelationship": "",
          "childRelationship": "",
          "meta": {
            "kind": "string",
            "maxLength": 64
          }
        },
        {
          "name": "name",
          "type": "string",
          "childRelationshipType": "",
          "parentRelationshipType": "",
          "datatype": "VARCHAR",
          "primaryKey": false,
          "required": true,
          "description": "Human-readable display name for the attribute rule set. Used in administrative interfaces and documentation to describe the purpose of this rule set category.",
          "defaultvalue": "",
          "example": "Countries",
          "autoIncrement": false,
          "maxLength": "128",
          "array": false,
          "isPII": "",
          "secret": false,
          "route": "",
          "create": true,
          "update": true,
          "get": true,
          "list": true,
          "parentRelationship": "",
          "childRelationship": "",
          "meta": {
            "kind": "string",
            "maxLength": 128
          }
        },
        {
          "name": "description",
          "type": "string",
          "childRelationshipType": "",
          "parentRelationshipType": "",
          "datatype": "TEXT",
          "primaryKey": false,
          "required": false,
          "description": "Detailed description explaining the purpose, usage, and business context of this attribute rule set. May include formatting guidelines and data governance notes.",
          "defaultvalue": "",
          "example": "ISO 3166 country codes and names for international address validation",
          "autoIncrement": false,
          "array": false,
          "isPII": "",
          "secret": false,
          "route": "",
          "create": true,
          "update": true,
          "get": true,
          "list": true,
          "parentRelationship": "",
          "childRelationship": "",
          "meta": {
            "kind": "string",
            "maxLength": 65535
          }
        },
        {
          "name": "enabled",
          "type": "boolean",
          "childRelationshipType": "",
          "parentRelationshipType": "",
          "datatype": "BOOLEAN",
          "primaryKey": false,
          "required": false,
          "description": "Controls whether this attribute rule set is active and available for use. When disabled, the rule set and its associated attribute rules are hidden from validation interfaces.",
          "defaultvalue": "",
          "example": "true",
          "autoIncrement": false,
          "array": false,
          "isPII": "",
          "secret": false,
          "route": "",
          "create": true,
          "update": true,
          "get": true,
          "list": true,
          "parentRelationship": "",
          "childRelationship": "",
          "meta": {
            "kind": "boolean"
          }
        },
        {
          "name": "attributes",
          "type": "Record<string, unknown>",
          "childRelationshipType": "",
          "parentRelationshipType": "AttributeRule",
          "datatype": "JSON",
          "primaryKey": false,
          "required": false,
          "description": "JSON object containing the collection of attribute rules that belong to this rule set. Each rule defines validation constraints, types, and behavior for specific attributes.",
          "defaultvalue": "",
          "example": "{\"tenant\": \"default\", \"rule_id\": \"email_validation\"}",
          "autoIncrement": false,
          "array": false,
          "isPII": "",
          "secret": false,
          "route": "",
          "create": true,
          "update": true,
          "get": true,
          "list": true,
          "relationship": "object",
          "parentRelationship": "attribute_rule_attribute_rule_set",
          "childRelationship": "",
          "meta": {
            "kind": "json",
            "jsonShape": "object"
          }
        }
      ],
      "relationships": [
        {
          "name": "attribute_rule_attribute_rule_set",
          "parentTable": "attribute_rule",
          "parentColumn": {
            "name": "id",
            "type": "Record<string, unknown>",
            "childRelationshipType": "AttributeRuleSet",
            "parentRelationshipType": "",
            "datatype": "JSON",
            "primaryKey": true,
            "required": true,
            "description": "Primary key as JSON object containing composite identifier. Typically includes tenant context and unique rule identifier for multi-tenant attribute rule management.",
            "defaultvalue": "",
            "example": "{\"tenant\": \"default\", \"rule_id\": \"email_validation\"}",
            "autoIncrement": false,
            "array": false,
            "isPII": "",
            "secret": false,
            "route": "",
            "create": true,
            "update": true,
            "get": true,
            "list": true,
            "relationship": "object",
            "parentRelationship": "",
            "childRelationship": "attribute_rule_attribute_rule_set",
            "meta": {
              "kind": "json",
              "jsonShape": "object"
            }
          },
          "childTable": "attribute_rule_set",
          "childColumn": {
            "name": "attributes",
            "type": "Record<string, unknown>",
            "childRelationshipType": "",
            "parentRelationshipType": "AttributeRule",
            "datatype": "JSON",
            "primaryKey": false,
            "required": false,
            "description": "JSON object containing the collection of attribute rules that belong to this rule set. Each rule defines validation constraints, types, and behavior for specific attributes.",
            "defaultvalue": "",
            "example": "{\"tenant\": \"default\", \"rule_id\": \"email_validation\"}",
            "autoIncrement": false,
            "array": false,
            "isPII": "",
            "secret": false,
            "route": "",
            "create": true,
            "update": true,
            "get": true,
            "list": true,
            "relationship": "object",
            "parentRelationship": "attribute_rule_attribute_rule_set",
            "childRelationship": "",
            "meta": {
              "kind": "json",
              "jsonShape": "object"
            }
          },
          "type": "object",
          "complex": true
        }
      ],
      "lines": [],
      "keys": [
        {
          "name": "code",
          "type": "string",
          "childRelationshipType": "",
          "parentRelationshipType": "",
          "datatype": "VARCHAR",
          "primaryKey": true,
          "required": true,
          "description": "Primary key and unique identifier for the attribute rule set. Defines the category or classification that groups related attribute rules together.",
          "defaultvalue": "",
          "example": "COUNTRY",
          "autoIncrement": false,
          "maxLength": "64",
          "array": false,
          "isPII": "",
          "secret": false,
          "route": "",
          "create": true,
          "update": true,
          "get": true,
          "list": true,
          "parentRelationship": "",
          "childRelationship": "",
          "meta": {
            "kind": "string",
            "maxLength": 64
          }
        }
      ],
      "indexes": [
        {
          "name": "code",
          "type": "string",
          "childRelationshipType": "",
          "parentRelationshipType": "",
          "datatype": "VARCHAR",
          "primaryKey": true,
          "required": true,
          "description": "Primary key and unique identifier for the attribute rule set. Defines the category or classification that groups related attribute rules together.",
          "defaultvalue": "",
          "example": "COUNTRY",
          "autoIncrement": false,
          "maxLength": "64",
          "array": false,
          "isPII": "",
          "secret": false,
          "route": "",
          "create": true,
          "update": true,
          "get": true,
          "list": true,
          "parentRelationship": "",
          "childRelationship": "",
          "meta": {
            "kind": "string",
            "maxLength": 64
          }
        },
        {
          "name": "name",
          "type": "string",
          "childRelationshipType": "",
          "parentRelationshipType": "",
          "datatype": "VARCHAR",
          "primaryKey": false,
          "required": true,
          "description": "Human-readable display name for the attribute rule set. Used in administrative interfaces and documentation to describe the purpose of this rule set category.",
          "defaultvalue": "",
          "example": "Countries",
          "autoIncrement": false,
          "maxLength": "128",
          "array": false,
          "isPII": "",
          "secret": false,
          "route": "",
          "create": true,
          "update": true,
          "get": true,
          "list": true,
          "parentRelationship": "",
          "childRelationship": "",
          "meta": {
            "kind": "string",
            "maxLength": 128
          }
        }
      ],
      "docs": {
        "name": "Attribute_rule_set",
        "summary": "Configuration for attribute_rule_set table",
        "version": "1.0.0"
      },
      "apis": {},
      "store": {
        "read": "redis",
        "write": "kurrentdb",
        "query": "redis",
        "projector": "redis"
      },
      "options": {
        "command": true,
        "create": true,
        "update": true,
        "read": "redis",
        "write": "kurrentdb",
        "query": "redis",
        "projector": "redis",
        "queue": false,
        "softDelete": true,
        "timestamps": true,
        "versioning": true,
        "logging": true,
        "auditing": true,
        "caching": true,
        "eventStreaming": false
      },
      "cancel": {
        "create": false,
        "update": false,
        "delete": false,
        "batch": false,
        "get": false
      },
      "redis": {
        "prefix": "",
        "version": "1.0",
        "category": "core:attributes.attribute.rule.set.v1",
        "ttl": 3600,
        "hash": true,
        "aggregate": "attribute_rule_set"
      },
      "eventstream": {
        "boundedContext": "core",
        "aggregate": "attribute_rule_set",
        "version": "v1",
        "stream": "core.attributes.attributeRuleSet",
        "createdEvent": "CoreAttributesAttributeRuleSetCreated.v1",
        "updatedEvent": "CoreAttributesAttributeRuleSetUpdated.v1",
        "deletedEvent": "CoreAttributesAttributeRuleSetDeleted.v1"
      },
      "permissions": {
        "bulk": [
          "update",
          "delete",
          "import"
        ],
        "adminOverride": true,
        "auditView": true,
        "custom": []
      },
      "domainName": "",
      "parentPath": []
    }
  ],
  "relationships": [
    {
      "name": "attribute_rule_attribute_rule_set",
      "parentTable": "attribute_rule",
      "parentColumn": {
        "name": "id",
        "type": "Record<string, unknown>",
        "childRelationshipType": "AttributeRuleSet",
        "parentRelationshipType": "",
        "datatype": "JSON",
        "primaryKey": true,
        "required": true,
        "description": "Primary key as JSON object containing composite identifier. Typically includes tenant context and unique rule identifier for multi-tenant attribute rule management.",
        "defaultvalue": "",
        "example": "{\"tenant\": \"default\", \"rule_id\": \"email_validation\"}",
        "autoIncrement": false,
        "array": false,
        "isPII": "",
        "secret": false,
        "route": "",
        "create": true,
        "update": true,
        "get": true,
        "list": true,
        "relationship": "object",
        "parentRelationship": "",
        "childRelationship": "attribute_rule_attribute_rule_set",
        "meta": {
          "kind": "json",
          "jsonShape": "object"
        }
      },
      "childTable": "attribute_rule_set",
      "childColumn": {
        "name": "attributes",
        "type": "Record<string, unknown>",
        "childRelationshipType": "",
        "parentRelationshipType": "AttributeRule",
        "datatype": "JSON",
        "primaryKey": false,
        "required": false,
        "description": "JSON object containing the collection of attribute rules that belong to this rule set. Each rule defines validation constraints, types, and behavior for specific attributes.",
        "defaultvalue": "",
        "example": "{\"tenant\": \"default\", \"rule_id\": \"email_validation\"}",
        "autoIncrement": false,
        "array": false,
        "isPII": "",
        "secret": false,
        "route": "",
        "create": true,
        "update": true,
        "get": true,
        "list": true,
        "relationship": "object",
        "parentRelationship": "attribute_rule_attribute_rule_set",
        "childRelationship": "",
        "meta": {
          "kind": "json",
          "jsonShape": "object"
        }
      },
      "type": "object",
      "complex": true
    }
  ],
  "documentation": {
    "name": "Attribute rule set management",
    "description": "# ðŸ“˜ Attribute Rule Set Service â€” Detailed Description\n\n## 1. Purpose and Overview\n\nThe **Attribute Rule Set Service** is a foundational microservice responsible for defining, governing, and exposing **reusable sets of attribute rules** that can be applied across multiple domains. Instead of each bounded context inventing its own way of describing dynamic fields, this service provides a **central catalog of rule sets** that describe *how attributes should behave* (type, constraints, validation messages, etc.).\n\nWhere other services manage concrete entities (Lookup, Person, Company, Customer, Supplier, Employer, etc.), the Attribute Rule Set Service manages **metadata about attributes**:\n\n* What fields exist (by code and name)\n* What type each field is (string, boolean, integer, currency, date, datetime, other)\n* Which fields are required or unique\n* Which fields must match a regex pattern\n* Which fields are reserved or used as references\n\nBy centralizing attribute rule sets, the service ensures that all domains implement their dynamic attributes **consistently and with shared validation logic**.\n\n---\n\n## 2. Core Responsibilities\n\n### 2.1 Attribute Rule Set Management\n\n* Define reusable **attribute rule sets**, each identified by a unique `code`.\n* Each rule set contains a **map of attribute rules**, keyed by attribute code.\n* Manage lifecycle operations:\n\n  * Create, update, enable/disable, and (soft) delete rule sets.\n* Support per-tenant customization of rule sets where needed.\n\n### 2.2 Attribute Rule Definition\n\nFor each attribute in a rule set, the service defines:\n\n* **Identity & description**\n\n  * `code` â€” technical identifier for the attribute (e.g. `email`, `risk_level`).\n  * `name` â€” user-facing label (e.g. \"Email\", \"Risk Level\").\n  * `description` â€” human-readable explanation and business context.\n\n* **Type & behavior**\n\n  * `type` â€” one of `string | boolean | integer | currency | date | datetime | other`.\n  * `reference` â€” whether this field is a reference/search key.\n  * `reserved` â€” protects attributes that must not be removed or radically changed.\n\n* **Validation rules**\n\n  * `required` â€” whether the field must always be present.\n  * `requiredError` â€” error message shown when required validation fails.\n  * `unique` â€” whether the field must be unique in its scope.\n  * `uniqueError` â€” error message when uniqueness is violated.\n  * `regex` â€” optional pattern for format validation.\n  * `regexError` â€” error message when the value doesn't match the pattern.\n\nThese rules are **pure metadata**; the actual data (lookup entities, people, companies, etc.) lives in other services.\n\n### 2.3 Validation-as-a-Service (via metadata)\n\nThe Attribute Rule Set Service itself does not validate entity payloads directly; instead, it provides:\n\n* A **canonical description** of attribute rules.\n* A contract that other services use to validate their own dynamic attributes.\n\nOther microservices can:\n\n* Query an attribute rule set by `code`.\n* Retrieve all rules for a given set.\n* Use those rules to perform client-side or server-side validation.\n\nThis turns validation into a **shared capability**, while keeping entity-specific logic in the owning bounded context.\n\n### 2.4 Multi-Domain Reuse\n\nAny domain that manages entities with flexible attributes can **bind to one or more attribute rule sets**, for example:\n\n* **Lookup** entries using rule sets like `COUNTRY_ATTRIBUTES`, `ACCOUNT_STATUS_ATTRIBUTES`.\n* **Person** domain using rule sets like `PERSON_PROFILE_ATTRIBUTES`.\n* **Customer** domain using rule sets like `CUSTOMER_CLASSIFICATION_ATTRIBUTES`.\n\nThis eliminates duplicated schema logic and promotes governance: rule sets are changed once and reflected everywhere they are used.\n\n---\n\n## 3. Domain Model\n\n### 3.1 AttributeRuleSet Aggregate\n\n**Purpose:** Represents a named collection of attribute rules.\n\n**Attributes:**\n\n* `code` â€” Unique technical identifier for the rule set (immutable), e.g. `PERSON_PROFILE_ATTRIBUTES`.\n* `name` â€” Human-readable label, e.g. \"Person Profile Attributes\".\n* `description` â€” Optional detailed explanation and business context.\n* `enabled` â€” Whether this rule set is active and should be used by consuming services.\n* `rules` â€” A map of `AttributeRule` value objects keyed by attribute code.\n\n**Responsibilities:**\n\n* Create, update, and deactivate rule sets.\n* Add, update, and remove individual attribute rules.\n* Enforce invariants between rules (no duplicate codes, reserved rules protected, valid types and regex patterns, etc.).\n\n**Example Structure:**\n\n```json\n{\n  \"code\": \"CUSTOMER_CLASSIFICATION_ATTRIBUTES\",\n  \"name\": \"Customer Classification Attributes\",\n  \"rules\": {\n    \"riskLevel\": {\n      \"type\": \"string\",\n      \"required\": true\n    },\n    \"creditScore\": {\n      \"type\": \"integer\",\n      \"required\": false\n    }\n  }\n}\n```\n\n**Domain Events (examples):**\n\n* `AttributeRuleSetCreated`\n* `AttributeRuleSetUpdated`\n* `AttributeRuleSetEnabled`\n* `AttributeRuleSetDisabled`\n* `AttributeRuleAdded`\n* `AttributeRuleUpdated`\n* `AttributeRuleRemoved`\n\n### 3.2 AttributeRule Value Object\n\n**Purpose:** Describes the behavior and constraints of a single attribute field inside a rule set.\n\n**Attributes:**\n\n* `code` â€” Unique code of the attribute within the rule set.\n* `name` â€” Human-readable label.\n* `description` â€” What the attribute represents and how it's used.\n* `type` â€” Data type (`string`, `integer`, `boolean`, `currency`, `date`, `datetime`, `other`).\n* `required` â€” Whether this attribute must always be present when the rule set is applied.\n* `unique` â€” Whether the attribute value must be unique in the scope defined by the consuming service.\n* `regex` â€” Optional pattern to validate the data format.\n* `reference` â€” Whether this attribute can be used as a reference/search key.\n* `reserved` â€” Whether this attribute is protected from deletion or incompatible changes.\n* `requiredError`, `uniqueError`, `regexError` â€” User-facing error messages for validation failures.\n\n**Validation Behavior (as metadata):**\n\n* Defines which attributes are mandatory.\n* Defines uniqueness and format rules.\n* Supplies message templates that consuming services can reuse when returning errors.\n\n---\n\n## 4. Integration and Implementation Model\n\n### 4.1 API Integration\n\nOther domains use the Attribute Rule Set Service via REST or internal service calls, typically:\n\n#### Query APIs\n\n* `GET /api/v1/attribute-rule-sets` â€” List available rule sets.\n* `GET /api/v1/attribute-rule-sets/{code}` â€” Retrieve a specific rule set with all attribute rules.\n\n#### Command APIs\n\n* `POST /api/v1/attribute-rule-sets` â€” Create a new rule set.\n* `PUT /api/v1/attribute-rule-sets/{code}` â€” Replace an existing rule set definition (full update), or\n* `PATCH /api/v1/attribute-rule-sets/{code}` â€” Apply partial changes (if supported).\n\nEach domain can cache or project rule sets locally for fast runtime validation.\n\n### 4.2 Domain Integration Pattern\n\nEach bounded context that supports dynamic attributes (Person, Company, Lookup, etc.) typically implements an **AttributeRuleSetAdapter** or **AttributeRuleValidator**:\n\n1. On entity create/update, the service determines which rule set(s) apply to the entity.\n2. It loads the attribute rule set definition (from a local projection or via the Attribute Rule Set Service API).\n3. The validator applies type, required, unique, and regex rules to the entity's attribute payload.\n4. If validation passes, the entity is persisted and events are emitted.\n5. If validation fails, domain-specific validation errors are produced using the error messages defined in the rule set.\n\n### 4.3 Event-Driven Synchronization\n\n* Attribute rule sets and their rules are stored as events (e.g. in EventStoreDB) and exposed via read models.\n* Changes to rule sets are published as **domain events**.\n* Consuming services subscribe to these events and update their local projections or caches, so validation rules stay in sync without tight coupling.\n\n---\n\n## 5. Architectural Role\n\n### 5.1 Shared Governance Layer\n\n* Acts as a **single point of truth** for attribute rule sets across the platform.\n* Prevents each service from recreating similar validation logic.\n* Provides auditability: every rule set change is recorded as a domain event.\n\n### 5.2 Enabler for Dynamic Schemas\n\nBy decoupling attribute rules from persistence schemas:\n\n* Entities can gain new attributes without database migrations.\n* Front-end forms (e.g. FEML-driven UIs) can render fields and validation dynamically based on a rule set.\n* Admin tools can allow configuration of which rule sets apply to which entity types.\n\n### 5.3 Multi-Tenant Support\n\nEach `AttributeRuleSet` can be **scoped per tenant**, enabling custom metadata per tenant or organization.\n\nKey identifier pattern (example):\n\n```text\ncore-attributes:v1:{tenant}:rule-set:{ruleSetCode}\ncore-attributes:v1:{tenant}:rule:{ruleSetCode}:{attributeCode}\n```\n\n---\n\n## 6. Example Use Cases\n\n### 6.1 Lookup Domain\n\nDefine a rule set for account status metadata:\n\n```json\n{\n  \"code\": \"ACCOUNT_STATUS_ATTRIBUTES\",\n  \"name\": \"Account Status Attributes\",\n  \"rules\": {\n    \"category\": { \"type\": \"string\", \"required\": true },\n    \"terminal\": { \"type\": \"boolean\", \"required\": true }\n  }\n}\n```\n\nThe Lookup service applies this rule set to all lookup entries of type `ACCOUNT_STATUS` when validating their `attributes` payload.\n\n### 6.2 Person Domain\n\nDefine a rule set for optional profile attributes:\n\n```json\n{\n  \"code\": \"PERSON_PROFILE_ATTRIBUTES\",\n  \"name\": \"Person Profile Attributes\",\n  \"rules\": {\n    \"maritalStatus\": { \"type\": \"string\" },\n    \"employmentType\": { \"type\": \"string\" }\n  }\n}\n```\n\nThe Person service uses this rule set to validate additional profile data stored in a flexible `attributes` structure.\n\n### 6.3 Customer Domain\n\nDefine a rule set for customer classification:\n\n```json\n{\n  \"code\": \"CUSTOMER_CLASSIFICATION_ATTRIBUTES\",\n  \"name\": \"Customer Classification Attributes\",\n  \"rules\": {\n    \"riskLevel\": { \"type\": \"string\", \"required\": true },\n    \"creditScore\": { \"type\": \"integer\" }\n  }\n}\n```\n\nThe Customer service uses this to validate classification metadata and enforce that `riskLevel` is always present.\n\n---\n\n## 7. Benefits\n\n* **Centralized validation and governance** for all dynamic attributes.\n* **Reduced coupling** â€” domains depend on rule sets, not hard-coded schemas.\n* **Dynamic extensibility** â€” adding new attributes is a configuration change, not a migration.\n* **Auditability** â€” every rule set and rule change is captured as an event.\n* **Front-end flexibility** â€” UIs can render fields and validation dynamically from rule sets.\n\n---\n\n## 8. Summary\n\nThe **Attribute Rule Set Service** provides an event-driven, tenant-aware framework for defining and managing attribute rule sets across the platform. It acts as the **metadata backbone** for any domain requiring dynamic, extensible, and validated attributes.\n\nBy consolidating attribute rules into shared, reusable rule sets, it transforms attribute handling from ad-hoc, per-service logic into a governed, composable capability â€” improving consistency, adaptability, and developer productivity across the ecosystem.\n"
  }
}