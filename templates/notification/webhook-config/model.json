{
  "service": {
    "name": "notification-webhook-config",
    "boundedContext": "notification",
    "application": "webhook-config",
    "moduleName": "notification.slack",
    "version": "1",
    "hasRedis": true,
    "hasSql": true,
    "hasEventStream": true
  },
  "tables": [
    {
      "name": "webhook",
      "description": "## üß† SlackWorkspace\n\n### **Purpose**\n\nThe \\`SlackWorkspace\\` aggregate represents the tenant‚Äôs connection to their Slack workspace. It acts as the foundational configuration point that defines the link between the system and the tenant‚Äôs Slack organization.\n\nThis aggregate holds sensitive integration credentials ‚Äî including OAuth tokens, signing secrets, and app identifiers ‚Äî and ensures they are securely managed and rotated when necessary. It also tracks which workspace belongs to which tenant and whether the connection is currently active.\n\n### **Responsibilities**\n\n* Maintain the tenant-to-Slack workspace mapping.\n* Securely store and reference OAuth credentials (e.g., \\`botToken\\`, \\`signingSecret\\`).\n* Enable or disable the Slack integration per tenant.\n* Manage the default posting channel for system notifications.\n* Emit events that notify other services when configuration changes occur.\n\n### **Why It Matters**\n\nWithout the \\`SlackWorkspace\\` aggregate, the platform wouldn‚Äôt know **where** to send Slack messages or which tokens to use for authentication. It ensures tenant isolation and provides a secure boundary for Slack API interactions.\n",
      "columns": [
        {
          "name": "id",
          "type": "string",
          "childRelationshipType": "Config",
          "parentRelationshipType": "",
          "datatype": "VARCHAR",
          "primaryKey": true,
          "required": true,
          "description": "Unique identifier for the Slack workspace/team, provided by Slack API during OAuth installation. This is the primary key linking all workspace-specific configurations.",
          "defaultvalue": "",
          "example": "T01EXAMPLE123",
          "autoIncrement": false,
          "maxLength": "32",
          "minLength": "10",
          "array": false,
          "isPII": "",
          "create": true,
          "update": true,
          "get": true,
          "list": true,
          "parentRelationship": "",
          "childRelationship": "workspace_app_config",
          "meta": {
            "kind": "string",
            "minLength": 10,
            "maxLength": 32
          }
        },
        {
          "name": "name",
          "type": "string",
          "childRelationshipType": "",
          "parentRelationshipType": "",
          "datatype": "VARCHAR",
          "primaryKey": false,
          "required": true,
          "description": "Human-readable display name of the Slack workspace as configured by workspace administrators. Used for identification and logging purposes.",
          "defaultvalue": "",
          "example": "Acme Corp Engineering",
          "autoIncrement": false,
          "maxLength": "255",
          "array": false,
          "isPII": "",
          "create": true,
          "update": true,
          "get": true,
          "list": true,
          "parentRelationship": "",
          "childRelationship": "",
          "meta": {
            "kind": "string",
            "maxLength": 255
          }
        },
        {
          "name": "description",
          "type": "string",
          "childRelationshipType": "",
          "parentRelationshipType": "",
          "datatype": "TEXT",
          "primaryKey": false,
          "required": false,
          "description": "",
          "defaultvalue": "",
          "example": "",
          "autoIncrement": false,
          "array": false,
          "isPII": "",
          "create": true,
          "update": true,
          "get": true,
          "list": true,
          "parentRelationship": "",
          "childRelationship": "",
          "meta": {
            "kind": "string",
            "maxLength": 65535
          }
        },
        {
          "name": "targetUrl",
          "type": "string",
          "childRelationshipType": "",
          "parentRelationshipType": "",
          "datatype": "TEXT",
          "primaryKey": false,
          "required": false,
          "description": "OAuth bot token with scope permissions for posting messages, reading channels, and accessing workspace information. Encrypted at rest using AES-256 encryption for security compliance.",
          "defaultvalue": "",
          "example": "xoxb-EXAMPLE-EXAMPLE-EXAMPLETOKEN123456",
          "autoIncrement": false,
          "array": false,
          "isPII": "",
          "create": true,
          "update": true,
          "get": true,
          "list": true,
          "parentRelationship": "",
          "childRelationship": "",
          "meta": {
            "kind": "string",
            "maxLength": 65535
          }
        },
        {
          "name": "eventType",
          "type": "string",
          "childRelationshipType": "",
          "parentRelationshipType": "",
          "datatype": "TEXT",
          "primaryKey": false,
          "required": false,
          "description": "Slack application signing secret used to verify that incoming requests are genuinely from Slack. Required for webhook authentication and security validation. Encrypted using the same key as bot_token.",
          "defaultvalue": "",
          "example": "example_signing_secret_not_real_123",
          "autoIncrement": false,
          "array": false,
          "isPII": "",
          "create": true,
          "update": true,
          "get": true,
          "list": true,
          "parentRelationship": "",
          "childRelationship": "",
          "meta": {
            "kind": "string",
            "maxLength": 65535
          }
        },
        {
          "name": "method",
          "type": "WebhookMethodEnum",
          "childRelationshipType": "",
          "parentRelationshipType": "",
          "datatype": "ENUM",
          "primaryKey": false,
          "required": false,
          "description": "Unique identifier for the Slack application as registered in the Slack App Directory. Used for app-specific API calls and identifying the source of bot interactions.",
          "defaultvalue": "",
          "example": "",
          "autoIncrement": false,
          "enum": [
            {
              "key": "post"
            },
            {
              "key": "put"
            }
          ],
          "maxLength": "64",
          "array": false,
          "isPII": "",
          "create": true,
          "update": true,
          "get": true,
          "list": true,
          "parentRelationship": "",
          "childRelationship": "",
          "meta": {
            "kind": "enum",
            "enumValues": [
              "post",
              "put"
            ],
            "enumName": "method"
          }
        },
        {
          "name": "headers",
          "type": "Record<string, unknown>",
          "childRelationshipType": "",
          "parentRelationshipType": "",
          "datatype": "JSON",
          "primaryKey": false,
          "required": false,
          "description": "Unique user identifier for the bot within the workspace. Used to identify bot messages and prevent the bot from responding to its own messages in conversations.",
          "defaultvalue": "",
          "example": "",
          "autoIncrement": false,
          "array": false,
          "isPII": "",
          "create": true,
          "update": true,
          "get": true,
          "list": true,
          "parentRelationship": "",
          "childRelationship": "",
          "meta": {
            "kind": "json",
            "jsonShape": "object"
          }
        },
        {
          "name": "signingSecret",
          "type": "string",
          "childRelationshipType": "",
          "parentRelationshipType": "",
          "datatype": "VARCHAR",
          "primaryKey": false,
          "required": false,
          "description": "Fallback channel ID for notifications when no specific channel is configured or available. Must be a channel where the bot has posting permissions.",
          "defaultvalue": "",
          "example": "",
          "autoIncrement": false,
          "maxLength": "64",
          "array": false,
          "isPII": "",
          "create": true,
          "update": true,
          "get": true,
          "list": true,
          "parentRelationship": "",
          "childRelationship": "",
          "meta": {
            "kind": "string",
            "maxLength": 64
          }
        },
        {
          "name": "status",
          "type": "WebhookStatusEnum",
          "childRelationshipType": "",
          "parentRelationshipType": "",
          "datatype": "ENUM",
          "primaryKey": false,
          "required": true,
          "description": "Global toggle for Slack integration functionality. When false, all notifications to this workspace are disabled, useful for maintenance or temporary suspension.",
          "defaultvalue": "",
          "example": "",
          "autoIncrement": false,
          "enum": [
            {
              "key": "active"
            },
            {
              "key": "paused"
            },
            {
              "key": "disabled"
            }
          ],
          "array": false,
          "isPII": "",
          "create": true,
          "update": true,
          "get": true,
          "list": true,
          "parentRelationship": "",
          "childRelationship": "",
          "meta": {
            "kind": "enum",
            "enumValues": [
              "active",
              "paused",
              "disabled"
            ],
            "enumName": "status"
          }
        }
      ],
      "relationships": [
        {
          "name": "workspace_app_config",
          "parentTable": "webhook",
          "parentColumn": {
            "name": "id",
            "type": "string",
            "childRelationshipType": "Config",
            "parentRelationshipType": "",
            "datatype": "VARCHAR",
            "primaryKey": true,
            "required": true,
            "description": "Unique identifier for the Slack workspace/team, provided by Slack API during OAuth installation. This is the primary key linking all workspace-specific configurations.",
            "defaultvalue": "",
            "example": "T01EXAMPLE123",
            "autoIncrement": false,
            "maxLength": "32",
            "minLength": "10",
            "array": false,
            "isPII": "",
            "create": true,
            "update": true,
            "get": true,
            "list": true,
            "parentRelationship": "",
            "childRelationship": "workspace_app_config",
            "meta": {
              "kind": "string",
              "minLength": 10,
              "maxLength": 32
            }
          },
          "childTable": "config",
          "childColumn": {
            "name": "webhook_id",
            "type": "string",
            "childRelationshipType": "",
            "parentRelationshipType": "Webhook",
            "datatype": "VARCHAR",
            "primaryKey": true,
            "required": true,
            "description": "Foreign key reference to the workspace these operational settings apply to. Allows per-workspace customization of retry logic and behavior.",
            "defaultvalue": "",
            "example": "T01EXAMPLE123",
            "autoIncrement": false,
            "maxLength": "32",
            "array": false,
            "isPII": "",
            "create": true,
            "update": true,
            "get": true,
            "list": true,
            "relationship": "one",
            "parentRelationship": "workspace_app_config",
            "childRelationship": "",
            "meta": {
              "kind": "string",
              "maxLength": 32
            }
          },
          "type": "one",
          "complex": true
        }
      ],
      "lines": [],
      "keys": [
        {
          "name": "id",
          "type": "string",
          "childRelationshipType": "Config",
          "parentRelationshipType": "",
          "datatype": "VARCHAR",
          "primaryKey": true,
          "required": true,
          "description": "Unique identifier for the Slack workspace/team, provided by Slack API during OAuth installation. This is the primary key linking all workspace-specific configurations.",
          "defaultvalue": "",
          "example": "T01EXAMPLE123",
          "autoIncrement": false,
          "maxLength": "32",
          "minLength": "10",
          "array": false,
          "isPII": "",
          "create": true,
          "update": true,
          "get": true,
          "list": true,
          "parentRelationship": "",
          "childRelationship": "workspace_app_config",
          "meta": {
            "kind": "string",
            "minLength": 10,
            "maxLength": 32
          }
        }
      ],
      "indexes": [
        {
          "name": "id",
          "type": "string",
          "childRelationshipType": "Config",
          "parentRelationshipType": "",
          "datatype": "VARCHAR",
          "primaryKey": true,
          "required": true,
          "description": "Unique identifier for the Slack workspace/team, provided by Slack API during OAuth installation. This is the primary key linking all workspace-specific configurations.",
          "defaultvalue": "",
          "example": "T01EXAMPLE123",
          "autoIncrement": false,
          "maxLength": "32",
          "minLength": "10",
          "array": false,
          "isPII": "",
          "create": true,
          "update": true,
          "get": true,
          "list": true,
          "parentRelationship": "",
          "childRelationship": "workspace_app_config",
          "meta": {
            "kind": "string",
            "minLength": 10,
            "maxLength": 32
          }
        },
        {
          "name": "name",
          "type": "string",
          "childRelationshipType": "",
          "parentRelationshipType": "",
          "datatype": "VARCHAR",
          "primaryKey": false,
          "required": true,
          "description": "Human-readable display name of the Slack workspace as configured by workspace administrators. Used for identification and logging purposes.",
          "defaultvalue": "",
          "example": "Acme Corp Engineering",
          "autoIncrement": false,
          "maxLength": "255",
          "array": false,
          "isPII": "",
          "create": true,
          "update": true,
          "get": true,
          "list": true,
          "parentRelationship": "",
          "childRelationship": "",
          "meta": {
            "kind": "string",
            "maxLength": 255
          }
        }
      ],
      "docs": {
        "name": "Webhook",
        "summary": "Configuration for webhook table",
        "version": "1.0.0"
      },
      "apis": {},
      "store": {
        "read": "redis",
        "write": "kurrentdb",
        "query": "redis",
        "projector": "redis"
      },
      "options": {
        "command": true,
        "create": true,
        "update": true,
        "read": "redis",
        "write": "kurrentdb",
        "query": "redis",
        "projector": "redis",
        "queue": false,
        "softDelete": false,
        "timestamps": true,
        "versioning": true,
        "logging": true,
        "auditing": true,
        "caching": true,
        "eventStreaming": false
      },
      "cancel": {
        "create": false,
        "update": false,
        "delete": false,
        "batch": false,
        "get": false
      },
      "redis": {
        "prefix": "",
        "version": "1.0",
        "category": "notification:webhook-config.webhook.v1",
        "ttl": 3600,
        "hash": true,
        "aggregate": "webhook"
      },
      "eventstream": {
        "boundedContext": "notification",
        "aggregate": "webhook",
        "version": "v1",
        "stream": "notification.webhookConfig.webhook",
        "createdEvent": "NotificationWebhookConfigWebhookCreated.v1",
        "updatedEvent": "NotificationWebhookConfigWebhookUpdated.v1",
        "deletedEvent": "NotificationWebhookConfigWebhookDeleted.v1"
      },
      "permissions": {
        "bulk": [
          "update",
          "delete",
          "import"
        ],
        "adminOverride": true,
        "auditView": true,
        "custom": []
      },
      "domainName": "",
      "parentPath": []
    },
    {
      "name": "config",
      "description": "## ‚öôÔ∏è SlackAppConfig\n\n### **Purpose**\n\nThe \\`SlackAppConfig\\` aggregate manages system-wide operational parameters for the Slack integration within a tenant‚Äôs workspace. It defines how the app behaves under various runtime conditions, such as retries, logging, and audit behavior.\n\nThis configuration ensures that message delivery is resilient and aligned with organizational policies (e.g., how many times to retry sending, whether to log every event, which audit channel to use, etc.).\n\n### **Responsibilities**\n\n* Manage retry and backoff policies for message delivery.\n* Enable or disable message-level logging for auditing.\n* Define the audit channel ID for operational or compliance logs.\n* Maintain default locale, metadata, and other operational flags.\n* Emit configuration change events for runtime synchronization.\n\n### **Why It Matters**\n\n\\`SlackAppConfig\\` provides the **operational backbone** for Slack messaging. It ensures reliability, compliance, and observability ‚Äî allowing organizations to manage how Slack notifications behave at scale and during failures.\n\n",
      "columns": [
        {
          "name": "webhook_id",
          "type": "string",
          "childRelationshipType": "",
          "parentRelationshipType": "Webhook",
          "datatype": "VARCHAR",
          "primaryKey": true,
          "required": true,
          "description": "Foreign key reference to the workspace these operational settings apply to. Allows per-workspace customization of retry logic and behavior.",
          "defaultvalue": "",
          "example": "T01EXAMPLE123",
          "autoIncrement": false,
          "maxLength": "32",
          "array": false,
          "isPII": "",
          "create": true,
          "update": true,
          "get": true,
          "list": true,
          "relationship": "one",
          "parentRelationship": "workspace_app_config",
          "childRelationship": "",
          "meta": {
            "kind": "string",
            "maxLength": 32
          }
        },
        {
          "name": "max_retry_attempts",
          "type": "number",
          "childRelationshipType": "",
          "parentRelationshipType": "",
          "datatype": "INT",
          "primaryKey": false,
          "required": true,
          "description": "Maximum number of retry attempts for failed message deliveries before marking as permanently failed. Higher values increase reliability but consume more resources.",
          "defaultvalue": "3",
          "example": "3",
          "autoIncrement": false,
          "array": false,
          "isPII": "",
          "create": true,
          "update": true,
          "get": true,
          "list": true,
          "parentRelationship": "",
          "childRelationship": "",
          "meta": {
            "kind": "number",
            "autoIncrement": false
          }
        },
        {
          "name": "retry_backoff_seconds",
          "type": "number",
          "childRelationshipType": "",
          "parentRelationshipType": "",
          "datatype": "INT",
          "primaryKey": false,
          "required": true,
          "description": "Initial delay in seconds between retry attempts. Actual delay may use exponential backoff strategy to avoid overwhelming Slack API rate limits.",
          "defaultvalue": "5",
          "example": "5",
          "autoIncrement": false,
          "array": false,
          "isPII": "",
          "create": true,
          "update": true,
          "get": true,
          "list": true,
          "parentRelationship": "",
          "childRelationship": "",
          "meta": {
            "kind": "number",
            "autoIncrement": false
          }
        },
        {
          "name": "default_locale",
          "type": "string",
          "childRelationshipType": "",
          "parentRelationshipType": "",
          "datatype": "VARCHAR",
          "primaryKey": false,
          "required": true,
          "description": "Default language/locale for message content when user-specific locale is not available. Follows ISO 639-1 language codes combined with ISO 3166-1 country codes.",
          "defaultvalue": "en_US",
          "example": "en_US",
          "autoIncrement": false,
          "maxLength": "16",
          "array": false,
          "isPII": "",
          "create": true,
          "update": true,
          "get": true,
          "list": true,
          "parentRelationship": "",
          "childRelationship": "",
          "meta": {
            "kind": "string",
            "maxLength": 16
          }
        },
        {
          "name": "strategy",
          "type": "ConfigStrategyEnum",
          "childRelationshipType": "",
          "parentRelationshipType": "",
          "datatype": "ENUM",
          "primaryKey": false,
          "required": true,
          "description": "",
          "defaultvalue": "exponential",
          "example": "",
          "autoIncrement": false,
          "enum": [
            {
              "key": "exponential"
            },
            {
              "key": "linear"
            }
          ],
          "array": false,
          "isPII": "",
          "create": true,
          "update": true,
          "get": true,
          "list": true,
          "parentRelationship": "",
          "childRelationship": "",
          "meta": {
            "kind": "enum",
            "enumValues": [
              "exponential",
              "linear"
            ],
            "enumName": "strategy"
          }
        },
        {
          "name": "metadata",
          "type": "Record<string, unknown>",
          "childRelationshipType": "",
          "parentRelationshipType": "",
          "datatype": "JSON",
          "primaryKey": false,
          "required": false,
          "description": "Flexible JSON object for storing additional workspace-specific configuration options, feature flags, and custom settings that don't warrant dedicated columns.",
          "defaultvalue": "",
          "example": "{\"timezone\":\"America/New_York\",\"businessHours\":{\"start\":\"09:00\",\"end\":\"17:00\"},\"features\":{\"threadedReplies\":true}}",
          "autoIncrement": false,
          "array": false,
          "isPII": "",
          "create": true,
          "update": true,
          "get": true,
          "list": true,
          "parentRelationship": "",
          "childRelationship": "",
          "meta": {
            "kind": "json",
            "jsonShape": "object"
          }
        }
      ],
      "relationships": [
        {
          "name": "workspace_app_config",
          "parentTable": "webhook",
          "parentColumn": {
            "name": "id",
            "type": "string",
            "childRelationshipType": "Config",
            "parentRelationshipType": "",
            "datatype": "VARCHAR",
            "primaryKey": true,
            "required": true,
            "description": "Unique identifier for the Slack workspace/team, provided by Slack API during OAuth installation. This is the primary key linking all workspace-specific configurations.",
            "defaultvalue": "",
            "example": "T01EXAMPLE123",
            "autoIncrement": false,
            "maxLength": "32",
            "minLength": "10",
            "array": false,
            "isPII": "",
            "create": true,
            "update": true,
            "get": true,
            "list": true,
            "parentRelationship": "",
            "childRelationship": "workspace_app_config",
            "meta": {
              "kind": "string",
              "minLength": 10,
              "maxLength": 32
            }
          },
          "childTable": "config",
          "childColumn": {
            "name": "webhook_id",
            "type": "string",
            "childRelationshipType": "",
            "parentRelationshipType": "Webhook",
            "datatype": "VARCHAR",
            "primaryKey": true,
            "required": true,
            "description": "Foreign key reference to the workspace these operational settings apply to. Allows per-workspace customization of retry logic and behavior.",
            "defaultvalue": "",
            "example": "T01EXAMPLE123",
            "autoIncrement": false,
            "maxLength": "32",
            "array": false,
            "isPII": "",
            "create": true,
            "update": true,
            "get": true,
            "list": true,
            "relationship": "one",
            "parentRelationship": "workspace_app_config",
            "childRelationship": "",
            "meta": {
              "kind": "string",
              "maxLength": 32
            }
          },
          "type": "one",
          "complex": true
        }
      ],
      "lines": [],
      "keys": [
        {
          "name": "webhook_id",
          "type": "string",
          "childRelationshipType": "",
          "parentRelationshipType": "Webhook",
          "datatype": "VARCHAR",
          "primaryKey": true,
          "required": true,
          "description": "Foreign key reference to the workspace these operational settings apply to. Allows per-workspace customization of retry logic and behavior.",
          "defaultvalue": "",
          "example": "T01EXAMPLE123",
          "autoIncrement": false,
          "maxLength": "32",
          "array": false,
          "isPII": "",
          "create": true,
          "update": true,
          "get": true,
          "list": true,
          "relationship": "one",
          "parentRelationship": "workspace_app_config",
          "childRelationship": "",
          "meta": {
            "kind": "string",
            "maxLength": 32
          }
        }
      ],
      "indexes": [],
      "docs": {
        "name": "Config",
        "summary": "Configuration for config table",
        "version": "1.0.0"
      },
      "apis": {},
      "store": {
        "read": "redis",
        "write": "kurrentdb",
        "query": "redis",
        "projector": "redis"
      },
      "options": {
        "command": true,
        "create": true,
        "update": true,
        "read": "redis",
        "write": "kurrentdb",
        "query": "redis",
        "projector": "redis",
        "queue": false,
        "softDelete": false,
        "timestamps": true,
        "versioning": true,
        "logging": true,
        "auditing": true,
        "caching": true,
        "eventStreaming": false
      },
      "cancel": {
        "create": false,
        "update": false,
        "delete": false,
        "batch": false,
        "get": false
      },
      "redis": {
        "prefix": "",
        "version": "1.0",
        "category": "notification:slack-config.config.v1",
        "ttl": 3600,
        "hash": true,
        "aggregate": "config"
      },
      "eventstream": {
        "boundedContext": "notification",
        "aggregate": "config",
        "version": "v1",
        "stream": "notification.slackConfig.config",
        "createdEvent": "NotificationSlackConfigConfigCreated.v1",
        "updatedEvent": "NotificationSlackConfigConfigUpdated.v1",
        "deletedEvent": "NotificationSlackConfigConfigDeleted.v1"
      },
      "permissions": {
        "bulk": [
          "update",
          "delete",
          "import"
        ],
        "adminOverride": true,
        "auditView": true,
        "custom": []
      },
      "domainName": "",
      "parentPath": []
    }
  ],
  "relationships": [
    {
      "name": "workspace_app_config",
      "parentTable": "webhook",
      "parentColumn": {
        "name": "id",
        "type": "string",
        "childRelationshipType": "Config",
        "parentRelationshipType": "",
        "datatype": "VARCHAR",
        "primaryKey": true,
        "required": true,
        "description": "Unique identifier for the Slack workspace/team, provided by Slack API during OAuth installation. This is the primary key linking all workspace-specific configurations.",
        "defaultvalue": "",
        "example": "T01EXAMPLE123",
        "autoIncrement": false,
        "maxLength": "32",
        "minLength": "10",
        "array": false,
        "isPII": "",
        "create": true,
        "update": true,
        "get": true,
        "list": true,
        "parentRelationship": "",
        "childRelationship": "workspace_app_config",
        "meta": {
          "kind": "string",
          "minLength": 10,
          "maxLength": 32
        }
      },
      "childTable": "config",
      "childColumn": {
        "name": "webhook_id",
        "type": "string",
        "childRelationshipType": "",
        "parentRelationshipType": "Webhook",
        "datatype": "VARCHAR",
        "primaryKey": true,
        "required": true,
        "description": "Foreign key reference to the workspace these operational settings apply to. Allows per-workspace customization of retry logic and behavior.",
        "defaultvalue": "",
        "example": "T01EXAMPLE123",
        "autoIncrement": false,
        "maxLength": "32",
        "array": false,
        "isPII": "",
        "create": true,
        "update": true,
        "get": true,
        "list": true,
        "relationship": "one",
        "parentRelationship": "workspace_app_config",
        "childRelationship": "",
        "meta": {
          "kind": "string",
          "maxLength": 32
        }
      },
      "type": "one",
      "complex": true
    }
  ],
  "documentation": {
    "name": "Core Slack Configuration",
    "description": "# üß© Core Slack Config ‚Äî General Overview\n\nThe **Core Slack Config** service is part of the broader **Notification Bounded Context**, responsible for managing all configuration aspects required to send Slack notifications within the platform. It provides the infrastructure and domain logic that connects a tenant‚Äôs Slack workspace to the notification ecosystem, ensuring secure, structured, and compliant communication between services and Slack.\n\n---\n\n## üéØ Purpose\n\nThe primary purpose of **Core Slack Config** is to manage the lifecycle of Slack-related configuration for each tenant. It defines *how*, *where*, and *under what conditions* Slack messages are sent. By maintaining configurations in a domain-driven, event-sourced model, the service guarantees auditability, tenant isolation, and consistency across all Slack-related operations.\n\n---\n\n## üß± Architectural Role\n\n**Core Slack Config** acts as the **configuration source of truth** for all Slack integrations in the system. It is not responsible for sending messages (that‚Äôs handled by the **Core Slack Execute** service), but instead manages the metadata, tokens, templates, and operational policies that determine how Slack notifications are constructed and authorized.\n\n### Key Roles:\n\n* Acts as the *control plane* for Slack notification configuration.\n* Provides secure storage and rotation for OAuth tokens and signing secrets.\n* Defines approved channels and message templates per workspace.\n* Publishes events consumed by other services (e.g., executors, auditors, or workflow engines).\n* Ensures compliance with security and audit policies via event sourcing.\n\n---\n\n## ‚öôÔ∏è Core Components\n\n| Aggregate          | Description                                                                                                           |\n| ------------------ | --------------------------------------------------------------------------------------------------------------------- |\n| **SlackWorkspace** | Represents a tenant‚Äôs Slack workspace connection, holding OAuth credentials, signing secrets, and workspace metadata. |\n| **SlackChannel**   | Defines the list of authorized channels and direct message endpoints available for message delivery.                  |\n| **SlackTemplate**  | Manages reusable message templates (text, block layouts, and variables) for structured notifications.                 |\n| **SlackAppConfig** | Contains global settings, retry/backoff parameters, logging preferences, and audit configurations.                    |\n\nEach aggregate is event-sourced and projected into Redis for fast reads. The system follows a **CQRS pattern**, separating command writes (EventStoreDB) from queries (Redis projections).\n\n---\n\n## üß© Data Flow Summary\n\n```\n[API Command] ‚Üí [Use Case] ‚Üí [ESDB Writer Repository] ‚Üí [EventStoreDB]\n       ‚Üì\n[Central Projection Service] ‚Üí [Redis Snapshot] + [Redis Query Index]\n       ‚Üì\n[Query API] ‚Üí [Consumer Services / UI]\n```\n\nThis architecture provides full event auditability in **EventStoreDB**, real-time read performance in **Redis**, and flexible event-driven synchronization via **BullMQ** projectors.\n\n---\n\n## üõ°Ô∏è Security and Compliance\n\n* **Authentication:** Managed via Keycloak (OAuth2 / OpenID Connect).\n* **Authorization:** Governed by Open Policy Agent (OPA) Rego policies.\n* **Secret Storage:** Slack tokens and signing secrets are stored securely using Doppler or another approved secret manager.\n* **Auditability:** Every configuration change emits domain events stored in EventStoreDB, ensuring immutable history and traceability.\n\n---\n\n## üöÄ Example Use Cases\n\n| Use Case                | Description                                                                                                                        |\n| ----------------------- | ---------------------------------------------------------------------------------------------------------------------------------- |\n| **Tenant Onboarding**   | When a new tenant connects their Slack workspace, `SlackWorkspaceConfigured.v1` and `SlackAppConfigUpdated.v1` events are emitted. |\n| **Channel Management**  | Admins can link or disable channels for specific event types (e.g., approvals, alerts).                                            |\n| **Template Management** | Teams can create reusable message templates with placeholders for workflow data.                                                   |\n| **Policy Updates**      | Changing retry or logging settings emits `SlackAppConfigUpdated.v1`, allowing other services to adjust behavior dynamically.       |\n\n---\n\n## ‚úÖ Benefits\n\n* **Event-Sourced Reliability:** Every change is versioned, replayable, and fully auditable.\n* **Tenant Isolation:** Each Slack workspace and channel configuration is scoped to a tenant.\n* **High Performance:** Read models are served from Redis with millisecond-level latency.\n* **Extensible Design:** Supports additional configuration layers (e.g., threads, attachments, Slack workflows) in future iterations.\n* **Integration Friendly:** Easily integrates with other notification channels (email, SMS, webhook) through consistent event naming and structure.\n\n---\n\n## üß© Summary\n\nThe **Core Slack Config** service provides the configuration backbone for all Slack-based notifications. It ensures that every message sent through Slack is:\n\n* Securely authenticated.\n* Delivered through approved channels.\n* Formatted using consistent templates.\n* Managed under auditable, tenant-aware policies.\n\nThis service is a critical component of the Notification Bounded Context, enabling robust, enterprise-grade Slack integration within a modern, event-driven architecture.\n"
  }
}