{
  "service": {
    "name": "notification-webhook-config",
    "boundedContext": "notification",
    "application": "webhook-config",
    "moduleName": "notification.slack",
    "version": "1",
    "hasRedis": true,
    "hasSql": true,
    "hasEventStream": true
  },
  "tables": [
    {
      "name": "webhook",
      "description": "# üß© Core Webhook Config ‚Äî General Overview\n\nThe **Core Webhook Config** service is part of the broader **Notification Bounded Context**, responsible for managing all configuration aspects required to send outbound webhooks within the platform. It provides the infrastructure and domain logic that connects a tenant‚Äôs webhook endpoints to the notification ecosystem, ensuring secure, structured, and compliant communication between services and external systems.\n\n---\n\n## üéØ Purpose\n\nThe primary purpose of **Core Webhook Config** is to manage the lifecycle of webhook-related configuration for each tenant. It defines *where*, *how*, and *under what conditions* webhook payloads are sent. By maintaining configurations in a domain-driven, event-sourced model, the service guarantees auditability, tenant isolation, and consistency across all webhook-related operations.\n\n---\n\n## üß± Architectural Role\n\n**Core Webhook Config** acts as the **configuration source of truth** for all webhook integrations in the system. It is not responsible for executing HTTP requests (that‚Äôs handled by the **Core Webhook Execute** service), but instead manages the metadata, headers, secrets, retry strategies, and operational policies that determine how webhooks are delivered and authorized.\n\n### Key Roles:\n\n* Acts as the *control plane* for webhook delivery configuration.\n* Provides secure storage and reference handling for signing secrets.\n* Defines approved target URLs and subscribed event types.\n* Publishes domain events consumed by other services (e.g., executors, auditors, or workflow engines).\n* Ensures compliance with audit and retry policies via event sourcing.\n\n---\n\n## ‚öôÔ∏è Core Components\n\n| Aggregate   | Description                                                                                                     |\n| ----------- | --------------------------------------------------------------------------------------------------------------- |\n| **Webhook** | Represents an outbound webhook endpoint, including target URL, subscribed event types, HTTP method, and status. |\n| **Config**  | Defines retry/backoff strategies, timeout settings, and operational parameters controlling webhook execution.   |\n\nEach aggregate is event-sourced and projected into Redis for fast reads. The system follows a **CQRS pattern**, separating command writes (EventStoreDB) from queries (Redis projections).\n\n---\n\n## üß© Data Flow Summary\n\n\\`\\`\\`\n[API Command] ‚Üí [Use Case] ‚Üí [ESDB Writer Repository] ‚Üí [EventStoreDB]\n       ‚Üì\n[Central Projection Service] ‚Üí [Redis Snapshot] + [Redis Query Index]\n       ‚Üì\n[Query API] ‚Üí [Executor / UI / Workflow Consumers]\n\\`\\`\\`\n\nThis architecture provides full event auditability in **EventStoreDB**, real-time read performance in **Redis**, and flexible event-driven synchronization via **BullMQ** projectors.\n\n---\n\n## üõ°Ô∏è Security and Compliance\n\n* **Authentication:** Managed via Keycloak (OAuth2 / OpenID Connect).\n* **Authorization:** Governed by Open Policy Agent (OPA) Rego policies.\n* **Secret Management:** Signing secrets are stored securely using Doppler or another approved secret manager.\n* **Auditability:** Every configuration change emits domain events stored in EventStoreDB, ensuring immutable history and traceability.\n\n---\n\n## üöÄ Example Use Cases\n\n| Use Case                 | Description                                                                                                         |\n| ------------------------ | ------------------------------------------------------------------------------------------------------------------- |\n| **Webhook Registration** | When a new webhook is added for a tenant, \\`WebhookRegistered.v1\\` and \\`ConfigUpdated.v1\\` events are emitted.         |\n| **Retry Policy Update**  | Admins can update retry and timeout parameters, triggering \\`ConfigUpdated.v1\\` for executor synchronization.         |\n| **Secret Rotation**      | When a signing secret is rotated, the service emits a new versioned event and updates downstream projections.       |\n| **Subscription Change**  | Tenants can modify the event types their webhook subscribes to, updating routing and executor behavior dynamically. |\n\n---\n\n## ‚úÖ Benefits\n\n* **Event-Sourced Reliability:** Every change is versioned, replayable, and fully auditable.\n* **Tenant Isolation:** Each webhook configuration is scoped to a tenant.\n* **High Performance:** Read models are served from Redis with millisecond-level latency.\n* **Extensible Design:** Supports additional delivery settings (e.g., per-event policies, delivery headers) in future iterations.\n* **Integration Friendly:** Provides consistent event naming and structure compatible with other notification channels (Slack, Email, SMS).\n\n---\n\n## üß© Summary\n\nThe **Core Webhook Config** service provides the configuration backbone for all webhook-based notifications. It ensures that every outbound webhook:\n\n* Is securely configured and authorized.\n* Uses approved and auditable endpoints.\n* Follows consistent retry and timeout policies.\n* Operates under event-sourced, tenant-aware control.\n\nThis service is a critical component of the Notification Bounded Context, enabling scalable, reliable, and compliant webhook integration within a modern, event-driven architecture.\n\n---\n\n## üîó Webhook\n\n### **Purpose**\n\nThe \\`Webhook\\` aggregate represents a webhook endpoint configuration for delivering events to external systems. It acts as the foundational configuration point that defines how, where, and under what conditions webhook notifications are sent.\n\nThis aggregate holds delivery configuration including target URLs, HTTP methods, headers, signing secrets, and operational settings. It ensures webhook deliveries are properly configured and can be managed independently.\n\n### **Responsibilities**\n\n* Define webhook endpoint details (URL, method, headers).\n* Manage webhook operational status (active, paused, disabled).\n* Store webhook-specific timeout and TLS verification settings.\n* Reference signing secrets for webhook authentication.\n* Emit events when webhook configuration changes occur.\n\n### **Why It Matters**\n\nThe \\`Webhook\\` aggregate provides the essential configuration for reliable event delivery to external systems. It ensures proper authentication, timeout handling, and operational control over webhook endpoints.\n",
      "columns": [
        {
          "name": "id",
          "type": "string",
          "childRelationshipType": "Authtype",
          "parentRelationshipType": "",
          "datatype": "VARCHAR",
          "primaryKey": true,
          "required": true,
          "description": "Unique identifier for the webhook endpoint. Auto-generated UUID that serves as the primary key for webhook configuration management.",
          "defaultvalue": "",
          "example": "",
          "autoIncrement": false,
          "maxLength": "32",
          "minLength": "10",
          "array": false,
          "isPII": "",
          "secret": false,
          "create": true,
          "update": true,
          "get": true,
          "list": true,
          "parentRelationship": "",
          "childRelationship": "webhook_config, webhook_authtype",
          "meta": {
            "kind": "string",
            "minLength": 10,
            "maxLength": 32
          }
        },
        {
          "name": "name",
          "type": "string",
          "childRelationshipType": "",
          "parentRelationshipType": "",
          "datatype": "VARCHAR",
          "primaryKey": false,
          "required": true,
          "description": "Human-readable name for the webhook endpoint. Used for identification and management purposes in admin interfaces.",
          "defaultvalue": "",
          "example": "",
          "autoIncrement": false,
          "maxLength": "255",
          "array": false,
          "isPII": "",
          "secret": false,
          "create": true,
          "update": true,
          "get": true,
          "list": true,
          "parentRelationship": "",
          "childRelationship": "",
          "meta": {
            "kind": "string",
            "maxLength": 255
          }
        },
        {
          "name": "description",
          "type": "string",
          "childRelationshipType": "",
          "parentRelationshipType": "",
          "datatype": "TEXT",
          "primaryKey": false,
          "required": false,
          "description": "Optional detailed description of the webhook's purpose, functionality, and intended use case. Helpful for documentation and team collaboration.",
          "defaultvalue": "NULL",
          "example": "",
          "autoIncrement": false,
          "array": false,
          "isPII": "",
          "secret": false,
          "create": true,
          "update": true,
          "get": true,
          "list": true,
          "parentRelationship": "",
          "childRelationship": "",
          "meta": {
            "kind": "string",
            "maxLength": 65535
          }
        },
        {
          "name": "targetUrl",
          "type": "string",
          "childRelationshipType": "",
          "parentRelationshipType": "",
          "datatype": "TEXT",
          "primaryKey": false,
          "required": true,
          "description": "The complete HTTPS/HTTP URL where webhook events will be delivered. Must be a valid, accessible endpoint that can receive POST requests.",
          "defaultvalue": "",
          "example": "",
          "autoIncrement": false,
          "array": false,
          "isPII": "",
          "secret": false,
          "create": true,
          "update": true,
          "get": true,
          "list": true,
          "parentRelationship": "",
          "childRelationship": "",
          "meta": {
            "kind": "string",
            "maxLength": 65535
          }
        },
        {
          "name": "webhookEventType",
          "type": "string",
          "childRelationshipType": "",
          "parentRelationshipType": "",
          "datatype": "VARCHAR",
          "primaryKey": false,
          "required": true,
          "description": "Specific event type this webhook subscribes to, using dot notation format (e.g., 'order.created.v1', 'user.updated.v2'). Determines which events trigger this webhook.",
          "defaultvalue": "",
          "example": "",
          "autoIncrement": false,
          "maxLength": "128",
          "array": false,
          "isPII": "",
          "secret": false,
          "create": true,
          "update": true,
          "get": true,
          "list": true,
          "parentRelationship": "",
          "childRelationship": "",
          "meta": {
            "kind": "string",
            "maxLength": 128
          }
        },
        {
          "name": "method",
          "type": "WebhookMethodEnum",
          "childRelationshipType": "",
          "parentRelationshipType": "",
          "datatype": "ENUM",
          "primaryKey": false,
          "required": true,
          "description": "HTTP method used for webhook delivery. POST is most common for event notifications, but GET/PUT/PATCH/DELETE are supported for specialized integrations.",
          "defaultvalue": "POST",
          "example": "",
          "autoIncrement": false,
          "enum": [
            {
              "key": "GET"
            },
            {
              "key": "POST"
            },
            {
              "key": "PUT"
            },
            {
              "key": "PATCH"
            }
          ],
          "maxLength": "64",
          "array": false,
          "isPII": "",
          "secret": false,
          "create": true,
          "update": true,
          "get": true,
          "list": true,
          "parentRelationship": "",
          "childRelationship": "",
          "meta": {
            "kind": "enum",
            "enumValues": [
              "GET",
              "POST",
              "PUT",
              "PATCH"
            ],
            "enumName": "method"
          }
        },
        {
          "name": "headers",
          "type": "Record<string, unknown>",
          "childRelationshipType": "",
          "parentRelationshipType": "",
          "datatype": "JSON",
          "primaryKey": false,
          "required": false,
          "description": "Custom HTTP headers to include with webhook requests as key-value pairs. Useful for authentication tokens, content types, or custom metadata.",
          "defaultvalue": "{}",
          "example": "",
          "autoIncrement": false,
          "array": false,
          "isPII": "",
          "secret": false,
          "create": true,
          "update": true,
          "get": true,
          "list": true,
          "parentRelationship": "",
          "childRelationship": "",
          "meta": {
            "kind": "json",
            "jsonShape": "object"
          }
        },
        {
          "name": "signingSecret",
          "type": "string",
          "childRelationshipType": "",
          "parentRelationshipType": "",
          "datatype": "VARCHAR",
          "primaryKey": false,
          "required": false,
          "description": "Reference or key name for the signing secret used to generate webhook signatures. Stores the secret identifier, not the actual secret value for security.",
          "defaultvalue": "NULL",
          "example": "",
          "autoIncrement": false,
          "maxLength": "128",
          "array": false,
          "isPII": "sensitive",
          "secret": false,
          "security": {
            "type": "pii",
            "classification": "sensitive"
          },
          "create": true,
          "update": true,
          "get": true,
          "list": true,
          "parentRelationship": "",
          "childRelationship": "",
          "meta": {
            "kind": "string",
            "maxLength": 128
          }
        },
        {
          "name": "status",
          "type": "WebhookStatusEnum",
          "childRelationshipType": "",
          "parentRelationshipType": "",
          "datatype": "ENUM",
          "primaryKey": false,
          "required": true,
          "description": "Current operational status of the webhook. 'active' = receiving events, 'paused' = temporarily disabled, 'disabled' = permanently inactive.",
          "defaultvalue": "active",
          "example": "",
          "autoIncrement": false,
          "enum": [
            {
              "key": "active"
            },
            {
              "key": "paused"
            },
            {
              "key": "disabled"
            }
          ],
          "array": false,
          "isPII": "",
          "secret": false,
          "create": true,
          "update": true,
          "get": true,
          "list": true,
          "parentRelationship": "",
          "childRelationship": "",
          "meta": {
            "kind": "enum",
            "enumValues": [
              "active",
              "paused",
              "disabled"
            ],
            "enumName": "status"
          }
        },
        {
          "name": "verifyTls",
          "type": "boolean",
          "childRelationshipType": "",
          "parentRelationshipType": "",
          "datatype": "BOOLEAN",
          "primaryKey": false,
          "required": false,
          "description": "Whether to verify SSL/TLS certificates when making webhook requests. Set to false only for development/testing environments with self-signed certificates.",
          "defaultvalue": "true",
          "example": "",
          "autoIncrement": false,
          "array": false,
          "isPII": "",
          "secret": false,
          "create": true,
          "update": true,
          "get": true,
          "list": true,
          "parentRelationship": "",
          "childRelationship": "",
          "meta": {
            "kind": "boolean"
          }
        },
        {
          "name": "requestTimeoutMs",
          "type": "number",
          "childRelationshipType": "",
          "parentRelationshipType": "",
          "datatype": "INT",
          "primaryKey": false,
          "required": false,
          "description": "Maximum time in milliseconds to wait for the webhook endpoint to respond before timing out. Default 10 seconds balances reliability and performance.",
          "defaultvalue": "10000",
          "example": "",
          "autoIncrement": false,
          "array": false,
          "isPII": "",
          "secret": false,
          "create": true,
          "update": true,
          "get": true,
          "list": true,
          "parentRelationship": "",
          "childRelationship": "",
          "meta": {
            "kind": "number",
            "autoIncrement": false
          }
        },
        {
          "name": "connectTimeoutMs",
          "type": "number",
          "childRelationshipType": "",
          "parentRelationshipType": "",
          "datatype": "INT",
          "primaryKey": false,
          "required": false,
          "description": "Maximum time in milliseconds to wait for establishing a connection to the webhook endpoint. Default 3 seconds for quick failure detection.",
          "defaultvalue": "3000",
          "example": "",
          "autoIncrement": false,
          "array": false,
          "isPII": "",
          "secret": false,
          "create": true,
          "update": true,
          "get": true,
          "list": true,
          "parentRelationship": "",
          "childRelationship": "",
          "meta": {
            "kind": "number",
            "autoIncrement": false
          }
        },
        {
          "name": "rateLimitPerMinute",
          "type": "number",
          "childRelationshipType": "",
          "parentRelationshipType": "",
          "datatype": "INT",
          "primaryKey": false,
          "required": false,
          "description": "Optional rate limiting for this specific webhook endpoint. Maximum number of events to send per minute. Leave empty for no per-webhook limit.",
          "defaultvalue": "NULL",
          "example": "",
          "autoIncrement": false,
          "array": false,
          "isPII": "",
          "secret": false,
          "create": true,
          "update": true,
          "get": true,
          "list": true,
          "parentRelationship": "",
          "childRelationship": "",
          "meta": {
            "kind": "number",
            "autoIncrement": false
          }
        }
      ],
      "relationships": [
        {
          "name": "webhook_config",
          "parentTable": "webhook",
          "parentColumn": {
            "name": "id",
            "type": "string",
            "childRelationshipType": "Authtype",
            "parentRelationshipType": "",
            "datatype": "VARCHAR",
            "primaryKey": true,
            "required": true,
            "description": "Unique identifier for the webhook endpoint. Auto-generated UUID that serves as the primary key for webhook configuration management.",
            "defaultvalue": "",
            "example": "",
            "autoIncrement": false,
            "maxLength": "32",
            "minLength": "10",
            "array": false,
            "isPII": "",
            "secret": false,
            "create": true,
            "update": true,
            "get": true,
            "list": true,
            "parentRelationship": "",
            "childRelationship": "webhook_config, webhook_authtype",
            "meta": {
              "kind": "string",
              "minLength": 10,
              "maxLength": 32
            }
          },
          "childTable": "config",
          "childColumn": {
            "name": "webhookId",
            "type": "string",
            "childRelationshipType": "",
            "parentRelationshipType": "Webhook",
            "datatype": "VARCHAR",
            "primaryKey": false,
            "required": false,
            "description": "Optional reference to a specific webhook for per-webhook configuration overrides. Leave empty for tenant-level or global configurations.",
            "defaultvalue": "NULL",
            "example": "",
            "autoIncrement": false,
            "maxLength": "32",
            "array": false,
            "isPII": "",
            "secret": false,
            "create": true,
            "update": true,
            "get": true,
            "list": true,
            "relationship": "one",
            "parentRelationship": "webhook_config",
            "childRelationship": "",
            "meta": {
              "kind": "string",
              "maxLength": 32
            }
          },
          "type": "one",
          "complex": true
        },
        {
          "name": "webhook_authtype",
          "parentTable": "webhook",
          "parentColumn": {
            "name": "id",
            "type": "string",
            "childRelationshipType": "Authtype",
            "parentRelationshipType": "",
            "datatype": "VARCHAR",
            "primaryKey": true,
            "required": true,
            "description": "Unique identifier for the webhook endpoint. Auto-generated UUID that serves as the primary key for webhook configuration management.",
            "defaultvalue": "",
            "example": "",
            "autoIncrement": false,
            "maxLength": "32",
            "minLength": "10",
            "array": false,
            "isPII": "",
            "secret": false,
            "create": true,
            "update": true,
            "get": true,
            "list": true,
            "parentRelationship": "",
            "childRelationship": "webhook_config, webhook_authtype",
            "meta": {
              "kind": "string",
              "minLength": 10,
              "maxLength": 32
            }
          },
          "childTable": "authtype",
          "childColumn": {
            "name": "webhook_id",
            "type": "string",
            "childRelationshipType": "",
            "parentRelationshipType": "Webhook",
            "datatype": "VARCHAR",
            "primaryKey": false,
            "required": true,
            "description": "Unique identifier for the webhook endpoint. Auto-generated UUID that serves as the primary key for webhook configuration management.",
            "defaultvalue": "",
            "example": "",
            "autoIncrement": false,
            "maxLength": "32",
            "minLength": "10",
            "array": false,
            "isPII": "",
            "secret": false,
            "create": true,
            "update": true,
            "get": true,
            "list": true,
            "relationship": "one",
            "parentRelationship": "webhook_authtype",
            "childRelationship": "",
            "meta": {
              "kind": "string",
              "minLength": 10,
              "maxLength": 32
            }
          },
          "type": "one",
          "complex": true
        }
      ],
      "lines": [],
      "keys": [
        {
          "name": "id",
          "type": "string",
          "childRelationshipType": "Authtype",
          "parentRelationshipType": "",
          "datatype": "VARCHAR",
          "primaryKey": true,
          "required": true,
          "description": "Unique identifier for the webhook endpoint. Auto-generated UUID that serves as the primary key for webhook configuration management.",
          "defaultvalue": "",
          "example": "",
          "autoIncrement": false,
          "maxLength": "32",
          "minLength": "10",
          "array": false,
          "isPII": "",
          "secret": false,
          "create": true,
          "update": true,
          "get": true,
          "list": true,
          "parentRelationship": "",
          "childRelationship": "webhook_config, webhook_authtype",
          "meta": {
            "kind": "string",
            "minLength": 10,
            "maxLength": 32
          }
        }
      ],
      "indexes": [
        {
          "name": "id",
          "type": "string",
          "childRelationshipType": "Authtype",
          "parentRelationshipType": "",
          "datatype": "VARCHAR",
          "primaryKey": true,
          "required": true,
          "description": "Unique identifier for the webhook endpoint. Auto-generated UUID that serves as the primary key for webhook configuration management.",
          "defaultvalue": "",
          "example": "",
          "autoIncrement": false,
          "maxLength": "32",
          "minLength": "10",
          "array": false,
          "isPII": "",
          "secret": false,
          "create": true,
          "update": true,
          "get": true,
          "list": true,
          "parentRelationship": "",
          "childRelationship": "webhook_config, webhook_authtype",
          "meta": {
            "kind": "string",
            "minLength": 10,
            "maxLength": 32
          }
        },
        {
          "name": "name",
          "type": "string",
          "childRelationshipType": "",
          "parentRelationshipType": "",
          "datatype": "VARCHAR",
          "primaryKey": false,
          "required": true,
          "description": "Human-readable name for the webhook endpoint. Used for identification and management purposes in admin interfaces.",
          "defaultvalue": "",
          "example": "",
          "autoIncrement": false,
          "maxLength": "255",
          "array": false,
          "isPII": "",
          "secret": false,
          "create": true,
          "update": true,
          "get": true,
          "list": true,
          "parentRelationship": "",
          "childRelationship": "",
          "meta": {
            "kind": "string",
            "maxLength": 255
          }
        }
      ],
      "docs": {
        "name": "Webhook",
        "summary": "Configuration for webhook table",
        "version": "1.0.0"
      },
      "apis": {},
      "store": {
        "read": "redis",
        "write": "kurrentdb",
        "query": "redis",
        "projector": "redis"
      },
      "options": {
        "command": true,
        "create": true,
        "update": true,
        "read": "redis",
        "write": "kurrentdb",
        "query": "redis",
        "projector": "redis",
        "queue": false,
        "softDelete": false,
        "timestamps": true,
        "versioning": true,
        "logging": true,
        "auditing": true,
        "caching": true,
        "eventStreaming": false
      },
      "cancel": {
        "create": false,
        "update": false,
        "delete": false,
        "batch": false,
        "get": false
      },
      "redis": {
        "prefix": "",
        "version": "1.0",
        "category": "notification:webhook-config.webhook.v1",
        "ttl": 3600,
        "hash": true,
        "aggregate": "webhook"
      },
      "eventstream": {
        "boundedContext": "notification",
        "aggregate": "webhook",
        "version": "v1",
        "stream": "notification.webhookConfig.webhook",
        "createdEvent": "NotificationWebhookConfigWebhookCreated.v1",
        "updatedEvent": "NotificationWebhookConfigWebhookUpdated.v1",
        "deletedEvent": "NotificationWebhookConfigWebhookDeleted.v1"
      },
      "permissions": {
        "bulk": [
          "update",
          "delete",
          "import"
        ],
        "adminOverride": true,
        "auditView": true,
        "custom": []
      },
      "domainName": "",
      "parentPath": []
    },
    {
      "name": "config",
      "description": "# üß© Core Webhook Config ‚Äî General Overview\n\nThe **Core Webhook Config** service is part of the broader **Notification Bounded Context**, responsible for managing all configuration aspects required to send outbound webhooks within the platform. It provides the infrastructure and domain logic that connects a tenant‚Äôs webhook endpoints to the notification ecosystem, ensuring secure, structured, and compliant communication between services and external systems.\n\n---\n\n## üéØ Purpose\n\nThe primary purpose of **Core Webhook Config** is to manage the lifecycle of webhook-related configuration for each tenant. It defines *where*, *how*, and *under what conditions* webhook payloads are sent. By maintaining configurations in a domain-driven, event-sourced model, the service guarantees auditability, tenant isolation, and consistency across all webhook-related operations.\n\n---\n\n## üß± Architectural Role\n\n**Core Webhook Config** acts as the **configuration source of truth** for all webhook integrations in the system. It is not responsible for executing HTTP requests (that‚Äôs handled by the **Core Webhook Execute** service), but instead manages the metadata, headers, secrets, retry strategies, and operational policies that determine how webhooks are delivered and authorized.\n\n### Key Roles:\n\n* Acts as the *control plane* for webhook delivery configuration.\n* Provides secure storage and reference handling for signing secrets.\n* Defines approved target URLs and subscribed event types.\n* Publishes domain events consumed by other services (e.g., executors, auditors, or workflow engines).\n* Ensures compliance with audit and retry policies via event sourcing.\n\n---\n\n## ‚öôÔ∏è Core Components\n\n| Aggregate   | Description                                                                                                     |\n| ----------- | --------------------------------------------------------------------------------------------------------------- |\n| **Webhook** | Represents an outbound webhook endpoint, including target URL, subscribed event types, HTTP method, and status. |\n| **Config**  | Defines retry/backoff strategies, timeout settings, and operational parameters controlling webhook execution.   |\n\nEach aggregate is event-sourced and projected into Redis for fast reads. The system follows a **CQRS pattern**, separating command writes (EventStoreDB) from queries (Redis projections).\n\n---\n\n## üß© Data Flow Summary\n\n\\`\\`\\`\n[API Command] ‚Üí [Use Case] ‚Üí [ESDB Writer Repository] ‚Üí [EventStoreDB]\n       ‚Üì\n[Central Projection Service] ‚Üí [Redis Snapshot] + [Redis Query Index]\n       ‚Üì\n[Query API] ‚Üí [Executor / UI / Workflow Consumers]\n\\`\\`\\`\n\nThis architecture provides full event auditability in **EventStoreDB**, real-time read performance in **Redis**, and flexible event-driven synchronization via **BullMQ** projectors.\n\n---\n\n## üõ°Ô∏è Security and Compliance\n\n* **Authentication:** Managed via Keycloak (OAuth2 / OpenID Connect).\n* **Authorization:** Governed by Open Policy Agent (OPA) Rego policies.\n* **Secret Management:** Signing secrets are stored securely using Doppler or another approved secret manager.\n* **Auditability:** Every configuration change emits domain events stored in EventStoreDB, ensuring immutable history and traceability.\n\n---\n\n## üöÄ Example Use Cases\n\n| Use Case                 | Description                                                                                                         |\n| ------------------------ | ------------------------------------------------------------------------------------------------------------------- |\n| **Webhook Registration** | When a new webhook is added for a tenant, \\`WebhookRegistered.v1\\` and \\`ConfigUpdated.v1\\` events are emitted.         |\n| **Retry Policy Update**  | Admins can update retry and timeout parameters, triggering \\`ConfigUpdated.v1\\` for executor synchronization.         |\n| **Secret Rotation**      | When a signing secret is rotated, the service emits a new versioned event and updates downstream projections.       |\n| **Subscription Change**  | Tenants can modify the event types their webhook subscribes to, updating routing and executor behavior dynamically. |\n\n---\n\n## ‚úÖ Benefits\n\n* **Event-Sourced Reliability:** Every change is versioned, replayable, and fully auditable.\n* **Tenant Isolation:** Each webhook configuration is scoped to a tenant.\n* **High Performance:** Read models are served from Redis with millisecond-level latency.\n* **Extensible Design:** Supports additional delivery settings (e.g., per-event policies, delivery headers) in future iterations.\n* **Integration Friendly:** Provides consistent event naming and structure compatible with other notification channels (Slack, Email, SMS).\n\n---\n\n## üß© Summary\n\nThe **Core Webhook Config** service provides the configuration backbone for all webhook-based notifications. It ensures that every outbound webhook:\n\n* Is securely configured and authorized.\n* Uses approved and auditable endpoints.\n* Follows consistent retry and timeout policies.\n* Operates under event-sourced, tenant-aware control.\n\nThis service is a critical component of the Notification Bounded Context, enabling scalable, reliable, and compliant webhook integration within a modern, event-driven architecture.\n\n---\n\n## üîó Webhook\n\n### **Purpose**\n\nThe \\`Webhook\\` aggregate represents a webhook endpoint configuration for delivering events to external systems. It acts as the foundational configuration point that defines how, where, and under what conditions webhook notifications are sent.\n\nThis aggregate holds delivery configuration including target URLs, HTTP methods, headers, signing secrets, and operational settings. It ensures webhook deliveries are properly configured and can be managed independently.\n\n### **Responsibilities**\n\n* Define webhook endpoint details (URL, method, headers).\n* Manage webhook operational status (active, paused, disabled).\n* Store webhook-specific timeout and TLS verification settings.\n* Reference signing secrets for webhook authentication.\n* Emit events when webhook configuration changes occur.\n\n### **Why It Matters**\n\nThe \\`Webhook\\` aggregate provides the essential configuration for reliable event delivery to external systems. It ensures proper authentication, timeout handling, and operational control over webhook endpoints.\n\n---\n\n## ‚öôÔ∏è Config\n\n### **Purpose**\n\nThe \\`Config\\` aggregate manages system-wide operational parameters for webhook delivery within a tenant‚Äôs environment. It defines how webhook executions behave under various runtime conditions, such as retries, backoff, timeouts, and logging.\n\nThis configuration ensures webhook delivery is resilient and aligned with organizational policies (e.g., retry intervals, maximum attempts, request timeouts, or whether to include audit metadata in headers).\n\n### **Responsibilities**\n\n* Manage retry and backoff policies for webhook execution.\n* Control request timeout and connection settings for external calls.\n* Define signature and security parameters for webhook authentication.\n* Maintain default locale, metadata, and operational strategies (e.g., per-tenant or global).\n* Emit configuration change events for synchronization across executor services.\n\n### **Why It Matters**\n\n\\`Config\\` provides the **operational backbone** for webhook execution. It ensures reliability, observability, and compliance ‚Äî allowing organizations to define consistent behavior for webhook notifications at scale and under failure conditions.\n",
      "columns": [
        {
          "name": "id",
          "type": "string",
          "childRelationshipType": "",
          "parentRelationshipType": "",
          "datatype": "VARCHAR",
          "primaryKey": true,
          "required": true,
          "description": "Unique identifier for this configuration set. Auto-generated UUID that serves as the primary key for webhook configuration management policies.",
          "defaultvalue": "",
          "example": "",
          "autoIncrement": false,
          "maxLength": "32",
          "array": false,
          "isPII": "",
          "secret": false,
          "create": true,
          "update": true,
          "get": true,
          "list": true,
          "parentRelationship": "",
          "childRelationship": "",
          "meta": {
            "kind": "string",
            "maxLength": 32
          }
        },
        {
          "name": "webhookId",
          "type": "string",
          "childRelationshipType": "",
          "parentRelationshipType": "Webhook",
          "datatype": "VARCHAR",
          "primaryKey": false,
          "required": false,
          "description": "Optional reference to a specific webhook for per-webhook configuration overrides. Leave empty for tenant-level or global configurations.",
          "defaultvalue": "NULL",
          "example": "",
          "autoIncrement": false,
          "maxLength": "32",
          "array": false,
          "isPII": "",
          "secret": false,
          "create": true,
          "update": true,
          "get": true,
          "list": true,
          "relationship": "one",
          "parentRelationship": "webhook_config",
          "childRelationship": "",
          "meta": {
            "kind": "string",
            "maxLength": 32
          }
        },
        {
          "name": "tenantId",
          "type": "string",
          "childRelationshipType": "",
          "parentRelationshipType": "",
          "datatype": "VARCHAR",
          "primaryKey": false,
          "required": true,
          "description": "Tenant identifier for multi-tenant support. Every configuration must belong to a tenant for proper isolation and access control.",
          "defaultvalue": "",
          "example": "",
          "autoIncrement": false,
          "maxLength": "32",
          "array": false,
          "isPII": "",
          "secret": false,
          "create": true,
          "update": true,
          "get": true,
          "list": true,
          "parentRelationship": "",
          "childRelationship": "",
          "meta": {
            "kind": "string",
            "maxLength": 32
          }
        },
        {
          "name": "strategy",
          "type": "ConfigStrategyEnum",
          "childRelationshipType": "",
          "parentRelationshipType": "",
          "datatype": "ENUM",
          "primaryKey": false,
          "required": true,
          "description": "Configuration scope strategy: 'per-webhook' for specific webhook overrides, 'per-tenant' for tenant-wide defaults, 'global' for system-wide settings.",
          "defaultvalue": "per-tenant",
          "example": "",
          "autoIncrement": false,
          "enum": [
            {
              "key": "per-webhook"
            },
            {
              "key": "per-tenant"
            },
            {
              "key": "global"
            }
          ],
          "array": false,
          "isPII": "",
          "secret": false,
          "create": true,
          "update": true,
          "get": true,
          "list": true,
          "parentRelationship": "",
          "childRelationship": "",
          "meta": {
            "kind": "enum",
            "enumValues": [
              "per-webhook",
              "per-tenant",
              "global"
            ],
            "enumName": "strategy"
          }
        },
        {
          "name": "maxRetryAttempts",
          "type": "number",
          "childRelationshipType": "",
          "parentRelationshipType": "",
          "datatype": "INT",
          "primaryKey": false,
          "required": true,
          "description": "Maximum number of retry attempts for failed webhook deliveries. Default of 6 provides good balance between persistence and avoiding infinite loops.",
          "defaultvalue": "6",
          "example": "6",
          "autoIncrement": false,
          "array": false,
          "isPII": "",
          "secret": false,
          "create": true,
          "update": true,
          "get": true,
          "list": true,
          "parentRelationship": "",
          "childRelationship": "",
          "meta": {
            "kind": "number",
            "autoIncrement": false
          }
        },
        {
          "name": "retryBackoffSeconds",
          "type": "number",
          "childRelationshipType": "",
          "parentRelationshipType": "",
          "datatype": "INT",
          "primaryKey": false,
          "required": true,
          "description": "Base backoff time in seconds before retrying failed deliveries. Used as starting point for exponential/linear backoff calculations.",
          "defaultvalue": "5",
          "example": "5",
          "autoIncrement": false,
          "array": false,
          "isPII": "",
          "secret": false,
          "create": true,
          "update": true,
          "get": true,
          "list": true,
          "parentRelationship": "",
          "childRelationship": "",
          "meta": {
            "kind": "number",
            "autoIncrement": false
          }
        },
        {
          "name": "retryStrategy",
          "type": "ConfigRetryStrategyEnum",
          "childRelationshipType": "",
          "parentRelationshipType": "",
          "datatype": "ENUM",
          "primaryKey": false,
          "required": false,
          "description": "Strategy for calculating retry delays - exponential (doubles delay), linear (constant increase), or fixed (same delay). Controls how aggressively to back off on failures.",
          "defaultvalue": "exponential",
          "example": "",
          "autoIncrement": false,
          "enum": [
            {
              "key": "exponential"
            },
            {
              "key": "linear"
            },
            {
              "key": "fixed"
            }
          ],
          "array": false,
          "isPII": "",
          "secret": false,
          "create": true,
          "update": true,
          "get": true,
          "list": true,
          "parentRelationship": "",
          "childRelationship": "",
          "meta": {
            "kind": "enum",
            "enumValues": [
              "exponential",
              "linear",
              "fixed"
            ],
            "enumName": "retryStrategy"
          }
        },
        {
          "name": "backoffJitterPct",
          "type": "number",
          "childRelationshipType": "",
          "parentRelationshipType": "",
          "datatype": "INT",
          "primaryKey": false,
          "required": false,
          "description": "Randomization percentage (0-100) added to backoff delays to prevent thundering herd effects. Higher values spread retry attempts more randomly.",
          "defaultvalue": "10",
          "example": "",
          "autoIncrement": false,
          "array": false,
          "isPII": "",
          "secret": false,
          "create": true,
          "update": true,
          "get": true,
          "list": true,
          "parentRelationship": "",
          "childRelationship": "",
          "meta": {
            "kind": "number",
            "autoIncrement": false
          }
        },
        {
          "name": "requestTimeoutMs",
          "type": "number",
          "childRelationshipType": "",
          "parentRelationshipType": "",
          "datatype": "INT",
          "primaryKey": false,
          "required": false,
          "description": "Maximum time in milliseconds to wait for webhook response before timing out and marking as failed. Overrides the webhook-level setting.",
          "defaultvalue": "10000",
          "example": "",
          "autoIncrement": false,
          "array": false,
          "isPII": "",
          "secret": false,
          "create": true,
          "update": true,
          "get": true,
          "list": true,
          "parentRelationship": "",
          "childRelationship": "",
          "meta": {
            "kind": "number",
            "autoIncrement": false
          }
        },
        {
          "name": "connectTimeoutMs",
          "type": "number",
          "childRelationshipType": "",
          "parentRelationshipType": "",
          "datatype": "INT",
          "primaryKey": false,
          "required": false,
          "description": "Maximum time in milliseconds to wait for connection establishment before failing. Overrides the webhook-level setting.",
          "defaultvalue": "3000",
          "example": "",
          "autoIncrement": false,
          "array": false,
          "isPII": "",
          "secret": false,
          "create": true,
          "update": true,
          "get": true,
          "list": true,
          "parentRelationship": "",
          "childRelationship": "",
          "meta": {
            "kind": "number",
            "autoIncrement": false
          }
        },
        {
          "name": "signatureAlgorithm",
          "type": "ConfigSignatureAlgorithmEnum",
          "childRelationshipType": "",
          "parentRelationshipType": "",
          "datatype": "ENUM",
          "primaryKey": false,
          "required": false,
          "description": "Cryptographic algorithm for signing webhook payloads - sha256 (recommended for security) or sha1 (legacy). Used with signingSecretRef to verify request authenticity.",
          "defaultvalue": "sha256",
          "example": "",
          "autoIncrement": false,
          "enum": [
            {
              "key": "sha256"
            },
            {
              "key": "sha1"
            }
          ],
          "array": false,
          "isPII": "",
          "secret": false,
          "create": true,
          "update": true,
          "get": true,
          "list": true,
          "parentRelationship": "",
          "childRelationship": "",
          "meta": {
            "kind": "enum",
            "enumValues": [
              "sha256",
              "sha1"
            ],
            "enumName": "signatureAlgorithm"
          }
        },
        {
          "name": "includeTimestampHeader",
          "type": "boolean",
          "childRelationshipType": "",
          "parentRelationshipType": "",
          "datatype": "BOOLEAN",
          "primaryKey": false,
          "required": false,
          "description": "Whether to include X-Webhook-Timestamp header with Unix timestamp when signing requests. Helps prevent replay attacks by allowing receivers to reject old requests.",
          "defaultvalue": "true",
          "example": "",
          "autoIncrement": false,
          "array": false,
          "isPII": "",
          "secret": false,
          "create": true,
          "update": true,
          "get": true,
          "list": true,
          "parentRelationship": "",
          "childRelationship": "",
          "meta": {
            "kind": "boolean"
          }
        },
        {
          "name": "maxConcurrent",
          "type": "number",
          "childRelationshipType": "",
          "parentRelationshipType": "",
          "datatype": "INT",
          "primaryKey": false,
          "required": false,
          "description": "Maximum number of concurrent webhook delivery jobs for this configuration. NULL means unlimited. Helps control resource usage and downstream system load.",
          "defaultvalue": "10",
          "example": "",
          "autoIncrement": false,
          "array": false,
          "isPII": "",
          "secret": false,
          "create": true,
          "update": true,
          "get": true,
          "list": true,
          "parentRelationship": "",
          "childRelationship": "",
          "meta": {
            "kind": "number",
            "autoIncrement": false
          }
        },
        {
          "name": "dlqEnabled",
          "type": "boolean",
          "childRelationshipType": "",
          "parentRelationshipType": "",
          "datatype": "BOOLEAN",
          "primaryKey": false,
          "required": false,
          "description": "Whether to store permanently failed webhook deliveries in a dead letter queue for manual inspection and reprocessing. Essential for reliability monitoring.",
          "defaultvalue": "true",
          "example": "",
          "autoIncrement": false,
          "array": false,
          "isPII": "",
          "secret": false,
          "create": true,
          "update": true,
          "get": true,
          "list": true,
          "parentRelationship": "",
          "childRelationship": "",
          "meta": {
            "kind": "boolean"
          }
        },
        {
          "name": "dlqMaxAgeSeconds",
          "type": "number",
          "childRelationshipType": "",
          "parentRelationshipType": "",
          "datatype": "INT",
          "primaryKey": false,
          "required": false,
          "description": "Maximum time in seconds to retain failed messages in dead letter queue before automatic cleanup. Default is 7 days (604800 seconds).",
          "defaultvalue": "604800",
          "example": "",
          "autoIncrement": false,
          "array": false,
          "isPII": "",
          "secret": false,
          "create": true,
          "update": true,
          "get": true,
          "list": true,
          "parentRelationship": "",
          "childRelationship": "",
          "meta": {
            "kind": "number",
            "autoIncrement": false
          }
        },
        {
          "name": "ordering",
          "type": "ConfigOrderingEnum",
          "childRelationshipType": "",
          "parentRelationshipType": "",
          "datatype": "ENUM",
          "primaryKey": false,
          "required": false,
          "description": "Message delivery ordering strategy - fifo (strict first-in-first-out) or loose (best-effort ordering). FIFO may reduce throughput but ensures sequential delivery.",
          "defaultvalue": "fifo",
          "example": "",
          "autoIncrement": false,
          "enum": [
            {
              "key": "fifo"
            },
            {
              "key": "loose"
            }
          ],
          "array": false,
          "isPII": "",
          "secret": false,
          "create": true,
          "update": true,
          "get": true,
          "list": true,
          "parentRelationship": "",
          "childRelationship": "",
          "meta": {
            "kind": "enum",
            "enumValues": [
              "fifo",
              "loose"
            ],
            "enumName": "ordering"
          }
        },
        {
          "name": "defaultLocale",
          "type": "string",
          "childRelationshipType": "",
          "parentRelationshipType": "",
          "datatype": "VARCHAR",
          "primaryKey": false,
          "required": true,
          "description": "Default locale for webhook payloads and error messages in IETF BCP 47 format (e.g., 'en-US', 'en-ZA'). Used for internationalization of generated content.",
          "defaultvalue": "en-US",
          "example": "en-US",
          "autoIncrement": false,
          "maxLength": "16",
          "array": false,
          "isPII": "",
          "secret": false,
          "create": true,
          "update": true,
          "get": true,
          "list": true,
          "parentRelationship": "",
          "childRelationship": "",
          "meta": {
            "kind": "string",
            "maxLength": 16
          }
        },
        {
          "name": "metadata",
          "type": "Record<string, unknown>",
          "childRelationshipType": "",
          "parentRelationshipType": "",
          "datatype": "JSON",
          "primaryKey": false,
          "required": false,
          "description": "Flexible JSON object for storing additional workspace-specific configuration options, feature flags, and custom settings that don't warrant dedicated columns.",
          "defaultvalue": "",
          "example": "{\"timezone\":\"America/New_York\",\"businessHours\":{\"start\":\"09:00\",\"end\":\"17:00\"},\"features\":{\"threadedReplies\":true}}",
          "autoIncrement": false,
          "array": false,
          "isPII": "",
          "secret": false,
          "create": true,
          "update": true,
          "get": true,
          "list": true,
          "parentRelationship": "",
          "childRelationship": "",
          "meta": {
            "kind": "json",
            "jsonShape": "object"
          }
        }
      ],
      "relationships": [
        {
          "name": "webhook_config",
          "parentTable": "webhook",
          "parentColumn": {
            "name": "id",
            "type": "string",
            "childRelationshipType": "Authtype",
            "parentRelationshipType": "",
            "datatype": "VARCHAR",
            "primaryKey": true,
            "required": true,
            "description": "Unique identifier for the webhook endpoint. Auto-generated UUID that serves as the primary key for webhook configuration management.",
            "defaultvalue": "",
            "example": "",
            "autoIncrement": false,
            "maxLength": "32",
            "minLength": "10",
            "array": false,
            "isPII": "",
            "secret": false,
            "create": true,
            "update": true,
            "get": true,
            "list": true,
            "parentRelationship": "",
            "childRelationship": "webhook_config, webhook_authtype",
            "meta": {
              "kind": "string",
              "minLength": 10,
              "maxLength": 32
            }
          },
          "childTable": "config",
          "childColumn": {
            "name": "webhookId",
            "type": "string",
            "childRelationshipType": "",
            "parentRelationshipType": "Webhook",
            "datatype": "VARCHAR",
            "primaryKey": false,
            "required": false,
            "description": "Optional reference to a specific webhook for per-webhook configuration overrides. Leave empty for tenant-level or global configurations.",
            "defaultvalue": "NULL",
            "example": "",
            "autoIncrement": false,
            "maxLength": "32",
            "array": false,
            "isPII": "",
            "secret": false,
            "create": true,
            "update": true,
            "get": true,
            "list": true,
            "relationship": "one",
            "parentRelationship": "webhook_config",
            "childRelationship": "",
            "meta": {
              "kind": "string",
              "maxLength": 32
            }
          },
          "type": "one",
          "complex": true
        }
      ],
      "lines": [],
      "keys": [
        {
          "name": "id",
          "type": "string",
          "childRelationshipType": "",
          "parentRelationshipType": "",
          "datatype": "VARCHAR",
          "primaryKey": true,
          "required": true,
          "description": "Unique identifier for this configuration set. Auto-generated UUID that serves as the primary key for webhook configuration management policies.",
          "defaultvalue": "",
          "example": "",
          "autoIncrement": false,
          "maxLength": "32",
          "array": false,
          "isPII": "",
          "secret": false,
          "create": true,
          "update": true,
          "get": true,
          "list": true,
          "parentRelationship": "",
          "childRelationship": "",
          "meta": {
            "kind": "string",
            "maxLength": 32
          }
        }
      ],
      "indexes": [],
      "docs": {
        "name": "Config",
        "summary": "Configuration for config table",
        "version": "1.0.0"
      },
      "apis": {},
      "store": {
        "read": "redis",
        "write": "kurrentdb",
        "query": "redis",
        "projector": "redis"
      },
      "options": {
        "command": true,
        "create": true,
        "update": true,
        "read": "redis",
        "write": "kurrentdb",
        "query": "redis",
        "projector": "redis",
        "queue": false,
        "softDelete": false,
        "timestamps": true,
        "versioning": true,
        "logging": true,
        "auditing": true,
        "caching": true,
        "eventStreaming": false
      },
      "cancel": {
        "create": false,
        "update": false,
        "delete": false,
        "batch": false,
        "get": false
      },
      "redis": {
        "prefix": "",
        "version": "1.0",
        "category": "notification:webhook-config.config.v1",
        "ttl": 3600,
        "hash": true,
        "aggregate": "config"
      },
      "eventstream": {
        "boundedContext": "notification",
        "aggregate": "config",
        "version": "v1",
        "stream": "notification.webhookConfig.config",
        "createdEvent": "NotificationWebhookConfigConfigCreated.v1",
        "updatedEvent": "NotificationWebhookConfigConfigUpdated.v1",
        "deletedEvent": "NotificationWebhookConfigConfigDeleted.v1"
      },
      "permissions": {
        "bulk": [
          "update",
          "delete",
          "import"
        ],
        "adminOverride": true,
        "auditView": true,
        "custom": []
      },
      "domainName": "",
      "parentPath": []
    },
    {
      "name": "authtype",
      "description": "",
      "columns": [
        {
          "name": "id",
          "type": "string",
          "childRelationshipType": "",
          "parentRelationshipType": "",
          "datatype": "VARCHAR",
          "primaryKey": true,
          "required": true,
          "description": "",
          "defaultvalue": "",
          "example": "",
          "autoIncrement": false,
          "array": false,
          "isPII": "",
          "secret": false,
          "create": true,
          "update": true,
          "get": true,
          "list": true,
          "parentRelationship": "",
          "childRelationship": "",
          "meta": {
            "kind": "string"
          }
        },
        {
          "name": "webhook_id",
          "type": "string",
          "childRelationshipType": "",
          "parentRelationshipType": "Webhook",
          "datatype": "VARCHAR",
          "primaryKey": false,
          "required": true,
          "description": "Unique identifier for the webhook endpoint. Auto-generated UUID that serves as the primary key for webhook configuration management.",
          "defaultvalue": "",
          "example": "",
          "autoIncrement": false,
          "maxLength": "32",
          "minLength": "10",
          "array": false,
          "isPII": "",
          "secret": false,
          "create": true,
          "update": true,
          "get": true,
          "list": true,
          "relationship": "one",
          "parentRelationship": "webhook_authtype",
          "childRelationship": "",
          "meta": {
            "kind": "string",
            "minLength": 10,
            "maxLength": 32
          }
        },
        {
          "name": "type",
          "type": "AuthtypeTypeEnum",
          "childRelationshipType": "",
          "parentRelationshipType": "",
          "datatype": "ENUM",
          "primaryKey": false,
          "required": true,
          "description": "Authentication method type - none (no auth), hmac (signature-based), basic (username/password), api-key (API key), oauth2-client-credentials (OAuth2 CC flow), or mtls (mutual TLS).",
          "defaultvalue": "none",
          "example": "",
          "autoIncrement": false,
          "enum": [
            {
              "key": "none"
            },
            {
              "key": "hmac"
            },
            {
              "key": "basic"
            },
            {
              "key": "api-key"
            },
            {
              "key": "oauth2-client-credentials"
            },
            {
              "key": "mtls"
            }
          ],
          "array": false,
          "isPII": "",
          "secret": false,
          "create": true,
          "update": true,
          "get": true,
          "list": true,
          "parentRelationship": "",
          "childRelationship": "",
          "meta": {
            "kind": "enum",
            "enumValues": [
              "none",
              "hmac",
              "basic",
              "api-key",
              "oauth2-client-credentials",
              "mtls"
            ],
            "enumName": "type"
          }
        },
        {
          "name": "signingSecretRef",
          "type": "string",
          "childRelationshipType": "",
          "parentRelationshipType": "",
          "datatype": "VARCHAR",
          "primaryKey": false,
          "required": false,
          "description": "Secret reference for HMAC signing key. Used with 'hmac' authentication type to generate request signatures for verification.",
          "defaultvalue": "",
          "example": "",
          "autoIncrement": false,
          "maxLength": "255",
          "array": false,
          "isPII": "",
          "secret": false,
          "create": true,
          "update": true,
          "get": true,
          "list": true,
          "parentRelationship": "",
          "childRelationship": "",
          "meta": {
            "kind": "string",
            "maxLength": 255
          }
        },
        {
          "name": "signatureAlgorithm",
          "type": "AuthtypeSignatureAlgorithmEnum",
          "childRelationshipType": "",
          "parentRelationshipType": "",
          "datatype": "ENUM",
          "primaryKey": false,
          "required": false,
          "description": "Cryptographic algorithm for HMAC signatures - sha256 (recommended) or sha1 (legacy). Only used with 'hmac' authentication type.",
          "defaultvalue": "sha256",
          "example": "",
          "autoIncrement": false,
          "enum": [
            {
              "key": "sha256"
            },
            {
              "key": "sha1"
            }
          ],
          "array": false,
          "isPII": "",
          "secret": false,
          "create": true,
          "update": true,
          "get": true,
          "list": true,
          "parentRelationship": "",
          "childRelationship": "",
          "meta": {
            "kind": "enum",
            "enumValues": [
              "sha256",
              "sha1"
            ],
            "enumName": "signatureAlgorithm"
          }
        },
        {
          "name": "usernameRef",
          "type": "string",
          "childRelationshipType": "",
          "parentRelationshipType": "",
          "datatype": "VARCHAR",
          "primaryKey": false,
          "required": false,
          "description": "Secret reference for Basic Auth username. Used with 'basic' authentication type for HTTP Basic Authentication.",
          "defaultvalue": "",
          "example": "",
          "autoIncrement": false,
          "maxLength": "255",
          "array": false,
          "isPII": "",
          "secret": false,
          "create": true,
          "update": true,
          "get": true,
          "list": true,
          "parentRelationship": "",
          "childRelationship": "",
          "meta": {
            "kind": "string",
            "maxLength": 255
          }
        },
        {
          "name": "passwordRef",
          "type": "string",
          "childRelationshipType": "",
          "parentRelationshipType": "",
          "datatype": "VARCHAR",
          "primaryKey": false,
          "required": false,
          "description": "Secret reference for Basic Auth password. Used with 'basic' authentication type for HTTP Basic Authentication.",
          "defaultvalue": "",
          "example": "",
          "autoIncrement": false,
          "maxLength": "255",
          "array": false,
          "isPII": "",
          "secret": false,
          "create": true,
          "update": true,
          "get": true,
          "list": true,
          "parentRelationship": "",
          "childRelationship": "",
          "meta": {
            "kind": "string",
            "maxLength": 255
          }
        },
        {
          "name": "apiKeyRef",
          "type": "string",
          "childRelationshipType": "",
          "parentRelationshipType": "",
          "datatype": "VARCHAR",
          "primaryKey": false,
          "required": false,
          "description": "Secret reference for API key value. Used with 'api-key' authentication type for API key-based authentication.",
          "defaultvalue": "",
          "example": "",
          "autoIncrement": false,
          "maxLength": "255",
          "array": false,
          "isPII": "",
          "secret": false,
          "create": true,
          "update": true,
          "get": true,
          "list": true,
          "parentRelationship": "",
          "childRelationship": "",
          "meta": {
            "kind": "string",
            "maxLength": 255
          }
        },
        {
          "name": "apiKeyHeader",
          "type": "string",
          "childRelationshipType": "",
          "parentRelationshipType": "",
          "datatype": "VARCHAR",
          "primaryKey": false,
          "required": false,
          "description": "HTTP header name for API key transmission. Used with 'api-key' authentication type. Default is 'X-API-Key' if not specified.",
          "defaultvalue": "X-API-Key",
          "example": "",
          "autoIncrement": false,
          "maxLength": "100",
          "array": false,
          "isPII": "",
          "secret": false,
          "create": true,
          "update": true,
          "get": true,
          "list": true,
          "parentRelationship": "",
          "childRelationship": "",
          "meta": {
            "kind": "string",
            "maxLength": 100
          }
        },
        {
          "name": "apiKeyQueryParam",
          "type": "string",
          "childRelationshipType": "",
          "parentRelationshipType": "",
          "datatype": "VARCHAR",
          "primaryKey": false,
          "required": false,
          "description": "Query parameter name for API key transmission. Optional alternative to header-based API key auth. Used with 'api-key' authentication type.",
          "defaultvalue": "",
          "example": "",
          "autoIncrement": false,
          "maxLength": "100",
          "array": false,
          "isPII": "",
          "secret": false,
          "create": true,
          "update": true,
          "get": true,
          "list": true,
          "parentRelationship": "",
          "childRelationship": "",
          "meta": {
            "kind": "string",
            "maxLength": 100
          }
        },
        {
          "name": "tokenUrl",
          "type": "string",
          "childRelationshipType": "",
          "parentRelationshipType": "",
          "datatype": "VARCHAR",
          "primaryKey": false,
          "required": false,
          "description": "OAuth2 token endpoint URL for client credentials flow. Used with 'oauth2-client-credentials' authentication type to obtain access tokens.",
          "defaultvalue": "",
          "example": "",
          "autoIncrement": false,
          "maxLength": "500",
          "array": false,
          "isPII": "",
          "secret": false,
          "create": true,
          "update": true,
          "get": true,
          "list": true,
          "parentRelationship": "",
          "childRelationship": "",
          "meta": {
            "kind": "string",
            "maxLength": 500
          }
        },
        {
          "name": "clientIdRef",
          "type": "string",
          "childRelationshipType": "",
          "parentRelationshipType": "",
          "datatype": "VARCHAR",
          "primaryKey": false,
          "required": false,
          "description": "Secret reference for OAuth2 client ID. Used with 'oauth2-client-credentials' authentication type for client identification.",
          "defaultvalue": "",
          "example": "",
          "autoIncrement": false,
          "maxLength": "255",
          "array": false,
          "isPII": "",
          "secret": false,
          "create": true,
          "update": true,
          "get": true,
          "list": true,
          "parentRelationship": "",
          "childRelationship": "",
          "meta": {
            "kind": "string",
            "maxLength": 255
          }
        },
        {
          "name": "clientSecretRef",
          "type": "string",
          "childRelationshipType": "",
          "parentRelationshipType": "",
          "datatype": "VARCHAR",
          "primaryKey": false,
          "required": false,
          "description": "Secret reference for OAuth2 client secret. Used with 'oauth2-client-credentials' authentication type for client authentication.",
          "defaultvalue": "",
          "example": "",
          "autoIncrement": false,
          "maxLength": "255",
          "array": false,
          "isPII": "",
          "secret": false,
          "create": true,
          "update": true,
          "get": true,
          "list": true,
          "parentRelationship": "",
          "childRelationship": "",
          "meta": {
            "kind": "string",
            "maxLength": 255
          }
        },
        {
          "name": "scope",
          "type": "string",
          "childRelationshipType": "",
          "parentRelationshipType": "",
          "datatype": "VARCHAR",
          "primaryKey": false,
          "required": false,
          "description": "OAuth2 scope string for client credentials flow. Space-separated list of permissions requested. Used with 'oauth2-client-credentials' authentication type.",
          "defaultvalue": "",
          "example": "",
          "autoIncrement": false,
          "maxLength": "500",
          "array": false,
          "isPII": "",
          "secret": false,
          "create": true,
          "update": true,
          "get": true,
          "list": true,
          "parentRelationship": "",
          "childRelationship": "",
          "meta": {
            "kind": "string",
            "maxLength": 500
          }
        },
        {
          "name": "certRef",
          "type": "string",
          "childRelationshipType": "",
          "parentRelationshipType": "",
          "datatype": "VARCHAR",
          "primaryKey": false,
          "required": false,
          "description": "Secret reference for client certificate in PEM format. Used with 'mtls' authentication type for mutual TLS authentication.",
          "defaultvalue": "",
          "example": "",
          "autoIncrement": false,
          "maxLength": "255",
          "array": false,
          "isPII": "",
          "secret": false,
          "create": true,
          "update": true,
          "get": true,
          "list": true,
          "parentRelationship": "",
          "childRelationship": "",
          "meta": {
            "kind": "string",
            "maxLength": 255
          }
        },
        {
          "name": "keyRef",
          "type": "string",
          "childRelationshipType": "",
          "parentRelationshipType": "",
          "datatype": "VARCHAR",
          "primaryKey": false,
          "required": false,
          "description": "Secret reference for private key in PEM format. Used with 'mtls' authentication type for mutual TLS authentication.",
          "defaultvalue": "",
          "example": "",
          "autoIncrement": false,
          "maxLength": "255",
          "array": false,
          "isPII": "",
          "secret": false,
          "create": true,
          "update": true,
          "get": true,
          "list": true,
          "parentRelationship": "",
          "childRelationship": "",
          "meta": {
            "kind": "string",
            "maxLength": 255
          }
        },
        {
          "name": "caRef",
          "type": "string",
          "childRelationshipType": "",
          "parentRelationshipType": "",
          "datatype": "VARCHAR",
          "primaryKey": false,
          "required": false,
          "description": "Optional secret reference for Certificate Authority bundle in PEM format. Used with 'mtls' authentication type for server certificate validation.",
          "defaultvalue": "",
          "example": "",
          "autoIncrement": false,
          "maxLength": "255",
          "array": false,
          "isPII": "",
          "secret": false,
          "create": true,
          "update": true,
          "get": true,
          "list": true,
          "parentRelationship": "",
          "childRelationship": "",
          "meta": {
            "kind": "string",
            "maxLength": 255
          }
        }
      ],
      "relationships": [
        {
          "name": "webhook_authtype",
          "parentTable": "webhook",
          "parentColumn": {
            "name": "id",
            "type": "string",
            "childRelationshipType": "Authtype",
            "parentRelationshipType": "",
            "datatype": "VARCHAR",
            "primaryKey": true,
            "required": true,
            "description": "Unique identifier for the webhook endpoint. Auto-generated UUID that serves as the primary key for webhook configuration management.",
            "defaultvalue": "",
            "example": "",
            "autoIncrement": false,
            "maxLength": "32",
            "minLength": "10",
            "array": false,
            "isPII": "",
            "secret": false,
            "create": true,
            "update": true,
            "get": true,
            "list": true,
            "parentRelationship": "",
            "childRelationship": "webhook_config, webhook_authtype",
            "meta": {
              "kind": "string",
              "minLength": 10,
              "maxLength": 32
            }
          },
          "childTable": "authtype",
          "childColumn": {
            "name": "webhook_id",
            "type": "string",
            "childRelationshipType": "",
            "parentRelationshipType": "Webhook",
            "datatype": "VARCHAR",
            "primaryKey": false,
            "required": true,
            "description": "Unique identifier for the webhook endpoint. Auto-generated UUID that serves as the primary key for webhook configuration management.",
            "defaultvalue": "",
            "example": "",
            "autoIncrement": false,
            "maxLength": "32",
            "minLength": "10",
            "array": false,
            "isPII": "",
            "secret": false,
            "create": true,
            "update": true,
            "get": true,
            "list": true,
            "relationship": "one",
            "parentRelationship": "webhook_authtype",
            "childRelationship": "",
            "meta": {
              "kind": "string",
              "minLength": 10,
              "maxLength": 32
            }
          },
          "type": "one",
          "complex": true
        }
      ],
      "lines": [],
      "keys": [
        {
          "name": "id",
          "type": "string",
          "childRelationshipType": "",
          "parentRelationshipType": "",
          "datatype": "VARCHAR",
          "primaryKey": true,
          "required": true,
          "description": "",
          "defaultvalue": "",
          "example": "",
          "autoIncrement": false,
          "array": false,
          "isPII": "",
          "secret": false,
          "create": true,
          "update": true,
          "get": true,
          "list": true,
          "parentRelationship": "",
          "childRelationship": "",
          "meta": {
            "kind": "string"
          }
        }
      ],
      "indexes": [],
      "docs": {
        "name": "Authtype",
        "summary": "Configuration for authtype table",
        "version": "1.0.0"
      },
      "apis": {},
      "store": {
        "read": "redis",
        "write": "kurrentdb",
        "query": "redis",
        "projector": "redis"
      },
      "options": {
        "command": true,
        "create": true,
        "update": true,
        "read": "redis",
        "write": "kurrentdb",
        "query": "redis",
        "projector": "redis",
        "queue": false,
        "softDelete": false,
        "timestamps": true,
        "versioning": true,
        "logging": true,
        "auditing": true,
        "caching": true,
        "eventStreaming": false
      },
      "cancel": {
        "create": false,
        "update": false,
        "delete": false,
        "batch": false,
        "get": false
      },
      "redis": {
        "prefix": "",
        "version": "1.0",
        "category": "notification:webhook-config.authtype.v1",
        "ttl": 3600,
        "hash": true,
        "aggregate": "authtype"
      },
      "eventstream": {
        "boundedContext": "notification",
        "aggregate": "authtype",
        "version": "v1",
        "stream": "notification.webhookConfig.authtype",
        "createdEvent": "NotificationWebhookConfigAuthtypeCreated.v1",
        "updatedEvent": "NotificationWebhookConfigAuthtypeUpdated.v1",
        "deletedEvent": "NotificationWebhookConfigAuthtypeDeleted.v1"
      },
      "permissions": {
        "bulk": [
          "update",
          "delete",
          "import"
        ],
        "adminOverride": true,
        "auditView": true,
        "custom": []
      },
      "domainName": "",
      "parentPath": []
    },
    {
      "name": "secure_test",
      "description": "",
      "columns": [
        {
          "name": "id",
          "type": "string",
          "childRelationshipType": "",
          "parentRelationshipType": "",
          "datatype": "VARCHAR",
          "primaryKey": true,
          "required": true,
          "description": "",
          "defaultvalue": "",
          "example": "",
          "autoIncrement": false,
          "array": false,
          "isPII": "",
          "secret": false,
          "create": true,
          "update": true,
          "get": true,
          "list": true,
          "parentRelationship": "",
          "childRelationship": "",
          "meta": {
            "kind": "string"
          }
        },
        {
          "name": "name",
          "type": "string",
          "childRelationshipType": "",
          "parentRelationshipType": "",
          "datatype": "VARCHAR",
          "primaryKey": false,
          "required": true,
          "description": "",
          "defaultvalue": "",
          "example": "",
          "autoIncrement": false,
          "maxLength": "64",
          "array": false,
          "isPII": "",
          "secret": false,
          "create": true,
          "update": true,
          "get": true,
          "list": true,
          "parentRelationship": "",
          "childRelationship": "",
          "meta": {
            "kind": "string",
            "maxLength": 64
          }
        },
        {
          "name": "description",
          "type": "string",
          "childRelationshipType": "",
          "parentRelationshipType": "",
          "datatype": "TEXT",
          "primaryKey": false,
          "required": false,
          "description": "",
          "defaultvalue": "",
          "example": "",
          "autoIncrement": false,
          "array": false,
          "isPII": "",
          "secret": false,
          "create": true,
          "update": true,
          "get": true,
          "list": true,
          "parentRelationship": "",
          "childRelationship": "",
          "meta": {
            "kind": "string",
            "maxLength": 65535
          }
        },
        {
          "name": "type",
          "type": "SecureTestTypeEnum",
          "childRelationshipType": "",
          "parentRelationshipType": "",
          "datatype": "ENUM",
          "primaryKey": false,
          "required": true,
          "description": "Authentication method type - none (no auth), hmac (signature-based), basic (username/password), api-key (API key), oauth2-client-credentials (OAuth2 CC flow), or mtls (mutual TLS).",
          "defaultvalue": "none",
          "example": "",
          "autoIncrement": false,
          "enum": [
            {
              "key": "none"
            },
            {
              "key": "hmac"
            },
            {
              "key": "basic"
            },
            {
              "key": "api-key"
            },
            {
              "key": "oauth2-client-credentials"
            },
            {
              "key": "mtls"
            }
          ],
          "array": false,
          "isPII": "",
          "secret": false,
          "create": true,
          "update": true,
          "get": true,
          "list": true,
          "parentRelationship": "",
          "childRelationship": "",
          "meta": {
            "kind": "enum",
            "enumValues": [
              "none",
              "hmac",
              "basic",
              "api-key",
              "oauth2-client-credentials",
              "mtls"
            ],
            "enumName": "type"
          }
        },
        {
          "name": "signingSecret",
          "type": "string",
          "childRelationshipType": "",
          "parentRelationshipType": "",
          "datatype": "VARCHAR",
          "primaryKey": false,
          "required": false,
          "description": "Secret reference for HMAC signing key. Used with 'hmac' authentication type to generate request signatures for verification.",
          "defaultvalue": "",
          "example": "",
          "autoIncrement": false,
          "maxLength": "255",
          "array": false,
          "isPII": "",
          "secret": true,
          "security": {
            "type": "secret",
            "classification": "auth"
          },
          "create": true,
          "update": true,
          "get": true,
          "list": true,
          "parentRelationship": "",
          "childRelationship": "",
          "meta": {
            "kind": "string",
            "maxLength": 255
          }
        },
        {
          "name": "signatureAlgorithm",
          "type": "SecureTestSignatureAlgorithmEnum",
          "childRelationshipType": "",
          "parentRelationshipType": "",
          "datatype": "ENUM",
          "primaryKey": false,
          "required": false,
          "description": "Cryptographic algorithm for HMAC signatures - sha256 (recommended) or sha1 (legacy). Only used with 'hmac' authentication type.",
          "defaultvalue": "sha256",
          "example": "",
          "autoIncrement": false,
          "enum": [
            {
              "key": "sha256"
            },
            {
              "key": "sha1"
            }
          ],
          "array": false,
          "isPII": "",
          "secret": false,
          "create": true,
          "update": true,
          "get": true,
          "list": true,
          "parentRelationship": "",
          "childRelationship": "",
          "meta": {
            "kind": "enum",
            "enumValues": [
              "sha256",
              "sha1"
            ],
            "enumName": "signatureAlgorithm"
          }
        },
        {
          "name": "username",
          "type": "string",
          "childRelationshipType": "",
          "parentRelationshipType": "",
          "datatype": "VARCHAR",
          "primaryKey": false,
          "required": false,
          "description": "Secret reference for Basic Auth username. Used with 'basic' authentication type for HTTP Basic Authentication.",
          "defaultvalue": "",
          "example": "",
          "autoIncrement": false,
          "maxLength": "255",
          "array": false,
          "isPII": "",
          "secret": true,
          "security": {
            "type": "secret",
            "classification": "auth"
          },
          "create": true,
          "update": true,
          "get": true,
          "list": true,
          "parentRelationship": "",
          "childRelationship": "",
          "meta": {
            "kind": "string",
            "maxLength": 255
          }
        },
        {
          "name": "password",
          "type": "string",
          "childRelationshipType": "",
          "parentRelationshipType": "",
          "datatype": "VARCHAR",
          "primaryKey": false,
          "required": false,
          "description": "Secret reference for Basic Auth password. Used with 'basic' authentication type for HTTP Basic Authentication.",
          "defaultvalue": "",
          "example": "",
          "autoIncrement": false,
          "maxLength": "255",
          "array": false,
          "isPII": "",
          "secret": true,
          "security": {
            "type": "secret",
            "classification": "auth"
          },
          "create": true,
          "update": true,
          "get": true,
          "list": true,
          "parentRelationship": "",
          "childRelationship": "",
          "meta": {
            "kind": "string",
            "maxLength": 255
          }
        }
      ],
      "relationships": [],
      "lines": [],
      "keys": [
        {
          "name": "id",
          "type": "string",
          "childRelationshipType": "",
          "parentRelationshipType": "",
          "datatype": "VARCHAR",
          "primaryKey": true,
          "required": true,
          "description": "",
          "defaultvalue": "",
          "example": "",
          "autoIncrement": false,
          "array": false,
          "isPII": "",
          "secret": false,
          "create": true,
          "update": true,
          "get": true,
          "list": true,
          "parentRelationship": "",
          "childRelationship": "",
          "meta": {
            "kind": "string"
          }
        }
      ],
      "indexes": [],
      "docs": {
        "name": "Secure_test",
        "summary": "Configuration for secure_test table",
        "version": "1.0.0"
      },
      "apis": {},
      "store": {
        "read": "redis",
        "write": "kurrentdb",
        "query": "redis",
        "projector": "redis"
      },
      "options": {
        "command": true,
        "create": true,
        "update": true,
        "read": "redis",
        "write": "kurrentdb",
        "query": "redis",
        "projector": "redis",
        "queue": false,
        "softDelete": false,
        "timestamps": true,
        "versioning": true,
        "logging": true,
        "auditing": true,
        "caching": true,
        "eventStreaming": false
      },
      "cancel": {
        "create": false,
        "update": false,
        "delete": false,
        "batch": false,
        "get": false
      },
      "redis": {
        "prefix": "",
        "version": "1.0",
        "category": "notification:webhook-config.secure.test.v1",
        "ttl": 3600,
        "hash": true,
        "aggregate": "secure_test"
      },
      "eventstream": {
        "boundedContext": "notification",
        "aggregate": "secure_test",
        "version": "v1",
        "stream": "notification.webhookConfig.secureTest",
        "createdEvent": "NotificationWebhookConfigSecureTestCreated.v1",
        "updatedEvent": "NotificationWebhookConfigSecureTestUpdated.v1",
        "deletedEvent": "NotificationWebhookConfigSecureTestDeleted.v1"
      },
      "permissions": {
        "bulk": [
          "update",
          "delete",
          "import"
        ],
        "adminOverride": true,
        "auditView": true,
        "custom": []
      },
      "domainName": "",
      "parentPath": []
    }
  ],
  "relationships": [
    {
      "name": "webhook_config",
      "parentTable": "webhook",
      "parentColumn": {
        "name": "id",
        "type": "string",
        "childRelationshipType": "Authtype",
        "parentRelationshipType": "",
        "datatype": "VARCHAR",
        "primaryKey": true,
        "required": true,
        "description": "Unique identifier for the webhook endpoint. Auto-generated UUID that serves as the primary key for webhook configuration management.",
        "defaultvalue": "",
        "example": "",
        "autoIncrement": false,
        "maxLength": "32",
        "minLength": "10",
        "array": false,
        "isPII": "",
        "secret": false,
        "create": true,
        "update": true,
        "get": true,
        "list": true,
        "parentRelationship": "",
        "childRelationship": "webhook_config, webhook_authtype",
        "meta": {
          "kind": "string",
          "minLength": 10,
          "maxLength": 32
        }
      },
      "childTable": "config",
      "childColumn": {
        "name": "webhookId",
        "type": "string",
        "childRelationshipType": "",
        "parentRelationshipType": "Webhook",
        "datatype": "VARCHAR",
        "primaryKey": false,
        "required": false,
        "description": "Optional reference to a specific webhook for per-webhook configuration overrides. Leave empty for tenant-level or global configurations.",
        "defaultvalue": "NULL",
        "example": "",
        "autoIncrement": false,
        "maxLength": "32",
        "array": false,
        "isPII": "",
        "secret": false,
        "create": true,
        "update": true,
        "get": true,
        "list": true,
        "relationship": "one",
        "parentRelationship": "webhook_config",
        "childRelationship": "",
        "meta": {
          "kind": "string",
          "maxLength": 32
        }
      },
      "type": "one",
      "complex": true
    },
    {
      "name": "webhook_authtype",
      "parentTable": "webhook",
      "parentColumn": {
        "name": "id",
        "type": "string",
        "childRelationshipType": "Authtype",
        "parentRelationshipType": "",
        "datatype": "VARCHAR",
        "primaryKey": true,
        "required": true,
        "description": "Unique identifier for the webhook endpoint. Auto-generated UUID that serves as the primary key for webhook configuration management.",
        "defaultvalue": "",
        "example": "",
        "autoIncrement": false,
        "maxLength": "32",
        "minLength": "10",
        "array": false,
        "isPII": "",
        "secret": false,
        "create": true,
        "update": true,
        "get": true,
        "list": true,
        "parentRelationship": "",
        "childRelationship": "webhook_config, webhook_authtype",
        "meta": {
          "kind": "string",
          "minLength": 10,
          "maxLength": 32
        }
      },
      "childTable": "authtype",
      "childColumn": {
        "name": "webhook_id",
        "type": "string",
        "childRelationshipType": "",
        "parentRelationshipType": "Webhook",
        "datatype": "VARCHAR",
        "primaryKey": false,
        "required": true,
        "description": "Unique identifier for the webhook endpoint. Auto-generated UUID that serves as the primary key for webhook configuration management.",
        "defaultvalue": "",
        "example": "",
        "autoIncrement": false,
        "maxLength": "32",
        "minLength": "10",
        "array": false,
        "isPII": "",
        "secret": false,
        "create": true,
        "update": true,
        "get": true,
        "list": true,
        "relationship": "one",
        "parentRelationship": "webhook_authtype",
        "childRelationship": "",
        "meta": {
          "kind": "string",
          "minLength": 10,
          "maxLength": 32
        }
      },
      "type": "one",
      "complex": true
    }
  ],
  "documentation": {
    "name": "Core Webhook Configuration",
    "description": "# üß© Core Webhook Config ‚Äî General Overview\n\nThe **Core Webhook Config** service is part of the broader **Notification Bounded Context**, responsible for managing all configuration aspects required to send outbound webhooks within the platform. It provides the infrastructure and domain logic that connects a tenant‚Äôs webhook endpoints to the notification ecosystem, ensuring secure, structured, and compliant communication between services and external systems.\n\n---\n\n## üéØ Purpose\n\nThe primary purpose of **Core Webhook Config** is to manage the lifecycle of webhook-related configuration for each tenant. It defines *where*, *how*, and *under what conditions* webhook payloads are sent. By maintaining configurations in a domain-driven, event-sourced model, the service guarantees auditability, tenant isolation, and consistency across all webhook-related operations.\n\n---\n\n## üß± Architectural Role\n\n**Core Webhook Config** acts as the **configuration source of truth** for all webhook integrations in the system. It is not responsible for executing HTTP requests (that‚Äôs handled by the **Core Webhook Execute** service), but instead manages the metadata, headers, secrets, retry strategies, and operational policies that determine how webhooks are delivered and authorized.\n\n### Key Roles:\n\n* Acts as the *control plane* for webhook delivery configuration.\n* Provides secure storage and reference handling for signing secrets.\n* Defines approved target URLs and subscribed event types.\n* Publishes domain events consumed by other services (e.g., executors, auditors, or workflow engines).\n* Ensures compliance with audit and retry policies via event sourcing.\n\n---\n\n## ‚öôÔ∏è Core Components\n\n| Aggregate   | Description                                                                                                     |\n| ----------- | --------------------------------------------------------------------------------------------------------------- |\n| **Webhook** | Represents an outbound webhook endpoint, including target URL, subscribed event types, HTTP method, and status. |\n| **Config**  | Defines retry/backoff strategies, timeout settings, and operational parameters controlling webhook execution.   |\n\nEach aggregate is event-sourced and projected into Redis for fast reads. The system follows a **CQRS pattern**, separating command writes (EventStoreDB) from queries (Redis projections).\n\n---\n\n## üß© Data Flow Summary\n\n```\n[API Command] ‚Üí [Use Case] ‚Üí [ESDB Writer Repository] ‚Üí [EventStoreDB]\n       ‚Üì\n[Central Projection Service] ‚Üí [Redis Snapshot] + [Redis Query Index]\n       ‚Üì\n[Query API] ‚Üí [Executor / UI / Workflow Consumers]\n```\n\nThis architecture provides full event auditability in **EventStoreDB**, real-time read performance in **Redis**, and flexible event-driven synchronization via **BullMQ** projectors.\n\n---\n\n## üõ°Ô∏è Security and Compliance\n\n* **Authentication:** Managed via Keycloak (OAuth2 / OpenID Connect).\n* **Authorization:** Governed by Open Policy Agent (OPA) Rego policies.\n* **Secret Management:** Signing secrets are stored securely using Doppler or another approved secret manager.\n* **Auditability:** Every configuration change emits domain events stored in EventStoreDB, ensuring immutable history and traceability.\n\n---\n\n## üöÄ Example Use Cases\n\n| Use Case                 | Description                                                                                                         |\n| ------------------------ | ------------------------------------------------------------------------------------------------------------------- |\n| **Webhook Registration** | When a new webhook is added for a tenant, `WebhookRegistered.v1` and `ConfigUpdated.v1` events are emitted.         |\n| **Retry Policy Update**  | Admins can update retry and timeout parameters, triggering `ConfigUpdated.v1` for executor synchronization.         |\n| **Secret Rotation**      | When a signing secret is rotated, the service emits a new versioned event and updates downstream projections.       |\n| **Subscription Change**  | Tenants can modify the event types their webhook subscribes to, updating routing and executor behavior dynamically. |\n\n---\n\n## ‚úÖ Benefits\n\n* **Event-Sourced Reliability:** Every change is versioned, replayable, and fully auditable.\n* **Tenant Isolation:** Each webhook configuration is scoped to a tenant.\n* **High Performance:** Read models are served from Redis with millisecond-level latency.\n* **Extensible Design:** Supports additional delivery settings (e.g., per-event policies, delivery headers) in future iterations.\n* **Integration Friendly:** Provides consistent event naming and structure compatible with other notification channels (Slack, Email, SMS).\n\n---\n\n## üß© Summary\n\nThe **Core Webhook Config** service provides the configuration backbone for all webhook-based notifications. It ensures that every outbound webhook:\n\n* Is securely configured and authorized.\n* Uses approved and auditable endpoints.\n* Follows consistent retry and timeout policies.\n* Operates under event-sourced, tenant-aware control.\n\nThis service is a critical component of the Notification Bounded Context, enabling scalable, reliable, and compliant webhook integration within a modern, event-driven architecture.\n"
  }
}