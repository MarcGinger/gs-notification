// @generated by gen v1.0.0 hash:regen
// REMOVE THIS COMMENT TO STOP AUTOMATIC UPDATES TO THIS BLOCK

import { Module } from '@nestjs/common';
import { AttributesSharedModule } from '../attributes-shared.module';
import { AttributeRuleController } from './interface/http/controllers';
import {
  AttributeRuleApplicationService,
  AttributeRuleAuthorizationService,
  AttributeRuleAuthorizationAdapter,
} from './application/services';
import {
  IUpsertAttributeRuleUseCase,
  UpsertAttributeRuleUseCase,
  IDeleteAttributeRuleUseCase,
  DeleteAttributeRuleUseCase,
  IGetAttributeRuleUseCase,
  GetAttributeRuleUseCase,
  IListAttributeRuleUseCase,
  ListAttributeRuleUseCase,
} from './application/use-cases';

// import { IAttributeRuleRepository } from './application/ports';
import {
  AttributeRuleQueryRepository,
  AttributeRuleReaderRepository,
  AttributeRuleWriterRepository,
} from './infrastructure/repositories';

// Tokens for injection - imported directly from port files
import {
  ATTRIBUTE_RULE_READER_TOKEN,
  ATTRIBUTE_RULE_WRITER_TOKEN,
  ATTRIBUTE_RULE_QUERY_TOKEN,
} from './application/ports';
@Module({
  imports: [
    AttributesSharedModule, // Provides all common infrastructure and services
  ],
  controllers: [AttributeRuleController],
  providers: [
    // Repository implementations with tokens (before services that depend on them)
    {
      provide: ATTRIBUTE_RULE_READER_TOKEN,
      useClass: AttributeRuleReaderRepository,
    },
    {
      provide: ATTRIBUTE_RULE_WRITER_TOKEN,
      useClass: AttributeRuleWriterRepository,
    },
    {
      provide: ATTRIBUTE_RULE_QUERY_TOKEN,
      useClass: AttributeRuleQueryRepository,
    },

    // Services that depend on repositories
    AttributeRuleApplicationService,
    AttributeRuleAuthorizationService,
    AttributeRuleAuthorizationAdapter,

    // Use case implementations
    {
      provide: IUpsertAttributeRuleUseCase,
      useClass: UpsertAttributeRuleUseCase,
    },
    {
      provide: IDeleteAttributeRuleUseCase,
      useClass: DeleteAttributeRuleUseCase,
    },
    {
      provide: IGetAttributeRuleUseCase,
      useClass: GetAttributeRuleUseCase,
    },
    {
      provide: IListAttributeRuleUseCase,
      useClass: ListAttributeRuleUseCase,
    },
  ],
  exports: [
    // Repository tokens for external module consumption
    ATTRIBUTE_RULE_READER_TOKEN,
    ATTRIBUTE_RULE_WRITER_TOKEN,
    ATTRIBUTE_RULE_QUERY_TOKEN,
  ],
})
export class AttributeRuleModule {}
