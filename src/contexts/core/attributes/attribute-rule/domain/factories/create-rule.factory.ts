// @generated by gen v1.0.0 hash:regen
// REMOVE THIS COMMENT TO STOP AUTOMATIC UPDATES TO THIS BLOCK

import { DomainError, Result, err, withContext } from 'src/shared/errors';
import { EventMetadata } from 'src/shared/domain/events';
import { CreateRuleProps } from '../props';
import {
  AttributeRuleRuleConfiguration,
  RuleCode,
  RuleName,
  RuleDescription,
  createRuleType,
  RuleReference,
  RuleReserved,
  RuleUnique,
  RuleUniqueError,
  RuleRequired,
  RuleRequiredError,
  RuleRegex,
  RuleRegexError,
  createRuleConfiguration,
} from '../value-objects';

/**
 * Factory for creating rule configuration with comprehensive validation
 */
export function createRuleConfigurationFromProps(
  ruleProps: CreateRuleProps,
  metadata: EventMetadata,
): Result<AttributeRuleRuleConfiguration, DomainError> {
  // Create rule value objects
  const ruleCodeResult = RuleCode.from(ruleProps.code);
  if (!ruleCodeResult.ok) {
    return err(
      withContext(ruleCodeResult.error, {
        ...ruleCodeResult.error.context,
        correlationId: metadata.correlationId,
        userId: metadata.userId,
        operation: 'create_rule_configuration',
        code: ruleProps.code,
      }),
    );
  }

  const ruleNameResult = RuleName.from(ruleProps.name);
  if (!ruleNameResult.ok) {
    return err(
      withContext(ruleNameResult.error, {
        ...ruleNameResult.error.context,
        correlationId: metadata.correlationId,
        userId: metadata.userId,
        operation: 'create_rule_configuration',
        name: ruleProps.name,
      }),
    );
  }

  const ruleDescriptionResult = RuleDescription.from(ruleProps.description);
  if (!ruleDescriptionResult.ok) {
    return err(
      withContext(ruleDescriptionResult.error, {
        ...ruleDescriptionResult.error.context,
        correlationId: metadata.correlationId,
        userId: metadata.userId,
        operation: 'create_rule_configuration',
        description: ruleProps.description,
      }),
    );
  }

  const ruleTypeResult = createRuleType(ruleProps.type);
  if (!ruleTypeResult.ok) {
    return err(
      withContext(ruleTypeResult.error, {
        ...ruleTypeResult.error.context,
        correlationId: metadata.correlationId,
        userId: metadata.userId,
        operation: 'create_rule_configuration',
        type: ruleProps.type,
      }),
    );
  }

  const ruleReferenceResult = RuleReference.from(ruleProps.reference);
  if (!ruleReferenceResult.ok) {
    return err(
      withContext(ruleReferenceResult.error, {
        ...ruleReferenceResult.error.context,
        correlationId: metadata.correlationId,
        userId: metadata.userId,
        operation: 'create_rule_configuration',
        reference: ruleProps.reference,
      }),
    );
  }

  const ruleReservedResult = RuleReserved.from(ruleProps.reserved);
  if (!ruleReservedResult.ok) {
    return err(
      withContext(ruleReservedResult.error, {
        ...ruleReservedResult.error.context,
        correlationId: metadata.correlationId,
        userId: metadata.userId,
        operation: 'create_rule_configuration',
        reserved: ruleProps.reserved,
      }),
    );
  }

  const ruleUniqueResult = RuleUnique.from(ruleProps.unique);
  if (!ruleUniqueResult.ok) {
    return err(
      withContext(ruleUniqueResult.error, {
        ...ruleUniqueResult.error.context,
        correlationId: metadata.correlationId,
        userId: metadata.userId,
        operation: 'create_rule_configuration',
        unique: ruleProps.unique,
      }),
    );
  }

  const ruleUniqueErrorResult = RuleUniqueError.from(ruleProps.uniqueError);
  if (!ruleUniqueErrorResult.ok) {
    return err(
      withContext(ruleUniqueErrorResult.error, {
        ...ruleUniqueErrorResult.error.context,
        correlationId: metadata.correlationId,
        userId: metadata.userId,
        operation: 'create_rule_configuration',
        uniqueError: ruleProps.uniqueError,
      }),
    );
  }

  const ruleRequiredResult = RuleRequired.from(ruleProps.required);
  if (!ruleRequiredResult.ok) {
    return err(
      withContext(ruleRequiredResult.error, {
        ...ruleRequiredResult.error.context,
        correlationId: metadata.correlationId,
        userId: metadata.userId,
        operation: 'create_rule_configuration',
        required: ruleProps.required,
      }),
    );
  }

  const ruleRequiredErrorResult = RuleRequiredError.from(
    ruleProps.requiredError,
  );
  if (!ruleRequiredErrorResult.ok) {
    return err(
      withContext(ruleRequiredErrorResult.error, {
        ...ruleRequiredErrorResult.error.context,
        correlationId: metadata.correlationId,
        userId: metadata.userId,
        operation: 'create_rule_configuration',
        requiredError: ruleProps.requiredError,
      }),
    );
  }

  const ruleRegexResult = RuleRegex.from(ruleProps.regex);
  if (!ruleRegexResult.ok) {
    return err(
      withContext(ruleRegexResult.error, {
        ...ruleRegexResult.error.context,
        correlationId: metadata.correlationId,
        userId: metadata.userId,
        operation: 'create_rule_configuration',
        regex: ruleProps.regex,
      }),
    );
  }

  const ruleRegexErrorResult = RuleRegexError.from(ruleProps.regexError);
  if (!ruleRegexErrorResult.ok) {
    return err(
      withContext(ruleRegexErrorResult.error, {
        ...ruleRegexErrorResult.error.context,
        correlationId: metadata.correlationId,
        userId: metadata.userId,
        operation: 'create_rule_configuration',
        regexError: ruleProps.regexError,
      }),
    );
  }

  const ruleResult = createRuleConfiguration({
    code: ruleCodeResult.value,
    name: ruleNameResult.value,
    description: ruleDescriptionResult.value,
    type: ruleTypeResult.value,
    reference: ruleReferenceResult.value,
    reserved: ruleReservedResult.value,
    unique: ruleUniqueResult.value,
    uniqueError: ruleUniqueErrorResult.value,
    required: ruleRequiredResult.value,
    requiredError: ruleRequiredErrorResult.value,
    regex: ruleRegexResult.value,
    regexError: ruleRegexErrorResult.value,
  });
  if (!ruleResult.ok) {
    return err(
      withContext(ruleResult.error, {
        ...ruleResult.error.context,
        correlationId: metadata.correlationId,
        userId: metadata.userId,
        operation: 'create_rule_configuration',
        rule: ruleProps,
      }),
    );
  }

  return ruleResult;
}
