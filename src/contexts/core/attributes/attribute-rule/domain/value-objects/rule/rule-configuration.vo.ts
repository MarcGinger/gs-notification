// @generated by gen v1.0.0 hash:regen
// REMOVE THIS COMMENT TO STOP AUTOMATIC UPDATES TO THIS BLOCK

import {
  RecordVOInstance,
  createRecordVO,
  createRecordVOErrors,
} from 'src/shared/domain/value-objects';
import { RuleErrors } from '../../errors/rule.errors';
import { RuleProps } from '../../props';
import {
  RuleCode,
  RuleDescription,
  RuleName,
  RuleReference,
  RuleRegex,
  RuleRegexError,
  RuleRequired,
  RuleRequiredError,
  RuleReserved,
  RuleType,
  RuleUnique,
  RuleUniqueError,
} from './';

/**
 * AttributeRuleRuleConfiguration Value Object
 *
 * Embedded configuration for rule settings specific to a rule.
 * This is owned by the Rule aggregate and not shared across rule.
 * Replaces the separate AttributeRuleRuleConfigurationAggregate for rule-owned configurations.
 *
 * Composed of individual value objects for each field to ensure
 * proper validation and separation of concerns.
 */
export const AttributeRuleRuleConfiguration = createRecordVO({
  name: 'AttributeRuleRuleConfiguration',

  // JSON key validation - must start with letter/underscore, contain only alphanumeric, underscore
  keyPattern: /^[a-zA-Z_][a-zA-Z0-9_]*$/,

  // Basic validation will be handled at the application level
  // Advanced validation can be added via refinements if needed
  errors: createRecordVOErrors(
    RuleErrors.INVALID_RULE_CONFIGURATION_DATA,
    'AttributeRuleRuleConfiguration',
  ),
});

/** Public instance type for AttributeRuleRuleConfiguration */
export type AttributeRuleRuleConfiguration = RecordVOInstance;

// Convenience creators using composed value objects
export const createRuleConfiguration = (config: {
  code: RuleCode;
  name: RuleName;
  description: RuleDescription;
  type: RuleType;
  reference: RuleReference;
  reserved: RuleReserved;
  unique: RuleUnique;
  uniqueError: RuleUniqueError;
  required: RuleRequired;
  requiredError: RuleRequiredError;
  regex: RuleRegex;
  regexError: RuleRegexError;
}) => AttributeRuleRuleConfiguration.create(config);

export const ruleConfigurationFrom = (v: unknown) =>
  AttributeRuleRuleConfiguration.from(v);

/**
 * Converts AttributeRuleRuleConfiguration to Record<string, RuleProps>
 */
export const ruleConfigurationToSnapshotProps = (
  config: AttributeRuleRuleConfiguration,
): Record<string, RuleProps> => {
  return config.value as unknown as Record<string, RuleProps>;
};
