// @generated by gen v1.0.0 hash:regen
// REMOVE THIS COMMENT TO STOP AUTOMATIC UPDATES TO THIS BLOCK

import { DocumentBuilder, SwaggerModule } from '@nestjs/swagger';
import { INestApplication } from '@nestjs/common';
import { SwaggerConfigUtil } from 'src/docs/swagger-config.util';
import { AttributeRuleModule } from '../attribute-rule.module';
import { DetailRuleResponse } from '../application/dtos';

/**
 * Rule Documentation
 * This module handles the Swagger documentation for rules
 * including Rule attributes and configurations.
 */
export class RuleDocumentation {
  static setup(app: INestApplication, port: string | number): void {
    const config = new DocumentBuilder()
      .addBearerAuth(
        { type: 'http', scheme: 'bearer', bearerFormat: 'JWT' },
        'bearer',
      )
      .setTitle('üì± Rule Management API')
      .setDescription(
        `
## bounded context: core
[‚Üê Back to documentation](/api/docs/core)

### application: attributes
[‚Üê Back to documentation](/api/docs/core/attributes)
  | Parent |
  |--------|
  | [**‚Üê AttributeRule**](/api/docs/core/attributes/attribute-rule) |

`,
      )
      .setVersion('1.0.0')
      .addTag('Rule', `Configuration for rule table`);

    // Add dynamic server configuration
    SwaggerConfigUtil.addServers(config, port);

    const document = SwaggerModule.createDocument(app, config.build(), {
      include: [AttributeRuleModule],
      extraModels: [DetailRuleResponse],
    });

    SwaggerModule.setup('api/docs/core/attributes/rule', app, document);
  }

  static getEndpoint(port: string | number): string {
    return `${SwaggerConfigUtil.getServerUrl(port)}/api/docs/core/attributes/rule`;
  }
}
