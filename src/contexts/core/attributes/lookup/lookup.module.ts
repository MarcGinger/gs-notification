// @generated by gen v1.0.0 hash:regen
// REMOVE THIS COMMENT TO STOP AUTOMATIC UPDATES TO THIS BLOCK

import { Module } from '@nestjs/common';
import { AttributesSharedModule } from '../attributes-shared.module';
import { LookupController } from './interface/http/controllers';
import {
  LookupApplicationService,
  LookupAuthorizationService,
  LookupAuthorizationAdapter,
  LookupForeignKeyValidatorService,
} from './application/services';
import {
  IUpsertLookupUseCase,
  UpsertLookupUseCase,
  IDeleteLookupUseCase,
  DeleteLookupUseCase,
  IGetLookupUseCase,
  GetLookupUseCase,
} from './application/use-cases';

// import { ILookupRepository } from './application/ports';
import {
  LookupQueryRepository,
  LookupReaderRepository,
  LookupWriterRepository,
  AttributeRuleReaderRepository,
} from './infrastructure/repositories';

// Tokens for injection - imported directly from port files
import {
  LOOKUP_READER_TOKEN,
  LOOKUP_WRITER_TOKEN,
  ATTRIBUTE_RULE_REFERENCE_READER_TOKEN,
  LOOKUP_QUERY_TOKEN,
} from './application/ports';
@Module({
  imports: [
    AttributesSharedModule, // Provides all common infrastructure and services
  ],
  controllers: [LookupController],
  providers: [
    // Repository implementations with tokens (before services that depend on them)
    {
      provide: LOOKUP_READER_TOKEN,
      useClass: LookupReaderRepository,
    },
    {
      provide: LOOKUP_WRITER_TOKEN,
      useClass: LookupWriterRepository,
    },
    {
      provide: LOOKUP_QUERY_TOKEN,
      useClass: LookupQueryRepository,
    },

    // Bounded Context Reader Repositories
    {
      provide: ATTRIBUTE_RULE_REFERENCE_READER_TOKEN,
      useClass: AttributeRuleReaderRepository,
    },

    // Services that depend on repositories
    LookupApplicationService,
    LookupAuthorizationService,
    LookupAuthorizationAdapter,
    LookupForeignKeyValidatorService,

    // Use case implementations
    {
      provide: IUpsertLookupUseCase,
      useClass: UpsertLookupUseCase,
    },
    {
      provide: IDeleteLookupUseCase,
      useClass: DeleteLookupUseCase,
    },
    {
      provide: IGetLookupUseCase,
      useClass: GetLookupUseCase,
    },
  ],
  exports: [
    // Repository tokens for external module consumption
    LOOKUP_READER_TOKEN,
    LOOKUP_WRITER_TOKEN,
    LOOKUP_QUERY_TOKEN,
    // Bounded Context Reader tokens
    ATTRIBUTE_RULE_REFERENCE_READER_TOKEN,
  ],
})
export class LookupModule {}
