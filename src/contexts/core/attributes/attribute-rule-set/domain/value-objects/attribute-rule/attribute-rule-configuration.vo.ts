// @generated by gen v1.0.0 hash:regen
// REMOVE THIS COMMENT TO STOP AUTOMATIC UPDATES TO THIS BLOCK

import {
  RecordVOInstance,
  createRecordVO,
  createRecordVOErrors,
} from 'src/shared/domain/value-objects';
import { AttributeRuleErrors } from '../../errors/attribute-rule.errors';
import { AttributeRuleProps } from '../../props';

/**
 * AttributeRuleSetAttributeRuleConfiguration Value Object
 *
 * Embedded configuration for attribute_rule settings specific to an attribute_rule.
 * This is owned by the AttributeRule aggregate and not shared across attribute_rule.
 * Uses createRecordVO with allowEmpty: true to preserve Record<string, AttributeRuleProps> structure.
 *
 * The key insight is that allowEmpty: true allows empty objects, and the RecordVO
 * preserves the Record structure in its .value property without expanding it.
 */
export const AttributeRuleSetAttributeRuleConfiguration = createRecordVO({
  name: 'AttributeRuleSetAttributeRuleConfiguration',

  allowEmpty: true,

  // Basic validation will be handled at the application level
  // Advanced validation can be added via refinements if needed
  errors: createRecordVOErrors(
    AttributeRuleErrors.INVALID_ATTRIBUTE_RULE_CONFIGURATION_DATA,
    'AttributeRuleSetAttributeRuleConfiguration',
  ),
});

/** Public instance type for AttributeRuleSetAttributeRuleConfiguration */
export type AttributeRuleSetAttributeRuleConfiguration = RecordVOInstance;

/**
 * Converts AttributeRuleSetAttributeRuleConfiguration to Record<string, AttributeRuleProps>
 * for persistence. The RecordVO stores the data as Record<string, unknown> so we cast it.
 */
export const attributeRuleConfigurationToSnapshotProps = (
  config: AttributeRuleSetAttributeRuleConfiguration,
): Record<string, AttributeRuleProps> => {
  // The RecordVO.value returns Record<string, unknown>, but we know it's AttributeRuleProps
  return config.value as Record<string, AttributeRuleProps>;
};
