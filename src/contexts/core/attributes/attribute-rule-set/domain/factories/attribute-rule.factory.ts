// @generated by gen v1.0.0 hash:regen
// REMOVE THIS COMMENT TO STOP AUTOMATIC UPDATES TO THIS BLOCK

import { DomainError, Result, err, withContext } from 'src/shared/errors';
import { EventMetadata } from 'src/shared/domain/events';
import { CreateAttributeRuleProps, UpdateAttributeRuleProps } from '../props';
import {
  AttributeRuleCode,
  AttributeRuleName,
  AttributeRuleDescription,
  createAttributeRuleType,
  AttributeRuleReference,
  AttributeRuleReserved,
  AttributeRuleUnique,
  AttributeRuleUniqueError,
  AttributeRuleRequired,
  AttributeRuleRequiredError,
  AttributeRuleRegex,
  AttributeRuleRegexError,
  AttributeRuleSetAttributeRuleConfiguration,
} from '../value-objects';

/**
 * Factory for creating attributeRule configuration with comprehensive validation
 */

export function createAttributeRuleConfigurationFromProps(
  attributeRuleProps: CreateAttributeRuleProps,
  metadata: EventMetadata,
): Result<AttributeRuleSetAttributeRuleConfiguration, DomainError> {
  // Create attributeRule value objects
  const attributeRuleCodeResult = AttributeRuleCode.from(
    attributeRuleProps.code,
  );
  if (!attributeRuleCodeResult.ok) {
    return err(
      withContext(attributeRuleCodeResult.error, {
        ...attributeRuleCodeResult.error.context,
        correlationId: metadata.correlationId,
        userId: metadata.userId,
        operation: 'create_attribute_rule_configuration',
        code: attributeRuleProps.code,
      }),
    );
  }

  const attributeRuleNameResult = AttributeRuleName.from(
    attributeRuleProps.name,
  );
  if (!attributeRuleNameResult.ok) {
    return err(
      withContext(attributeRuleNameResult.error, {
        ...attributeRuleNameResult.error.context,
        correlationId: metadata.correlationId,
        userId: metadata.userId,
        operation: 'create_attribute_rule_configuration',
        name: attributeRuleProps.name,
      }),
    );
  }

  const attributeRuleDescriptionResult = AttributeRuleDescription.from(
    attributeRuleProps.description,
  );
  if (!attributeRuleDescriptionResult.ok) {
    return err(
      withContext(attributeRuleDescriptionResult.error, {
        ...attributeRuleDescriptionResult.error.context,
        correlationId: metadata.correlationId,
        userId: metadata.userId,
        operation: 'create_attribute_rule_configuration',
        description: attributeRuleProps.description,
      }),
    );
  }

  const attributeRuleTypeResult = createAttributeRuleType(
    attributeRuleProps.type,
  );
  if (!attributeRuleTypeResult.ok) {
    return err(
      withContext(attributeRuleTypeResult.error, {
        ...attributeRuleTypeResult.error.context,
        correlationId: metadata.correlationId,
        userId: metadata.userId,
        operation: 'create_attribute_rule_configuration',
        type: attributeRuleProps.type,
      }),
    );
  }

  const attributeRuleReferenceResult = AttributeRuleReference.from(
    attributeRuleProps.reference,
  );
  if (!attributeRuleReferenceResult.ok) {
    return err(
      withContext(attributeRuleReferenceResult.error, {
        ...attributeRuleReferenceResult.error.context,
        correlationId: metadata.correlationId,
        userId: metadata.userId,
        operation: 'create_attribute_rule_configuration',
        reference: attributeRuleProps.reference,
      }),
    );
  }

  const attributeRuleReservedResult = AttributeRuleReserved.from(
    attributeRuleProps.reserved,
  );
  if (!attributeRuleReservedResult.ok) {
    return err(
      withContext(attributeRuleReservedResult.error, {
        ...attributeRuleReservedResult.error.context,
        correlationId: metadata.correlationId,
        userId: metadata.userId,
        operation: 'create_attribute_rule_configuration',
        reserved: attributeRuleProps.reserved,
      }),
    );
  }

  const attributeRuleUniqueResult = AttributeRuleUnique.from(
    attributeRuleProps.unique,
  );
  if (!attributeRuleUniqueResult.ok) {
    return err(
      withContext(attributeRuleUniqueResult.error, {
        ...attributeRuleUniqueResult.error.context,
        correlationId: metadata.correlationId,
        userId: metadata.userId,
        operation: 'create_attribute_rule_configuration',
        unique: attributeRuleProps.unique,
      }),
    );
  }

  const attributeRuleUniqueErrorResult = AttributeRuleUniqueError.from(
    attributeRuleProps.uniqueError,
  );
  if (!attributeRuleUniqueErrorResult.ok) {
    return err(
      withContext(attributeRuleUniqueErrorResult.error, {
        ...attributeRuleUniqueErrorResult.error.context,
        correlationId: metadata.correlationId,
        userId: metadata.userId,
        operation: 'create_attribute_rule_configuration',
        uniqueError: attributeRuleProps.uniqueError,
      }),
    );
  }

  const attributeRuleRequiredResult = AttributeRuleRequired.from(
    attributeRuleProps.required,
  );
  if (!attributeRuleRequiredResult.ok) {
    return err(
      withContext(attributeRuleRequiredResult.error, {
        ...attributeRuleRequiredResult.error.context,
        correlationId: metadata.correlationId,
        userId: metadata.userId,
        operation: 'create_attribute_rule_configuration',
        required: attributeRuleProps.required,
      }),
    );
  }

  const attributeRuleRequiredErrorResult = AttributeRuleRequiredError.from(
    attributeRuleProps.requiredError,
  );
  if (!attributeRuleRequiredErrorResult.ok) {
    return err(
      withContext(attributeRuleRequiredErrorResult.error, {
        ...attributeRuleRequiredErrorResult.error.context,
        correlationId: metadata.correlationId,
        userId: metadata.userId,
        operation: 'create_attribute_rule_configuration',
        requiredError: attributeRuleProps.requiredError,
      }),
    );
  }

  const attributeRuleRegexResult = AttributeRuleRegex.from(
    attributeRuleProps.regex,
  );
  if (!attributeRuleRegexResult.ok) {
    return err(
      withContext(attributeRuleRegexResult.error, {
        ...attributeRuleRegexResult.error.context,
        correlationId: metadata.correlationId,
        userId: metadata.userId,
        operation: 'create_attribute_rule_configuration',
        regex: attributeRuleProps.regex,
      }),
    );
  }

  const attributeRuleRegexErrorResult = AttributeRuleRegexError.from(
    attributeRuleProps.regexError,
  );
  if (!attributeRuleRegexErrorResult.ok) {
    return err(
      withContext(attributeRuleRegexErrorResult.error, {
        ...attributeRuleRegexErrorResult.error.context,
        correlationId: metadata.correlationId,
        userId: metadata.userId,
        operation: 'create_attribute_rule_configuration',
        regexError: attributeRuleProps.regexError,
      }),
    );
  }

  const attributeRuleResult = AttributeRuleSetAttributeRuleConfiguration.from({
    code: attributeRuleCodeResult.value.value,
    name: attributeRuleNameResult.value.value,
    description: attributeRuleDescriptionResult.value.value,
    type: attributeRuleTypeResult.value.value,
    reference: attributeRuleReferenceResult.value.value,
    reserved: attributeRuleReservedResult.value.value,
    unique: attributeRuleUniqueResult.value.value,
    uniqueError: attributeRuleUniqueErrorResult.value.value,
    required: attributeRuleRequiredResult.value.value,
    requiredError: attributeRuleRequiredErrorResult.value.value,
    regex: attributeRuleRegexResult.value.value,
    regexError: attributeRuleRegexErrorResult.value.value,
  });
  if (!attributeRuleResult.ok) {
    return err(
      withContext(attributeRuleResult.error, {
        ...attributeRuleResult.error.context,
        correlationId: metadata.correlationId,
        userId: metadata.userId,
        operation: 'create_attribute_rule_configuration',
        attributeRule: attributeRuleProps,
      }),
    );
  }

  return attributeRuleResult;
}

/**
 * Factory for updating attributeRule configuration with comprehensive validation
 * Merges new attributeRule with existing ones (PATCH behavior)
 */
export function updateAttributeRuleConfigurationFromProps(
  attributeRuleProps: UpdateAttributeRuleProps,
  metadata: EventMetadata,
  existingAttributeRule?: AttributeRuleSetAttributeRuleConfiguration,
): Result<AttributeRuleSetAttributeRuleConfiguration, DomainError> {
  // Start with existing attributeRule as base, or empty object if none exist
  const configObject: Record<string, unknown> = existingAttributeRule
    ? { ...existingAttributeRule.value }
    : {};
  // Validate and add each provided field
  if (attributeRuleProps.code !== undefined) {
    const attributeRuleCodeResult = AttributeRuleCode.from(
      attributeRuleProps.code,
    );
    if (!attributeRuleCodeResult.ok) {
      return err(
        withContext(attributeRuleCodeResult.error, {
          ...attributeRuleCodeResult.error.context,
          correlationId: metadata.correlationId,
          userId: metadata.userId,
          operation: 'update_attribute_rule_configuration',
          code: attributeRuleProps.code,
        }),
      );
    }
    configObject.code = attributeRuleCodeResult.value.value;
  }

  if (attributeRuleProps.name !== undefined) {
    const attributeRuleNameResult = AttributeRuleName.from(
      attributeRuleProps.name,
    );
    if (!attributeRuleNameResult.ok) {
      return err(
        withContext(attributeRuleNameResult.error, {
          ...attributeRuleNameResult.error.context,
          correlationId: metadata.correlationId,
          userId: metadata.userId,
          operation: 'update_attribute_rule_configuration',
          name: attributeRuleProps.name,
        }),
      );
    }
    configObject.name = attributeRuleNameResult.value.value;
  }

  if (attributeRuleProps.description !== undefined) {
    const attributeRuleDescriptionResult = AttributeRuleDescription.from(
      attributeRuleProps.description,
    );
    if (!attributeRuleDescriptionResult.ok) {
      return err(
        withContext(attributeRuleDescriptionResult.error, {
          ...attributeRuleDescriptionResult.error.context,
          correlationId: metadata.correlationId,
          userId: metadata.userId,
          operation: 'update_attribute_rule_configuration',
          description: attributeRuleProps.description,
        }),
      );
    }
    configObject.description = attributeRuleDescriptionResult.value.value;
  }

  if (attributeRuleProps.type !== undefined) {
    const attributeRuleTypeResult = createAttributeRuleType(
      attributeRuleProps.type,
    );
    if (!attributeRuleTypeResult.ok) {
      return err(
        withContext(attributeRuleTypeResult.error, {
          ...attributeRuleTypeResult.error.context,
          correlationId: metadata.correlationId,
          userId: metadata.userId,
          operation: 'update_attribute_rule_configuration',
          type: attributeRuleProps.type,
        }),
      );
    }
    configObject.type = attributeRuleTypeResult.value.value;
  }

  if (attributeRuleProps.reference !== undefined) {
    const attributeRuleReferenceResult = AttributeRuleReference.from(
      attributeRuleProps.reference,
    );
    if (!attributeRuleReferenceResult.ok) {
      return err(
        withContext(attributeRuleReferenceResult.error, {
          ...attributeRuleReferenceResult.error.context,
          correlationId: metadata.correlationId,
          userId: metadata.userId,
          operation: 'update_attribute_rule_configuration',
          reference: attributeRuleProps.reference,
        }),
      );
    }
    configObject.reference = attributeRuleReferenceResult.value.value;
  }

  if (attributeRuleProps.reserved !== undefined) {
    const attributeRuleReservedResult = AttributeRuleReserved.from(
      attributeRuleProps.reserved,
    );
    if (!attributeRuleReservedResult.ok) {
      return err(
        withContext(attributeRuleReservedResult.error, {
          ...attributeRuleReservedResult.error.context,
          correlationId: metadata.correlationId,
          userId: metadata.userId,
          operation: 'update_attribute_rule_configuration',
          reserved: attributeRuleProps.reserved,
        }),
      );
    }
    configObject.reserved = attributeRuleReservedResult.value.value;
  }

  if (attributeRuleProps.unique !== undefined) {
    const attributeRuleUniqueResult = AttributeRuleUnique.from(
      attributeRuleProps.unique,
    );
    if (!attributeRuleUniqueResult.ok) {
      return err(
        withContext(attributeRuleUniqueResult.error, {
          ...attributeRuleUniqueResult.error.context,
          correlationId: metadata.correlationId,
          userId: metadata.userId,
          operation: 'update_attribute_rule_configuration',
          unique: attributeRuleProps.unique,
        }),
      );
    }
    configObject.unique = attributeRuleUniqueResult.value.value;
  }

  if (attributeRuleProps.uniqueError !== undefined) {
    const attributeRuleUniqueErrorResult = AttributeRuleUniqueError.from(
      attributeRuleProps.uniqueError,
    );
    if (!attributeRuleUniqueErrorResult.ok) {
      return err(
        withContext(attributeRuleUniqueErrorResult.error, {
          ...attributeRuleUniqueErrorResult.error.context,
          correlationId: metadata.correlationId,
          userId: metadata.userId,
          operation: 'update_attribute_rule_configuration',
          uniqueError: attributeRuleProps.uniqueError,
        }),
      );
    }
    configObject.uniqueError = attributeRuleUniqueErrorResult.value.value;
  }

  if (attributeRuleProps.required !== undefined) {
    const attributeRuleRequiredResult = AttributeRuleRequired.from(
      attributeRuleProps.required,
    );
    if (!attributeRuleRequiredResult.ok) {
      return err(
        withContext(attributeRuleRequiredResult.error, {
          ...attributeRuleRequiredResult.error.context,
          correlationId: metadata.correlationId,
          userId: metadata.userId,
          operation: 'update_attribute_rule_configuration',
          required: attributeRuleProps.required,
        }),
      );
    }
    configObject.required = attributeRuleRequiredResult.value.value;
  }

  if (attributeRuleProps.requiredError !== undefined) {
    const attributeRuleRequiredErrorResult = AttributeRuleRequiredError.from(
      attributeRuleProps.requiredError,
    );
    if (!attributeRuleRequiredErrorResult.ok) {
      return err(
        withContext(attributeRuleRequiredErrorResult.error, {
          ...attributeRuleRequiredErrorResult.error.context,
          correlationId: metadata.correlationId,
          userId: metadata.userId,
          operation: 'update_attribute_rule_configuration',
          requiredError: attributeRuleProps.requiredError,
        }),
      );
    }
    configObject.requiredError = attributeRuleRequiredErrorResult.value.value;
  }

  if (attributeRuleProps.regex !== undefined) {
    const attributeRuleRegexResult = AttributeRuleRegex.from(
      attributeRuleProps.regex,
    );
    if (!attributeRuleRegexResult.ok) {
      return err(
        withContext(attributeRuleRegexResult.error, {
          ...attributeRuleRegexResult.error.context,
          correlationId: metadata.correlationId,
          userId: metadata.userId,
          operation: 'update_attribute_rule_configuration',
          regex: attributeRuleProps.regex,
        }),
      );
    }
    configObject.regex = attributeRuleRegexResult.value.value;
  }

  if (attributeRuleProps.regexError !== undefined) {
    const attributeRuleRegexErrorResult = AttributeRuleRegexError.from(
      attributeRuleProps.regexError,
    );
    if (!attributeRuleRegexErrorResult.ok) {
      return err(
        withContext(attributeRuleRegexErrorResult.error, {
          ...attributeRuleRegexErrorResult.error.context,
          correlationId: metadata.correlationId,
          userId: metadata.userId,
          operation: 'update_attribute_rule_configuration',
          regexError: attributeRuleProps.regexError,
        }),
      );
    }
    configObject.regexError = attributeRuleRegexErrorResult.value.value;
  }

  // Create the configuration from the validated fields
  const attributeRuleResult =
    AttributeRuleSetAttributeRuleConfiguration.from(configObject);
  if (!attributeRuleResult.ok) {
    return err(
      withContext(attributeRuleResult.error, {
        ...attributeRuleResult.error.context,
        correlationId: metadata.correlationId,
        userId: metadata.userId,
        operation: 'update_attribute_rule_configuration',
        attributeRule: attributeRuleProps,
      }),
    );
  }

  return attributeRuleResult;
}
