// @generated by gen v1.0.0 hash:regen
// REMOVE THIS COMMENT TO STOP AUTOMATIC UPDATES TO THIS BLOCK

import { DomainError, Result, err, withContext } from 'src/shared/errors';
import { EventMetadata } from 'src/shared/domain/events';
import { CreateAttributeRuleProps } from '../props';
import {
  AttributeRuleCode,
  AttributeRuleName,
  AttributeRuleDescription,
  createAttributeRuleType,
  AttributeRuleReference,
  AttributeRuleReserved,
  AttributeRuleUnique,
  AttributeRuleUniqueError,
  AttributeRuleRequired,
  AttributeRuleRequiredError,
  AttributeRuleRegex,
  AttributeRuleRegexError,
  AttributeRuleSetAttributeRuleConfiguration,
} from '../value-objects';

/**
 * Factory for creating attributeRule configuration with comprehensive validation
 */
export function createAttributeRuleConfigurationFromProps(
  attributeRuleProps: CreateAttributeRuleProps,
  metadata: EventMetadata,
): Result<AttributeRuleSetAttributeRuleConfiguration, DomainError> {
  // Create attributeRule value objects
  const attributeRuleCodeResult = AttributeRuleCode.from(
    attributeRuleProps.code,
  );
  if (!attributeRuleCodeResult.ok) {
    return err(
      withContext(attributeRuleCodeResult.error, {
        ...attributeRuleCodeResult.error.context,
        correlationId: metadata.correlationId,
        userId: metadata.userId,
        operation: 'create_attribute_rule_configuration',
        code: attributeRuleProps.code,
      }),
    );
  }

  const attributeRuleNameResult = AttributeRuleName.from(
    attributeRuleProps.name,
  );
  if (!attributeRuleNameResult.ok) {
    return err(
      withContext(attributeRuleNameResult.error, {
        ...attributeRuleNameResult.error.context,
        correlationId: metadata.correlationId,
        userId: metadata.userId,
        operation: 'create_attribute_rule_configuration',
        name: attributeRuleProps.name,
      }),
    );
  }

  const attributeRuleDescriptionResult = AttributeRuleDescription.from(
    attributeRuleProps.description,
  );
  if (!attributeRuleDescriptionResult.ok) {
    return err(
      withContext(attributeRuleDescriptionResult.error, {
        ...attributeRuleDescriptionResult.error.context,
        correlationId: metadata.correlationId,
        userId: metadata.userId,
        operation: 'create_attribute_rule_configuration',
        description: attributeRuleProps.description,
      }),
    );
  }

  const attributeRuleTypeResult = createAttributeRuleType(
    attributeRuleProps.type,
  );
  if (!attributeRuleTypeResult.ok) {
    return err(
      withContext(attributeRuleTypeResult.error, {
        ...attributeRuleTypeResult.error.context,
        correlationId: metadata.correlationId,
        userId: metadata.userId,
        operation: 'create_attribute_rule_configuration',
        type: attributeRuleProps.type,
      }),
    );
  }

  const attributeRuleReferenceResult = AttributeRuleReference.from(
    attributeRuleProps.reference,
  );
  if (!attributeRuleReferenceResult.ok) {
    return err(
      withContext(attributeRuleReferenceResult.error, {
        ...attributeRuleReferenceResult.error.context,
        correlationId: metadata.correlationId,
        userId: metadata.userId,
        operation: 'create_attribute_rule_configuration',
        reference: attributeRuleProps.reference,
      }),
    );
  }

  const attributeRuleReservedResult = AttributeRuleReserved.from(
    attributeRuleProps.reserved,
  );
  if (!attributeRuleReservedResult.ok) {
    return err(
      withContext(attributeRuleReservedResult.error, {
        ...attributeRuleReservedResult.error.context,
        correlationId: metadata.correlationId,
        userId: metadata.userId,
        operation: 'create_attribute_rule_configuration',
        reserved: attributeRuleProps.reserved,
      }),
    );
  }

  const attributeRuleUniqueResult = AttributeRuleUnique.from(
    attributeRuleProps.unique,
  );
  if (!attributeRuleUniqueResult.ok) {
    return err(
      withContext(attributeRuleUniqueResult.error, {
        ...attributeRuleUniqueResult.error.context,
        correlationId: metadata.correlationId,
        userId: metadata.userId,
        operation: 'create_attribute_rule_configuration',
        unique: attributeRuleProps.unique,
      }),
    );
  }

  const attributeRuleUniqueErrorResult = AttributeRuleUniqueError.from(
    attributeRuleProps.uniqueError,
  );
  if (!attributeRuleUniqueErrorResult.ok) {
    return err(
      withContext(attributeRuleUniqueErrorResult.error, {
        ...attributeRuleUniqueErrorResult.error.context,
        correlationId: metadata.correlationId,
        userId: metadata.userId,
        operation: 'create_attribute_rule_configuration',
        uniqueError: attributeRuleProps.uniqueError,
      }),
    );
  }

  const attributeRuleRequiredResult = AttributeRuleRequired.from(
    attributeRuleProps.required,
  );
  if (!attributeRuleRequiredResult.ok) {
    return err(
      withContext(attributeRuleRequiredResult.error, {
        ...attributeRuleRequiredResult.error.context,
        correlationId: metadata.correlationId,
        userId: metadata.userId,
        operation: 'create_attribute_rule_configuration',
        required: attributeRuleProps.required,
      }),
    );
  }

  const attributeRuleRequiredErrorResult = AttributeRuleRequiredError.from(
    attributeRuleProps.requiredError,
  );
  if (!attributeRuleRequiredErrorResult.ok) {
    return err(
      withContext(attributeRuleRequiredErrorResult.error, {
        ...attributeRuleRequiredErrorResult.error.context,
        correlationId: metadata.correlationId,
        userId: metadata.userId,
        operation: 'create_attribute_rule_configuration',
        requiredError: attributeRuleProps.requiredError,
      }),
    );
  }

  const attributeRuleRegexResult = AttributeRuleRegex.from(
    attributeRuleProps.regex,
  );
  if (!attributeRuleRegexResult.ok) {
    return err(
      withContext(attributeRuleRegexResult.error, {
        ...attributeRuleRegexResult.error.context,
        correlationId: metadata.correlationId,
        userId: metadata.userId,
        operation: 'create_attribute_rule_configuration',
        regex: attributeRuleProps.regex,
      }),
    );
  }

  const attributeRuleRegexErrorResult = AttributeRuleRegexError.from(
    attributeRuleProps.regexError,
  );
  if (!attributeRuleRegexErrorResult.ok) {
    return err(
      withContext(attributeRuleRegexErrorResult.error, {
        ...attributeRuleRegexErrorResult.error.context,
        correlationId: metadata.correlationId,
        userId: metadata.userId,
        operation: 'create_attribute_rule_configuration',
        regexError: attributeRuleProps.regexError,
      }),
    );
  }

  // Create a single attribute rule record and wrap it in the configuration
  const singleAttributeRecord: Record<string, CreateAttributeRuleProps> = {
    [attributeRuleCodeResult.value.value]: attributeRuleProps,
  };

  const attributeRuleResult = AttributeRuleSetAttributeRuleConfiguration.from(
    singleAttributeRecord,
  );
  if (!attributeRuleResult.ok) {
    return err(
      withContext(attributeRuleResult.error, {
        correlationId: metadata.correlationId,
        userId: metadata.userId,
        operation: 'create_attribute_rule_configuration',
        attributeRule: attributeRuleProps,
      }),
    );
  }

  return attributeRuleResult;
}
