// @generated by gen v1.0.0 hash:regen
// REMOVE THIS COMMENT TO STOP AUTOMATIC UPDATES TO THIS BLOCK

import { Module } from '@nestjs/common';
import { WebhookConfigSharedModule } from '../webhook-config-shared.module';
import { AuthController } from './interface/http/controllers';
import {
  AuthApplicationService,
  AuthAuthorizationService,
  AuthAuthorizationAdapter,
  AuthForeignKeyValidatorService,
} from './application/services';
import {
  IUpsertAuthUseCase,
  UpsertAuthUseCase,
  IGetAuthUseCase,
  GetAuthUseCase,
} from './application/use-cases';

// import { IAuthRepository } from './application/ports';
import {
  AuthQueryRepository,
  AuthReaderRepository,
  AuthWriterRepository,
  WorkspaceReaderRepository,
} from './infrastructure/repositories';

// Tokens for injection - imported directly from port files
import {
  AUTH_READER_TOKEN,
  AUTH_WRITER_TOKEN,
  WORKSPACE_REFERENCE_READER_TOKEN,
  AUTH_QUERY_TOKEN,
} from './application/ports';
@Module({
  imports: [
    WebhookConfigSharedModule, // Provides all common infrastructure and services
  ],
  controllers: [AuthController],
  providers: [
    // Repository implementations with tokens (before services that depend on them)
    {
      provide: AUTH_READER_TOKEN,
      useClass: AuthReaderRepository,
    },
    {
      provide: AUTH_WRITER_TOKEN,
      useClass: AuthWriterRepository,
    },
    {
      provide: AUTH_QUERY_TOKEN,
      useClass: AuthQueryRepository,
    },

    // Bounded Context Reader Repositories
    {
      provide: WORKSPACE_REFERENCE_READER_TOKEN,
      useClass: WorkspaceReaderRepository,
    },

    // Services that depend on repositories
    AuthApplicationService,
    AuthAuthorizationService,
    AuthAuthorizationAdapter,
    AuthForeignKeyValidatorService,

    // Use case implementations
    {
      provide: IUpsertAuthUseCase,
      useClass: UpsertAuthUseCase,
    },
    {
      provide: IGetAuthUseCase,
      useClass: GetAuthUseCase,
    },
  ],
  exports: [
    // Repository tokens for external module consumption
    AUTH_READER_TOKEN,
    AUTH_WRITER_TOKEN,
    AUTH_QUERY_TOKEN,
    // Bounded Context Reader tokens
    WORKSPACE_REFERENCE_READER_TOKEN,
  ],
})
export class AuthModule {}
