// @generated by gen v1.0.0 hash:regen
// REMOVE THIS COMMENT TO STOP AUTOMATIC UPDATES TO THIS BLOCK

import {
  EnumVOInstance,
  createDisplayNameHelper,
  createEnumTypeGuards,
  createEnumVO,
  createEnumVOErrors,
  createStateTransitions,
} from 'src/shared/domain/value-objects';
import { Result, DomainError } from 'src/shared/errors';
import { ConfigErrors } from '../errors/config.errors';

// ============================================================================
// SINGLE SOURCE OF TRUTH
// ============================================================================

/**
 * ConfigRetryStrategy allowed values
 * Canonical definition used across all layers (API, Domain, DB)
 */
export const ConfigRetryStrategyValues = [
  'exponential',
  'linear',
  'fixed',
] as const;
export type ConfigRetryStrategyValue =
  (typeof ConfigRetryStrategyValues)[number];

// ============================================================================
// VALUE OBJECT - Domain Layer
// ============================================================================

/**
 * ConfigRetryStrategy Value Object
 *
 * Provides validation, business rules, and rich domain behavior
 * for config retryStrategy enumerated values.
 *
 * @example
 * ```typescript
 * const retryStrategy = ConfigRetryStrategy.create('exponential');
 * if (retryStrategy.ok) {
 *   console.log(retryStrategy.value.canTransitionTo('linear'));
 * }
 * ```
 */
export const ConfigRetryStrategy = createEnumVO({
  name: 'ConfigRetryStrategy',
  values: ConfigRetryStrategyValues,

  errors: createEnumVOErrors(
    ConfigErrors.INVALID_RETRY_STRATEGY,
    'ConfigRetryStrategy',
  ),
});

export type ConfigRetryStrategy = EnumVOInstance<ConfigRetryStrategyValue>;

// ============================================================================
// CONVENIENCE FACTORIES
// ============================================================================

export const createConfigRetryStrategy = (
  value: ConfigRetryStrategyValue | undefined,
) =>
  ConfigRetryStrategy.create(value) as Result<ConfigRetryStrategy, DomainError>;
export const configRetryStrategyFrom = (value: unknown) =>
  ConfigRetryStrategy.from(value) as Result<ConfigRetryStrategy, DomainError>;

// ============================================================================
// BUSINESS LOGIC HELPERS - Domain Behavior
// ============================================================================

/**
 * Valid state transitions for config retryStrategy
 */
const CONFIG_RETRY_STRATEGY_TRANSITIONS = {
  exponential: ['linear', 'fixed'] as const,
  linear: ['exponential', 'fixed'] as const,
  fixed: ['exponential', 'linear'] as const,
} as const;

/**
 * Display names for config retryStrategy values
 */
const CONFIG_RETRY_STRATEGY_DISPLAY_NAMES = {
  exponential: 'Exponential',
  linear: 'Linear',
  fixed: 'Fixed',
} as const;

/**
 * State machine helpers for ConfigRetryStrategy transitions
 */
const ConfigRetryStrategyTransitions = createStateTransitions(
  CONFIG_RETRY_STRATEGY_TRANSITIONS,
);

/**
 * Type guards for ConfigRetryStrategy values
 */
const ConfigRetryStrategyGuards = createEnumTypeGuards(
  ConfigRetryStrategyValues,
  'ConfigRetryStrategy',
  (value, validValues) => ({
    ...ConfigErrors.INVALID_RETRY_STRATEGY,
    detail: `ConfigRetryStrategy must be one of: ${validValues.join(', ')}, received: ${String(value)}`,
    context: { value, validValues },
  }),
);

/**
 * Display name helpers for ConfigRetryStrategy
 */
const ConfigRetryStrategyDisplay = createDisplayNameHelper(
  CONFIG_RETRY_STRATEGY_DISPLAY_NAMES,
);

/**
 * Business logic functions for ConfigRetryStrategy
 */
export const ConfigRetryStrategyLogic = {
  /**
   * Check if transition from one state to another is valid
   */
  canTransition: (
    from: ConfigRetryStrategyValue,
    to: ConfigRetryStrategyValue,
  ): boolean => ConfigRetryStrategyTransitions.canTransition(from, to),

  /**
   * Get all valid next states from current state
   */
  getValidTransitions: (
    from: ConfigRetryStrategyValue,
  ): readonly ConfigRetryStrategyValue[] =>
    ConfigRetryStrategyTransitions.getValidTransitions(from),

  /**
   * Get human-readable display name
   */
  getDisplayName: (value: ConfigRetryStrategyValue): string =>
    ConfigRetryStrategyDisplay.getDisplayName(value),

  /**
   * Get all available values with metadata
   */
  getAllValues(): Array<{
    value: ConfigRetryStrategyValue;
    displayName: string;
    validTransitions: readonly ConfigRetryStrategyValue[];
  }> {
    return ConfigRetryStrategyValues.map((value) => ({
      value,
      displayName: ConfigRetryStrategyLogic.getDisplayName(value),
      validTransitions: ConfigRetryStrategyLogic.getValidTransitions(value),
    }));
  },
} as const;

// ============================================================================
// TYPE GUARDS - Runtime Type Checking
// ============================================================================

/**
 * Type guard to check if value is valid ConfigRetryStrategy
 */
export const isConfigRetryStrategyValue = (
  value: unknown,
): value is ConfigRetryStrategyValue =>
  ConfigRetryStrategyGuards.isValid(value);

/**
 * Assert that value is valid ConfigRetryStrategy (throws if invalid)
 */
export const assertConfigRetryStrategyValue = (
  value: unknown,
): asserts value is ConfigRetryStrategyValue =>
  ConfigRetryStrategyGuards.assert(value);
