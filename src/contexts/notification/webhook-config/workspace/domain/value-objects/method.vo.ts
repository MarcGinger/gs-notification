// @generated by gen v1.0.0 hash:regen
// REMOVE THIS COMMENT TO STOP AUTOMATIC UPDATES TO THIS BLOCK

import {
  EnumVOInstance,
  createDisplayNameHelper,
  createEnumTypeGuards,
  createEnumVO,
  createEnumVOErrors,
  createStateTransitions,
} from 'src/shared/domain/value-objects';
import { Result, DomainError } from 'src/shared/errors';
import { WorkspaceErrors } from '../errors/workspace.errors';

// ============================================================================
// SINGLE SOURCE OF TRUTH
// ============================================================================

/**
 * WorkspaceMethod allowed values
 * Canonical definition used across all layers (API, Domain, DB)
 */
export const WorkspaceMethodValues = ['get', 'post', 'put', 'patch'] as const;
export type WorkspaceMethodValue = (typeof WorkspaceMethodValues)[number];

// ============================================================================
// VALUE OBJECT - Domain Layer
// ============================================================================

/**
 * WorkspaceMethod Value Object
 *
 * Provides validation, business rules, and rich domain behavior
 * for workspace method enumerated values.
 *
 * @example
 * ```typescript
 * const method = WorkspaceMethod.create('get');
 * if (method.ok) {
 *   console.log(method.value.canTransitionTo('post'));
 * }
 * ```
 */
export const WorkspaceMethod = createEnumVO({
  name: 'WorkspaceMethod',
  values: WorkspaceMethodValues,
  required: true,
  errors: createEnumVOErrors(WorkspaceErrors.INVALID_METHOD, 'WorkspaceMethod'),
});

export type WorkspaceMethod = EnumVOInstance<WorkspaceMethodValue>;

// ============================================================================
// CONVENIENCE FACTORIES
// ============================================================================

export const createWorkspaceMethod = (
  value: WorkspaceMethodValue | undefined,
) => WorkspaceMethod.create(value) as Result<WorkspaceMethod, DomainError>;
export const workspaceMethodFrom = (value: unknown) =>
  WorkspaceMethod.from(value) as Result<WorkspaceMethod, DomainError>;

// ============================================================================
// BUSINESS LOGIC HELPERS - Domain Behavior
// ============================================================================

/**
 * Valid state transitions for workspace method
 */
const WORKSPACE_METHOD_TRANSITIONS = {
  get: ['post', 'put', 'patch'] as const,
  post: ['get', 'put', 'patch'] as const,
  put: ['get', 'post', 'patch'] as const,
  patch: ['get', 'post', 'put'] as const,
} as const;

/**
 * Display names for workspace method values
 */
const WORKSPACE_METHOD_DISPLAY_NAMES = {
  get: 'Get',
  post: 'Post',
  put: 'Put',
  patch: 'Patch',
} as const;

/**
 * State machine helpers for WorkspaceMethod transitions
 */
const WorkspaceMethodTransitions = createStateTransitions(
  WORKSPACE_METHOD_TRANSITIONS,
);

/**
 * Type guards for WorkspaceMethod values
 */
const WorkspaceMethodGuards = createEnumTypeGuards(
  WorkspaceMethodValues,
  'WorkspaceMethod',
  (value, validValues) => ({
    ...WorkspaceErrors.INVALID_METHOD,
    detail: `WorkspaceMethod must be one of: ${validValues.join(', ')}, received: ${String(value)}`,
    context: { value, validValues },
  }),
);

/**
 * Display name helpers for WorkspaceMethod
 */
const WorkspaceMethodDisplay = createDisplayNameHelper(
  WORKSPACE_METHOD_DISPLAY_NAMES,
);

/**
 * Business logic functions for WorkspaceMethod
 */
export const WorkspaceMethodLogic = {
  /**
   * Check if transition from one state to another is valid
   */
  canTransition: (
    from: WorkspaceMethodValue,
    to: WorkspaceMethodValue,
  ): boolean => WorkspaceMethodTransitions.canTransition(from, to),

  /**
   * Get all valid next states from current state
   */
  getValidTransitions: (
    from: WorkspaceMethodValue,
  ): readonly WorkspaceMethodValue[] =>
    WorkspaceMethodTransitions.getValidTransitions(from),

  /**
   * Get human-readable display name
   */
  getDisplayName: (value: WorkspaceMethodValue): string =>
    WorkspaceMethodDisplay.getDisplayName(value),

  /**
   * Get all available values with metadata
   */
  getAllValues(): Array<{
    value: WorkspaceMethodValue;
    displayName: string;
    validTransitions: readonly WorkspaceMethodValue[];
  }> {
    return WorkspaceMethodValues.map((value) => ({
      value,
      displayName: WorkspaceMethodLogic.getDisplayName(value),
      validTransitions: WorkspaceMethodLogic.getValidTransitions(value),
    }));
  },
} as const;

// ============================================================================
// TYPE GUARDS - Runtime Type Checking
// ============================================================================

/**
 * Type guard to check if value is valid WorkspaceMethod
 */
export const isWorkspaceMethodValue = (
  value: unknown,
): value is WorkspaceMethodValue => WorkspaceMethodGuards.isValid(value);

/**
 * Assert that value is valid WorkspaceMethod (throws if invalid)
 */
export const assertWorkspaceMethodValue = (
  value: unknown,
): asserts value is WorkspaceMethodValue => WorkspaceMethodGuards.assert(value);
