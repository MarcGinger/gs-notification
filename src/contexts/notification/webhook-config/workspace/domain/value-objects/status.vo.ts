// @generated by gen v1.0.0 hash:regen
// REMOVE THIS COMMENT TO STOP AUTOMATIC UPDATES TO THIS BLOCK

import {
  EnumVOInstance,
  createDisplayNameHelper,
  createEnumTypeGuards,
  createEnumVO,
  createEnumVOErrors,
  createStateTransitions,
} from 'src/shared/domain/value-objects';
import { Result, DomainError } from 'src/shared/errors';
import { WorkspaceErrors } from '../errors/workspace.errors';

// ============================================================================
// SINGLE SOURCE OF TRUTH
// ============================================================================

/**
 * WorkspaceStatus allowed values
 * Canonical definition used across all layers (API, Domain, DB)
 */
export const WorkspaceStatusValues = ['active', 'paused', 'disabled'] as const;
export type WorkspaceStatusValue = (typeof WorkspaceStatusValues)[number];

// ============================================================================
// VALUE OBJECT - Domain Layer
// ============================================================================

/**
 * WorkspaceStatus Value Object
 *
 * Provides validation, business rules, and rich domain behavior
 * for workspace status enumerated values.
 *
 * @example
 * ```typescript
 * const status = WorkspaceStatus.create('active');
 * if (status.ok) {
 *   console.log(status.value.canTransitionTo('paused'));
 * }
 * ```
 */
export const WorkspaceStatus = createEnumVO({
  name: 'WorkspaceStatus',
  values: WorkspaceStatusValues,
  required: true,
  errors: createEnumVOErrors(WorkspaceErrors.INVALID_STATUS, 'WorkspaceStatus'),
});

export type WorkspaceStatus = EnumVOInstance<WorkspaceStatusValue>;

// ============================================================================
// CONVENIENCE FACTORIES
// ============================================================================

export const createWorkspaceStatus = (
  value: WorkspaceStatusValue | undefined,
) => WorkspaceStatus.create(value) as Result<WorkspaceStatus, DomainError>;
export const workspaceStatusFrom = (value: unknown) =>
  WorkspaceStatus.from(value) as Result<WorkspaceStatus, DomainError>;

// ============================================================================
// BUSINESS LOGIC HELPERS - Domain Behavior
// ============================================================================

/**
 * Valid state transitions for workspace status
 */
const WORKSPACE_STATUS_TRANSITIONS = {
  active: ['paused', 'disabled'] as const,
  paused: ['active', 'disabled'] as const,
  disabled: ['active', 'paused'] as const,
} as const;

/**
 * Display names for workspace status values
 */
const WORKSPACE_STATUS_DISPLAY_NAMES = {
  active: 'Active',
  paused: 'Paused',
  disabled: 'Disabled',
} as const;

/**
 * State machine helpers for WorkspaceStatus transitions
 */
const WorkspaceStatusTransitions = createStateTransitions(
  WORKSPACE_STATUS_TRANSITIONS,
);

/**
 * Type guards for WorkspaceStatus values
 */
const WorkspaceStatusGuards = createEnumTypeGuards(
  WorkspaceStatusValues,
  'WorkspaceStatus',
  (value, validValues) => ({
    ...WorkspaceErrors.INVALID_STATUS,
    detail: `WorkspaceStatus must be one of: ${validValues.join(', ')}, received: ${String(value)}`,
    context: { value, validValues },
  }),
);

/**
 * Display name helpers for WorkspaceStatus
 */
const WorkspaceStatusDisplay = createDisplayNameHelper(
  WORKSPACE_STATUS_DISPLAY_NAMES,
);

/**
 * Business logic functions for WorkspaceStatus
 */
export const WorkspaceStatusLogic = {
  /**
   * Check if transition from one state to another is valid
   */
  canTransition: (
    from: WorkspaceStatusValue,
    to: WorkspaceStatusValue,
  ): boolean => WorkspaceStatusTransitions.canTransition(from, to),

  /**
   * Get all valid next states from current state
   */
  getValidTransitions: (
    from: WorkspaceStatusValue,
  ): readonly WorkspaceStatusValue[] =>
    WorkspaceStatusTransitions.getValidTransitions(from),

  /**
   * Business rule: Check if entity can accept operations
   */
  isOperational(value: WorkspaceStatusValue): boolean {
    return value === 'active';
  },

  /**
   * Business rule: Check if entity is in a locked state
   */
  isLocked(value: WorkspaceStatusValue): boolean {
    return value === 'disabled';
  },

  /**
   * Business rule: Check if state is terminal (no transitions)
   */
  isTerminal(value: WorkspaceStatusValue): boolean {
    return ['disabled'].includes(value);
  },

  /**
   * Get human-readable display name
   */
  getDisplayName: (value: WorkspaceStatusValue): string =>
    WorkspaceStatusDisplay.getDisplayName(value),

  /**
   * Get all available values with metadata
   */
  getAllValues(): Array<{
    value: WorkspaceStatusValue;
    displayName: string;
    isOperational: boolean;
    isLocked: boolean;
    isTerminal: boolean;
    validTransitions: readonly WorkspaceStatusValue[];
  }> {
    return WorkspaceStatusValues.map((value) => ({
      value,
      displayName: WorkspaceStatusLogic.getDisplayName(value),
      isOperational: WorkspaceStatusLogic.isOperational(value),
      isLocked: WorkspaceStatusLogic.isLocked(value),
      isTerminal: WorkspaceStatusLogic.isTerminal(value),
      validTransitions: WorkspaceStatusLogic.getValidTransitions(value),
    }));
  },
} as const;

// ============================================================================
// TYPE GUARDS - Runtime Type Checking
// ============================================================================

/**
 * Type guard to check if value is valid WorkspaceStatus
 */
export const isWorkspaceStatusValue = (
  value: unknown,
): value is WorkspaceStatusValue => WorkspaceStatusGuards.isValid(value);

/**
 * Assert that value is valid WorkspaceStatus (throws if invalid)
 */
export const assertWorkspaceStatusValue = (
  value: unknown,
): asserts value is WorkspaceStatusValue => WorkspaceStatusGuards.assert(value);
