// @generated by gen v1.0.0 hash:regen
// REMOVE THIS COMMENT TO STOP AUTOMATIC UPDATES TO THIS BLOCK

import { DomainError, Result, err, withContext } from 'src/shared/errors';
import { EventMetadata } from 'src/shared/domain/events';
import { CreateOptionsProps } from '../props';
import {
  OptionsName,
  SecureTestOptionsConfiguration,
  createOptionsConfiguration,
} from '../value-objects';

/**
 * Factory for creating options configuration with comprehensive validation
 */
export function createOptionsConfigurationFromProps(
  optionsProps: CreateOptionsProps,
  metadata: EventMetadata,
): Result<SecureTestOptionsConfiguration, DomainError> {
  // Create options value objects
  const optionsNameResult = OptionsName.from(optionsProps.name);
  if (!optionsNameResult.ok) {
    return err(
      withContext(optionsNameResult.error, {
        ...optionsNameResult.error.context,
        correlationId: metadata.correlationId,
        userId: metadata.userId,
        operation: 'create_options_configuration',
        name: optionsProps.name,
      }),
    );
  }

  const optionsResult = createOptionsConfiguration({
    name: optionsNameResult.value,
  });
  if (!optionsResult.ok) {
    return err(
      withContext(optionsResult.error, {
        ...optionsResult.error.context,
        correlationId: metadata.correlationId,
        userId: metadata.userId,
        operation: 'create_options_configuration',
        options: optionsProps,
      }),
    );
  }

  return optionsResult;
}
