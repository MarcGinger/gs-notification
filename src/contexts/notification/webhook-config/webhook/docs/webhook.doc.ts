// @generated by gen v1.0.0 hash:regen
// REMOVE THIS COMMENT TO STOP AUTOMATIC UPDATES TO THIS BLOCK

import { DocumentBuilder, SwaggerModule } from '@nestjs/swagger';
import { INestApplication } from '@nestjs/common';
import { SwaggerConfigUtil } from 'src/docs/swagger-config.util';
import { WebhookModule } from '../webhook.module';
/**
 * Webhook documentation endpoints interface
 */
export interface WebhookDocumentationUrls {
  webhook: string;
}

/**
 * Webhook Documentation
 * This module handles the Swagger documentation for webhooks
 *
 */
export class WebhookDocumentation {
  static setup(app: INestApplication, port: string | number): void {
    const config = new DocumentBuilder()
      .addBearerAuth(
        { type: 'http', scheme: 'bearer', bearerFormat: 'JWT' },
        'bearer',
      )
      .setTitle('üì± Webhook Management API')
      .setDescription(
        `
## bounded context: notification
[‚Üê Back to documentation](/api/docs/notification)

### application: webhook-config
[‚Üê Back to documentation](/api/docs/notification/webhook-config)
## üîó Webhook

### **Purpose**

The \`Webhook\` aggregate represents a webhook endpoint configuration for delivering events to external systems. It acts as the foundational configuration point that defines how, where, and under what conditions webhook notifications are sent.

This aggregate holds delivery configuration including target URLs, HTTP methods, headers, signing secrets, and operational settings. It ensures webhook deliveries are properly configured and can be managed independently.

### **Responsibilities**

* Define webhook endpoint details (URL, method, headers).
* Manage webhook operational status (active, paused, disabled).
* Store webhook-specific timeout and TLS verification settings.
* Reference signing secrets for webhook authentication.
* Emit events when webhook configuration changes occur.

### **Why It Matters**

The \`Webhook\` aggregate provides the essential configuration for reliable event delivery to external systems. It ensures proper authentication, timeout handling, and operational control over webhook endpoints.
`,
      )
      .setVersion('1.0.0')
      .addTag('Webhooks', `Configuration for webhook table`);

    // Add dynamic server configuration
    SwaggerConfigUtil.addServers(config, port);

    const document = SwaggerModule.createDocument(app, config.build(), {
      include: [WebhookModule],
      extraModels: [],
    });

    SwaggerModule.setup(
      'api/docs/notification/webhook-config/webhook',
      app,
      document,
    );
  }

  /**
   * Setup all webhook-related documentation endpoints
   * This method centralizes the setup of all webhook module documentation
   */
  static setupAll(
    app: INestApplication,
    port: string | number,
  ): WebhookDocumentationUrls {
    // Setup main webhook documentation
    WebhookDocumentation.setup(app, port);

    // Setup sub-module documentation

    // Return all endpoint URLs
    return {
      webhook: WebhookDocumentation.getEndpoint(port),
    };
  }

  static getEndpoint(port: string | number): string {
    return `${SwaggerConfigUtil.getServerUrl(port)}/api/docs/notification/webhook-config/webhook`;
  }
}
