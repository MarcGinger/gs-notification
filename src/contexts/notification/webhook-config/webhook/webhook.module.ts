// @generated by gen v1.0.0 hash:regen
// REMOVE THIS COMMENT TO STOP AUTOMATIC UPDATES TO THIS BLOCK

import { Module } from '@nestjs/common';
import { WebhookConfigSharedModule } from '../webhook-config-shared.module';
import { WebhookController } from './interface/http/controllers';
import {
  WebhookApplicationService,
  WebhookAuthorizationService,
  WebhookAuthorizationAdapter,
} from './application/services';
import {
  IUpsertWebhookUseCase,
  UpsertWebhookUseCase,
  IGetWebhookUseCase,
  GetWebhookUseCase,
  IListWebhookUseCase,
  ListWebhookUseCase,
} from './application/use-cases';

// import { IWebhookRepository } from './application/ports';
import {
  WebhookQueryRepository,
  WebhookReaderRepository,
  WebhookWriterRepository,
} from './infrastructure/repositories';

// Tokens for injection - imported directly from port files
import {
  WEBHOOK_READER_TOKEN,
  WEBHOOK_WRITER_TOKEN,
  WEBHOOK_QUERY_TOKEN,
} from './application/ports';
@Module({
  imports: [
    WebhookConfigSharedModule, // Provides all common infrastructure and services
  ],
  controllers: [WebhookController],
  providers: [
    // Repository implementations with tokens (before services that depend on them)
    {
      provide: WEBHOOK_READER_TOKEN,
      useClass: WebhookReaderRepository,
    },
    {
      provide: WEBHOOK_WRITER_TOKEN,
      useClass: WebhookWriterRepository,
    },
    {
      provide: WEBHOOK_QUERY_TOKEN,
      useClass: WebhookQueryRepository,
    },

    // Services that depend on repositories
    WebhookApplicationService,
    WebhookAuthorizationService,
    WebhookAuthorizationAdapter,

    // Use case implementations
    {
      provide: IUpsertWebhookUseCase,
      useClass: UpsertWebhookUseCase,
    },
    {
      provide: IGetWebhookUseCase,
      useClass: GetWebhookUseCase,
    },
    {
      provide: IListWebhookUseCase,
      useClass: ListWebhookUseCase,
    },
  ],
  exports: [
    // Repository tokens for external module consumption
    WEBHOOK_READER_TOKEN,
    WEBHOOK_WRITER_TOKEN,
    WEBHOOK_QUERY_TOKEN,
  ],
})
export class WebhookModule {}
