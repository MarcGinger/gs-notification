// @generated by gen v1.0.0 hash:regen
// REMOVE THIS COMMENT TO STOP AUTOMATIC UPDATES TO THIS BLOCK

import {
  EnumVOInstance,
  createDisplayNameHelper,
  createEnumTypeGuards,
  createEnumVO,
  createEnumVOErrors,
  createStateTransitions,
} from 'src/shared/domain/value-objects';
import { Result, DomainError } from 'src/shared/errors';
import { WebhookErrors } from '../errors/webhook.errors';

// ============================================================================
// SINGLE SOURCE OF TRUTH
// ============================================================================

/**
 * WebhookMethod allowed values
 * Canonical definition used across all layers (API, Domain, DB)
 */
export const WebhookMethodValues = [
  'GET',
  'POST',
  'PUT',
  'PATCH',
  'DELETE',
] as const;
export type WebhookMethodValue = (typeof WebhookMethodValues)[number];

// ============================================================================
// VALUE OBJECT - Domain Layer
// ============================================================================

/**
 * WebhookMethod Value Object
 *
 * Provides validation, business rules, and rich domain behavior
 * for webhook method enumerated values.
 *
 * @example
 * ```typescript
 * const method = WebhookMethod.create('GET');
 * if (method.ok) {
 *   console.log(method.value.canTransitionTo('POST'));
 * }
 * ```
 */
export const WebhookMethod = createEnumVO({
  name: 'WebhookMethod',
  values: WebhookMethodValues,
  required: true,
  errors: createEnumVOErrors(WebhookErrors.INVALID_METHOD, 'WebhookMethod'),
});

export type WebhookMethod = EnumVOInstance<WebhookMethodValue>;

// ============================================================================
// CONVENIENCE FACTORIES
// ============================================================================

export const createWebhookMethod = (value: WebhookMethodValue | undefined) =>
  WebhookMethod.create(value) as Result<WebhookMethod, DomainError>;
export const webhookMethodFrom = (value: unknown) =>
  WebhookMethod.from(value) as Result<WebhookMethod, DomainError>;

// ============================================================================
// BUSINESS LOGIC HELPERS - Domain Behavior
// ============================================================================

/**
 * Valid state transitions for webhook method
 */
const WEBHOOK_METHOD_TRANSITIONS = {
  GET: ['POST', 'PUT', 'PATCH', 'DELETE'] as const,
  POST: ['GET', 'PUT', 'PATCH', 'DELETE'] as const,
  PUT: ['GET', 'POST', 'PATCH', 'DELETE'] as const,
  PATCH: ['GET', 'POST', 'PUT', 'DELETE'] as const,
  DELETE: ['GET', 'POST', 'PUT', 'PATCH'] as const,
} as const;

/**
 * Display names for webhook method values
 */
const WEBHOOK_METHOD_DISPLAY_NAMES = {
  GET: 'Get',
  POST: 'Post',
  PUT: 'Put',
  PATCH: 'Patch',
  DELETE: 'Delete',
} as const;

/**
 * State machine helpers for WebhookMethod transitions
 */
const WebhookMethodTransitions = createStateTransitions(
  WEBHOOK_METHOD_TRANSITIONS,
);

/**
 * Type guards for WebhookMethod values
 */
const WebhookMethodGuards = createEnumTypeGuards(
  WebhookMethodValues,
  'WebhookMethod',
  (value, validValues) => ({
    ...WebhookErrors.INVALID_METHOD,
    detail: `WebhookMethod must be one of: ${validValues.join(', ')}, received: ${String(value)}`,
    context: { value, validValues },
  }),
);

/**
 * Display name helpers for WebhookMethod
 */
const WebhookMethodDisplay = createDisplayNameHelper(
  WEBHOOK_METHOD_DISPLAY_NAMES,
);

/**
 * Business logic functions for WebhookMethod
 */
export const WebhookMethodLogic = {
  /**
   * Check if transition from one state to another is valid
   */
  canTransition: (from: WebhookMethodValue, to: WebhookMethodValue): boolean =>
    WebhookMethodTransitions.canTransition(from, to),

  /**
   * Get all valid next states from current state
   */
  getValidTransitions: (
    from: WebhookMethodValue,
  ): readonly WebhookMethodValue[] =>
    WebhookMethodTransitions.getValidTransitions(from),

  /**
   * Get human-readable display name
   */
  getDisplayName: (value: WebhookMethodValue): string =>
    WebhookMethodDisplay.getDisplayName(value),

  /**
   * Get all available values with metadata
   */
  getAllValues(): Array<{
    value: WebhookMethodValue;
    displayName: string;
    validTransitions: readonly WebhookMethodValue[];
  }> {
    return WebhookMethodValues.map((value) => ({
      value,
      displayName: WebhookMethodLogic.getDisplayName(value),
      validTransitions: WebhookMethodLogic.getValidTransitions(value),
    }));
  },
} as const;

// ============================================================================
// TYPE GUARDS - Runtime Type Checking
// ============================================================================

/**
 * Type guard to check if value is valid WebhookMethod
 */
export const isWebhookMethodValue = (
  value: unknown,
): value is WebhookMethodValue => WebhookMethodGuards.isValid(value);

/**
 * Assert that value is valid WebhookMethod (throws if invalid)
 */
export const assertWebhookMethodValue = (
  value: unknown,
): asserts value is WebhookMethodValue => WebhookMethodGuards.assert(value);
