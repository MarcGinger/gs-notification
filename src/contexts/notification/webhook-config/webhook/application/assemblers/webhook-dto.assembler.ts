// @generated by gen v1.0.0 hash:regen
// REMOVE THIS COMMENT TO STOP AUTOMATIC UPDATES TO THIS BLOCK

import { WebhookDomainState } from '../../domain/state';
import { DetailWebhookResponse, ListWebhookResponse } from '../dtos';

/**
 * Webhook DTO Assembler
 *
 * Converts WebhookDomainState (pure VOs) to transport DTOs.
 * Bridges the gap between rich domain objects and API response format.
 * Uses existing generated DTOs and follows established patterns.
 */

/**
 * Assembles DTOs from WebhookDomainState for API transport
 */
export class WebhookDtoAssembler {
  /**
   * Convert WebhookDomainState to detailed response DTO
   *
   * @param domainState - Rich domain state with VOs
   * @returns Clean DTO for API response
   */
  static toDetailResponse(
    domainState: WebhookDomainState,
  ): DetailWebhookResponse {
    const dto = new DetailWebhookResponse();

    // Extract primitive values from VOs
    dto.id = domainState.id.value;
    dto.name = domainState.name.value;
    dto.description = domainState.description?.value;
    dto.targetUrl = domainState.targetUrl.value;
    dto.webhookEventType = domainState.webhookEventType.value;
    dto.method = domainState.method.value;
    dto.headers = domainState.headers?.value;
    dto.signingSecretRef = domainState.signingSecretRef?.value;
    dto.status = domainState.status.value;
    dto.verifyTls = domainState.verifyTls?.value;
    dto.requestTimeoutMs = domainState.requestTimeoutMs?.value;
    dto.connectTimeoutMs = domainState.connectTimeoutMs?.value;
    dto.rateLimitPerMinute = domainState.rateLimitPerMinute?.value;

    return dto;
  }

  /**
   * Convert WebhookDomainState to list response DTO
   *
   * @param domainState - Rich domain state with VOs
   * @returns Clean DTO for list API response
   */
  static toListResponse(domainState: WebhookDomainState): ListWebhookResponse {
    const dto = new ListWebhookResponse();

    // Extract primitive values from VOs
    dto.id = domainState.id.value;
    dto.name = domainState.name.value;
    dto.description = domainState.description?.value;
    dto.targetUrl = domainState.targetUrl.value;
    dto.webhookEventType = domainState.webhookEventType.value;
    dto.method = domainState.method.value;
    dto.headers = domainState.headers?.value;
    dto.signingSecretRef = domainState.signingSecretRef?.value;
    dto.status = domainState.status.value;
    dto.verifyTls = domainState.verifyTls?.value;
    dto.requestTimeoutMs = domainState.requestTimeoutMs?.value;
    dto.connectTimeoutMs = domainState.connectTimeoutMs?.value;
    dto.rateLimitPerMinute = domainState.rateLimitPerMinute?.value;

    return dto;
  }

  /**
   * Convert array of WebhookDomainState to array of list DTOs
   *
   * @param domainStates - Array of rich domain states
   * @returns Array of clean DTOs for list API response
   */
  static toListResponseArray(
    domainStates: WebhookDomainState[],
  ): ListWebhookResponse[] {
    return domainStates.map((domainState) => this.toListResponse(domainState));
  }

  /**
   * Convert array of WebhookDomainState to array of detail DTOs
   *
   * @param domainStates - Array of rich domain states
   * @returns Array of clean DTOs for detail API response
   */
  static toDetailResponseArray(
    domainStates: WebhookDomainState[],
  ): DetailWebhookResponse[] {
    return domainStates.map((domainState) =>
      this.toDetailResponse(domainState),
    );
  }
}
