// @generated by gen v1.0.0 hash:regen
// REMOVE THIS COMMENT TO STOP AUTOMATIC UPDATES TO THIS BLOCK

/**
 * BullMQ Job Schema and Queue Configuration for MessageRequest Processing
 *
 * Purpose: Define minimal job payloads, queue options, and processing types
 * following the reference-only, secret-free principles from refinement.md
 */

import { JobsOptions } from 'bullmq';
import { DEFAULT_JOB_OPTIONS } from 'src/shared/infrastructure';

/**
 * SendMessageRequestJob - Minimal BullMQ job payload
 *
 * Following principles:
 * - Reference only: carries identifiers, not full objects
 * - Secret-free: no tokens, signing secrets, or config blobs
 * - Single source of truth: ESDB stream + Redis snapshot are authoritative
 */
export interface SendMessageRequestJob {
  /** UUID of the MessageRequest */
  messageRequestId: string;

  /** Logical tenant key for multi-tenancy */
  tenant: string;

  /** Optional Slack thread timestamp for threaded replies */
  threadTs?: string | null;
}

/**
 * Queue Configuration Constants
 */
export const MESSAGE_REQUEST_QUEUE = {
  /** Queue name for BullMQ */
  NAME: 'MessageRequestQueue',

  /** Job name for send operations */
  JOB_NAME: 'send-message-request',
} as const;

/**
 * MessageRequest-specific Job Options
 *
 * Type alias for BullMQ JobsOptions used in MessageRequest processing.
 * Uses shared defaults from DEFAULT_JOB_OPTIONS.
 */
export type SendMessageRequestJobOptions = JobsOptions;

/**
 * Default job options following refinement.md recommendations
 * Uses shared defaults with MessageRequest-specific configuration.
 */
export const DEFAULT_SEND_MESSAGE_REQUEST_JOB_OPTIONS: SendMessageRequestJobOptions =
  {
    ...DEFAULT_JOB_OPTIONS,
    // MessageRequest-specific overrides can be added here if needed
  } as const;

// JobProcessingResult and JobProcessingError are now imported from shared infrastructure
