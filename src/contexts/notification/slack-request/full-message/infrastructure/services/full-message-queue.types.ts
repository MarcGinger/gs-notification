// @generated by gen v1.0.0 hash:regen
// REMOVE THIS COMMENT TO STOP AUTOMATIC UPDATES TO THIS BLOCK

/**
 * BullMQ Job Schema and Queue Configuration for FullMessage Processing
 *
 * Purpose: Define minimal job payloads, queue options, and processing types
 * following the reference-only, secret-free principles from refinement.md
 */

import { JobsOptions } from 'bullmq';
import { DEFAULT_JOB_OPTIONS } from 'src/shared/infrastructure';

/**
 * SendFullMessageJob - Minimal BullMQ job payload
 *
 * Following principles:
 * - Reference only: carries identifiers, not full objects
 * - Secret-free: no tokens, signing secrets, or config blobs
 * - Single source of truth: ESDB stream + Redis snapshot are authoritative
 */
export interface SendFullMessageJob {
  /** UUID of the FullMessage */
  fullMessageId: string;

  /** Logical tenant key for multi-tenancy */
  tenant: string;

  /** Optional Slack thread timestamp for threaded replies */
  threadTs?: string | null;
}

/**
 * Queue Configuration Constants
 */
export const FULL_MESSAGE_QUEUE = {
  /** Queue name for BullMQ */
  NAME: 'FullMessageQueue',

  /** Job name for send operations */
  JOB_NAME: 'send-full-message',
} as const;

/**
 * FullMessage-specific Job Options
 *
 * Type alias for BullMQ JobsOptions used in FullMessage processing.
 * Uses shared defaults from DEFAULT_JOB_OPTIONS.
 */
export type SendFullMessageJobOptions = JobsOptions;

/**
 * Default job options following refinement.md recommendations
 * Uses shared defaults with FullMessage-specific configuration.
 */
export const DEFAULT_SEND_FULL_MESSAGE_JOB_OPTIONS: SendFullMessageJobOptions =
  {
    ...DEFAULT_JOB_OPTIONS,
    // FullMessage-specific overrides can be added here if needed
  } as const;

// JobProcessingResult and JobProcessingError are now imported from shared infrastructure
