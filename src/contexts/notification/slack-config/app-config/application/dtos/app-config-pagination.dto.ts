// @generated by gen v1.0.0 hash:regen
// REMOVE THIS COMMENT TO STOP AUTOMATIC UPDATES TO THIS BLOCK

/**
 * AppConfig list request DTO with pagination and filtering
 * Combines standardized pagination with app-config-specific filters
 * Now extends shared base classes for consistency across domains
 */

import {
  BaseSortableListFilterRequest,
  SortFieldConfig,
  PaginationMetaResponse,
} from 'src/shared/application/dtos';
import { ApiListOf } from 'src/shared/application/decorators';
import { ApiPropertyOptional } from '@nestjs/swagger';
import {
  ApiAppConfigId,
  ApiAppConfigListMeta,
  ApiAppConfigWorkspaceId,
} from './decorators';
import { ListAppConfigResponse } from './';
/**
 * AppConfig list request DTO with pagination and filtering
 * Combines standardized pagination with app-config-specific filters
 * Now extends shared base classes for consistency across domains
 *
 * Available sort fields:
 * - id: Sort by id (default: asc)
 * - workspaceId: Sort by workspaceId (default: asc)
 *
 * Example sortBy usage: {"code": "asc", "name": "desc"}
 */
export class ListAppConfigFilterRequest extends BaseSortableListFilterRequest {
  @ApiAppConfigId({ required: false })
  id?: number;

  @ApiAppConfigWorkspaceId({ required: false })
  workspaceId?: string;

  /**
   * Override sortBy with app-config-specific schema for better Swagger documentation
   */
  @ApiPropertyOptional({
    type: 'object',
    description: 'Sort criteria with field names and directions',
    example: { code: 'asc', name: 'asc' },
    default: { code: 'asc', name: 'asc' },
    properties: {
      Id: {
        type: 'number',
        enum: ['asc', 'desc'],
        description: 'Sort by id',
        default: 'asc',
      },
      WorkspaceId: {
        type: 'string',
        enum: ['asc', 'desc'],
        description: 'Sort by workspaceId',
        default: 'asc',
      },
    },
    additionalProperties: false,
  })
  sortBy?: Record<string, 'asc' | 'desc'> = undefined;
  /**
   * Define available sort fields for appConfigs
   * This method ensures type-safe sorting validation
   *
   * Available sort fields:
   * - id: AppConfig id (sortable, default: asc)
   * - workspaceId: AppConfig workspaceId (sortable, default: asc)
   *
   * @returns Configuration object defining sortable fields and their properties
   */
  getSortFieldConfig(): SortFieldConfig {
    return {
      id: {
        description: 'AppConfig id',
        sortable: true,
        defaultDirection: 'asc' as const,
      },
      workspaceId: {
        description: 'AppConfig workspaceId',
        sortable: true,
        defaultDirection: 'asc' as const,
      },
    };
  }
}

/**
 * AppConfig page response DTO with metadata for pagination
 * Extends the generic PagedResponse pattern while maintaining API compatibility
 */
export class AppConfigPageResponse {
  @ApiListOf(ListAppConfigResponse)
  readonly data: ListAppConfigResponse[];

  @ApiAppConfigListMeta()
  readonly meta: PaginationMetaResponse;

  constructor(data: ListAppConfigResponse[], meta: PaginationMetaResponse) {
    this.data = data;
    this.meta = meta;
  }

  /**
   * Static factory method for creating response instances
   */
  static create(
    data: ListAppConfigResponse[],
    meta: PaginationMetaResponse,
  ): AppConfigPageResponse {
    return new AppConfigPageResponse(data, meta);
  }

  /**
   * Check if response has data
   */
  get isEmpty(): boolean {
    return this.data.length === 0;
  }

  /**
   * Get total count if available
   */
  get totalCount(): number | undefined {
    return this.meta.totalItems;
  }
}
